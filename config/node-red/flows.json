[{"id":"0e8f6b67bf5f7644","type":"tab","label":"Time Events","disabled":false,"info":"","env":[]},{"id":"81dea24119402f3d","type":"tab","label":"Lights and Plugs","disabled":false,"info":"","env":[]},{"id":"a95ec654e9a3d387","type":"tab","label":"Contact Sensors","disabled":false,"info":"","env":[]},{"id":"ccf4e5eced60ee19","type":"tab","label":"Motion/Presense Sensors","disabled":false,"info":"","env":[]},{"id":"462cafc155901a6e","type":"tab","label":"Other","disabled":false,"info":"","env":[]},{"id":"75bda675505dd534","type":"tab","label":"Button Actions","disabled":false,"info":"","env":[]},{"id":"948139bb1964bc5a","type":"tab","label":"Status Notifications","disabled":false,"info":"","env":[]},{"id":"4e1d02e135536c14","type":"tab","label":"Notification Listeners","disabled":false,"info":"","env":[]},{"id":"9d5b166df6c5a423","type":"subflow","name":"Circadian Calculator","info":"","category":"","in":[{"x":60,"y":160,"wires":[{"id":"dd36e44f52c004a6"}]}],"out":[{"x":1120,"y":140,"wires":[{"id":"b164590f43513f75","port":0}]},{"x":1120,"y":340,"wires":[{"id":"103949ee1d3705df","port":0}]},{"x":520,"y":400,"wires":[{"id":"1c9430e6a50c3787","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"26c6c4d5.3a01e4","type":"subflow","name":"Sub Circadian NR","info":"","category":"","in":[{"x":60,"y":160,"wires":[{"id":"7d4ca80d.e23468"}]}],"out":[{"x":1120,"y":140,"wires":[{"id":"e64dbfa.021204","port":0}]},{"x":1120,"y":340,"wires":[{"id":"d9f0035a.28956","port":0}]},{"x":500,"y":500,"wires":[{"id":"667d6dd.334db94","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"af922ec12cc24eb2","type":"group","z":"0e8f6b67bf5f7644","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b8f52e4f41cd2d0d","83b265c91908ebc9","72af4f94c5a53079","ce7234c8b9b5fb38","37c06292e60fa0f2","3d6c570539c4e0a6","8df8865412c76469","352185a904ef52c8","37289fa14f97c1e8","36bdeb7225d0ea6e","eb336140f99bd9fb","6e0b3c1b03210e20"],"x":54,"y":39,"w":912,"h":262},{"id":"97d95b79239fec91","type":"group","z":"0e8f6b67bf5f7644","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b66b740408fe5733","d547650c5a2d1f2c","952a5b6384f3a813","77ce70f8ea73afa1","1470f335e76b6c98","131cf7adb5bda567","38ac479d21115bd1","a3c88ca6db142ac5","f344be2df57e242f","e35f0e75fe9a65d6","508530b4a6242cc6","3ebc94adc32366e3","9ad5147cd229ac8a","67270dccd98acc56","d9c0c2e3795b9980","7971e1dc35e7ff5c","ac8e0389514188ba","f788e9f8fbef9822","cd9fa763f5527bf3","fe4fe4a319aba2fa","0fd57bfc1cb5087e","3ebe07734d58afec","2d4425f77f88c6b4","aadb7647ec3374ce","d6e0dbaa97906f3e","06dad956c4af2594","be7533b9d4f98f55","045f483e1dbc5d9a"],"x":54,"y":359,"w":1812,"h":462},{"id":"bcf8b42cf961c13f","type":"group","z":"0e8f6b67bf5f7644","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["32cccaadc1c71ce0","8b63dfc4c9e23c15","83bdc9bdedd5c703","8beb947db40d7699","5b4b316c5ce5394b","9d3441863665ba13","392103830291ac1f","69a9377db1fbae6d","be4261c9c45ad9e4","4be567938dadd156","66eb2a0e58d55b7e","9b69b8b35935fe53","31a1ccbe51156198","7ef1a443942dbba3","0386f69352102998","50daefad513e6590","83f5bdc8b93aaa05","e73ebd0bd5c0344b","e444dbca5dc32c07","df4ac9e5af0e8f6f","f69c80594b85c018","2637ed3cce1da98c","40f99c206974098d","8c4706b8fb84af54","2b18ddccaad76d53","10b7f7a6bfa8975f","f1c037d1f1107475","97cd162e32eb7c9f","25fd21970749adac","10d3e644d2dc56a4","03addf22e40bc908","03db6f81cdb33042","2ab30f2f6e61cea0","e479926da7f7194b","e26838c3d428684d","17f6f94f24cd0597","6dec74ac5574f034","c0ab1218baa04e24"],"x":54,"y":879,"w":1932,"h":562},{"id":"8e91da327c4f467a","type":"group","z":"0e8f6b67bf5f7644","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ca3ea91ad8b05cff","5acf72e502eba1e0","8575c9d21522d666","2a6908734907a6da","a22dcc5d492030a2","79a8ec701046fd7e","49aae6dea38bcdde","6cf4987d08bd7f90","24d40ae116f2abbf","82164ad95d19fcbf","a3b250eba3c64cb3","418a74c911a1fc60","a13ee021a5f36948","7f5f19a344d42bde","036cfc441ac07f94","72c95ca78e4a0239","bd08b725b42218f5","3c5aa315473a06a8","ab7a0c371f1814c1","a199a4fcfbc3dc46","24faaef27d786fa1","121b89de54450d79","f8623267292eed2e","10f44381e91bed82","11dfcbc9c3c6975c","ad292ed8e2dfcda3","379ac16b20fdc0b7","7802733fd58cefa8","df3d8a5b6fd8c6a5","d1594f6182d56064"],"x":54,"y":1499,"w":1672,"h":502},{"id":"6eb43475c0cbaf9e","type":"group","z":"a95ec654e9a3d387","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1c847a4542ba2517","ef91789de0473a81","e9f3e7483c18d115","ddd8b329f4e3a961","f3b33899ef94e86c","2d23a7750946bc2d","3a3337d7327a07cc","ed04d002c9779b7e","998ffb489c5cf41f"],"x":34,"y":39},{"id":"09686aa28ec76166","type":"group","z":"a95ec654e9a3d387","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["02c9c7877f7bd7c5","cfd5c0a89e5d590f","3ef848920d23e01f","4639f3deaa4ba71c","ffccc618fbd95dcf","c48c1d94ee6a6711","c7a2741c9343625d","70871eb018dde9c3","ed6210c8a2ed785f"],"x":34,"y":359},{"id":"90b28685286b5c32","type":"group","z":"a95ec654e9a3d387","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d721ce3bd6206ce3","d105d1df17b7b199","b4fb0ad9bfb713c4","b18a99e3215ce7a9","4db84ce07de49276","21107ebe8dd9c18e","36dbe061dd870db9","1cab91dc852c881f","8f4cbc4036b81f6f"],"x":34,"y":679},{"id":"6c9abf623b0a916b","type":"group","z":"a95ec654e9a3d387","name":"","style":{"label":true},"nodes":["bfd7f3089fe57cd9","106add1242e5743b","6b05354a13d1ee5f","b4d9116fa41904ef","4f8bd1dd7d308b46","6768dd61bf1cd6cb","85bba7b30bded39c","f8a7a9957d74f03c","a514ea0cfddc53d5","ca0bce132255d2f5","76355636c0ef3764"],"x":34,"y":1199},{"id":"2ef23d258e2908a5","type":"group","z":"a95ec654e9a3d387","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["fab252dc566fd69f","96a6be7a7bdad98a","10fb8e3957dae1b8","c375aba6238b4590","c367a2a0e26fd211","6ae3bfdbf1d8b22a","ef376d85a3136f21","98af20ded667f694","85baadc8430df888","ad5708633460b6fb","19907a9d0aa0f539","0c745f65dfe2301c"],"x":34,"y":939},{"id":"1f3f56a64bdf7245","type":"group","z":"ccf4e5eced60ee19","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6e95ceae462da943","5bbfae9781c64ed1","a6fafb1aaff116e8","72cbdf5001a79ab4","184d75c4d4c87969","eba66ecd4c9de23d","b675052fa6098c73","9e761378ef4304d7","7eb75ed978c8054b","10a0cfab0de3b09f"],"x":54,"y":599},{"id":"ac97a59aa0e054c4","type":"group","z":"ccf4e5eced60ee19","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3cc73458ada50437","6b7b3dea72c4a498","813c6b4b26caebac","35144f3b54e1eb38","bf86bf1f40773cb9","2a9db556fe75a53e","6c94fd1427d21d53","b73b70a08481ad81","8c18b33da463a312","18a2e9166694fb0c","a3917d33848d267a","66acd1847becf796"],"x":44,"y":319},{"id":"babed62518ff1825","type":"group","z":"ccf4e5eced60ee19","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["592b1510af2557a0","7251a67d88a0352f","88b0462386162524","4b31058af4d10e03","0aeff1a50e52889a","a705f00b0dbe73b5","886d3b36ab1636e9","b8626ff9ac46f637","530882536988219d","f492ca33661c8df8","eba87b7c0a53c6e7"],"x":44,"y":919},{"id":"bbdfd791e1227da1","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b33f1b35912969e0","a96ca5ac6d732b08","7133d65cba709e01","0180a8e0974cc07b","1f3d679062bc9586","f7a0be51b3cf53de","9591d8a2bed75603","17e0253cc7611cdd"],"x":34,"y":39},{"id":"3c888c1f5a7f12b2","type":"group","z":"75bda675505dd534","name":"","style":{"label":true},"nodes":["aa395cef7eb28827","0c8aebd6101ee42a","4e657bd12f3da99e","bca1cbf60fec6762","a4d93a3fba41f377","80c1fab30b054d93","1ede4d1e655b7797","541f985126d20172","43099f1c296af873","1a9e5b3d723fd043","3f9b5f430db4660b","69db3d8a0e4cd78f","2343f16b29502fdb","804006fe20f4ab7b","49f92784cf7a09aa","ec1fccd358e40463","b2a7b37874b4b0fb","453baa88c61820a0","99930259515b2d43"],"x":24,"y":739},{"id":"0b05817bb4d42102","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["0e0b319d3521efee","4015279ee4d1fd11","3f4b62c2ba6c794c","16191e38c834bdf9","cb339aea427179e6","6971f02eb5529462","807a15bf46fb8d0b","b833ad8a443495ca","ca92859fe80d1a43"],"x":34,"y":1199},{"id":"d46092dab47821af","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d62c5c9d.ef6d18","609ab88c0c8f076c","259e2ad8042c16d9","ca4892a8c0470bd9","259405adc493c6cc","a9ee4724c66e2f19","0a38f536b463b6b0","2a0d77fade2710e7","bfe8b62aa101afa1","dc9e9ba0c3926658","bcca83e51de327bb","577628db0a3600cf","b9a4464ae5baee1b","0998685f26fc6907","fe173d11a4227841","cc15bec00fa60581","0fef4cb1bfee9991","ca05185aee5f33af"],"x":34,"y":2339},{"id":"abb2809c73c9bf16","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ac6478947365b072","b6465fd896443869","36f68ebfdafa41a2","a53a26265673939a","c96cb06fce36d315","8b379f210d5b55fd","ebab4eaf662659a7","4054e2fe3d389c8c","a418271732700c61","46724618b7510644","3ca1851b424cb660","bae6b195750d5204","41a8c88062ca01cd","dee03074ae00cbdc","3cd0806b1bfed34d","24c2ddaa9b0285c6","bb787ff04cbcc689","68fce3057208e760","c7dfac556efb9726"],"x":24,"y":1579},{"id":"ced32fcc854281a5","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["0d46746ba8440730","6b25673ada107590","c6d8e1b43823a5dc","2f20f625c192cd1e","97e968a2365c92c3","e26d20461f8bf2d6","b0d4b0345dc6f620","bcfa23241d3d0e1b","d2bf35758a98bf99","30046c4972d92b55","0bc16ebac3c10591","c7613e444b7edf2c","f747c188d570c9db","ea7898cf98c1f3a2","78c61ee070bf9e01"],"x":54,"y":39,"w":1302,"h":562},{"id":"5df1c59ae220dac5","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b963a2ee377d2e71","8d26ab37046c1f9a","7cce35452bc5c875","23c6f469513289a8","68a78ab1a08de10a","eacdcfdaf260a1d4","78ee4aa4f4d7e037","2e73d3ccee8d972c","b14f328059e1b461","544bb1edf8a33d38","d9a6de7cc5096fe3","60c96808fad35229"],"x":54,"y":1299,"w":1162,"h":302},{"id":"b4dea0a7c8b7a32a","type":"group","z":"948139bb1964bc5a","name":"","style":{"label":true},"nodes":["539dc1c9d7a3b1eb","0952a2ee0d589e03","a8e6cda928e350b6","7aea4a101153a0b6","e0b6b365e87fb6b5","8be476363dfd33d3","848ffb410d7e4f62","11f8bc649bee4ded","f69152fd9615e388","2f5cd294e37eebe8","321a3a8d99208af6","218b9a93a0633e77","f69b363c31856755","039cd734cfed78ae","d43e4579dab3f7df","092fdb9b732b56fa","5e2402b400e0069f","41991e49c80e4cb8","6970f13d29a9a428","91712286c8ce5074","9f66152217a79d06","c0c1598787a880a3","47da2af96032c2c3"],"x":44,"y":1659,"w":1342,"h":502},{"id":"a2caccdf611fb758","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c779d0a765e3d78d","3a4231a2e53f04e3","16cc91349e008901","b6a048bf5769c8cf","2b7b1e49e0f35dad","8519b53052fc2bae","aaf36abb2aa6af60","56e812d6e0542d72","062c51f7d411b10d","d5ef7b3634b07679","c80904eb22878e87"],"x":44,"y":2219,"w":1152,"h":282},{"id":"2a7a5bd2ac8e1c46","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["fd147829f79e871a","cbabbdf4c0ece489","8ccc6e2bce0ab81f","1f6a899ad824a749","b9a65f55c429fd35","bf8f7ff097449bb7"],"x":44,"y":4339,"w":672,"h":202},{"id":"7fbcda953d53c56b","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["7118a48e68688bb8","b365d449119baa70","932e85ab244d80e2","df33dbf3fdbae692","6a042d145daea3b0","36bdebec6ee91fe3","e975ca0adb158f5f","da23c347ee0484dc","f5810ad2a121d7f5","ee5f7ac9c43720cd","e641a7b231760ed2","e288d2c91c14a96e","189c2f3c3581250e","2882055dd098430e","4cfb653c1f115c2c","0854fbd251b10ead","b8f60790ac1aa5c6","fe61967bf161f58f","1d4347f55d10d1e9"],"x":44,"y":3219,"w":762,"h":482},{"id":"ac8b5c16b46e9c89","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["a2729e8ee4af65f5","634407b9c4245106","e9187377527269cb","ef5c926b3d1b7d84","34c20fee04f5acb2"],"x":44,"y":39,"w":812,"h":142},{"id":"58946bdd678fbfa5","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["09e750898cfc8b60","c4be9eb3db479d51"],"x":48,"y":1273,"w":1294,"h":694},{"id":"8806b584b745745a","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["995c225c75538054","077858d3b827010a","cc50702b59c1daa6","dc79f3514cd3514d","1837f7aa88a7ae60","f05247446c43b482","7efdbde4e0e67848","db49b0e0b2f5d0d1","32c4913d7fc6fba1","c2e63742111982cf","152e52d325d787ec","589975afdfe85545","58e505b4d56eacb6","fd171e63764a0568","1e65968ea8fa33d0","c106cd286f469772","ec14e2a512d9f8fb","e437eec0c6a8dbfb","9692858aacf65b02","921793dff525f13e","7704307bbbc8f624","93878d7559f29d13","502f19e707dec424","40fd3d529ea93161","5b6ff1592c851d62","c61461434b9ecc33","b6ebc91fded5d3c4","904c0fabb5d54456","8892fc81830677ec","3666cb2f46f03878","365e7f9a79775c09","9c3302d238182693","a1397f38ed4c472b","5ed6f9b1f1dce105","44fa6547b4a4d62e","01b3ce52c11743b8","cdbb4f362eb7cc92","c2d9c5d0f0f75c79","4480c4f99747985b","b86ff6d6e91af2ab","1a9cddeb6a4cb22a","4b61ae11cd77b022"],"x":34,"y":1139},{"id":"8953653722b0a6b2","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["f097b40a4e67e02c","d26830d4bca97ec7","17cadfe8639999ee","b5da29cab8251554","a1c3525f3b4e549e","2ab6688cb35abf93","70761485952b920a","60967315f0040565","191db3f4aacd4f54","e652e8beb2243482","cead0db4e8f2ec05","dc37777860f959f2","08bb4171711a307b","96c11c227394e543","141b31b82b2c02eb","b593eb4f6467ec00","2df86f05ed60e37c","1e60e4a06754a0f3","10771234a898d714"],"x":34,"y":1959},{"id":"6f4459aaf422d31f","type":"group","z":"ccf4e5eced60ee19","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["891e0a6331a6d3ee","49caf1957641923a","c84665cc506cc72a","b551f8302ee60639","9983291167b2f4d5","f38856448387560f","2bd12a1dd8e20657","9695c9861fe197a3","e97f90c8b6b8e055","57e784ddeb4dd9f7","2e59f659b453aacb"],"x":44,"y":39},{"id":"52a2267cd3f77359","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["26970241b0954a94","9b8508b0edc4f55a","aac23615626ff38d","293b8bc84ea48dde","9b86dfa08000eb2a","f54387e9d247f166","597a3aad35484c6c","57289ff556ab4d68","5945a93a4f6dc91f","eff2e094f280faaf","95e7ca287bea9c43","63806c6f9077d801","bd2051d8c9de0fd1","489c309a15b0265e","10b865af0575117b","dd59fb911819f06c","96d6e8cf058a4215","31b5663484594e93","64ed2d9b35d3efa8","4be2637d2f7d2980","609661093ded7d8c","774cf9b85a6a6596","e059106103611411","be4193cc20563f8d","c8be4bb59ede9d76","3a9bbf474381fa2a","2cc30b6b91c9962e","f52c5f09fb56c2a8","c2469ee120f3a394","08b204d763442da7","cc37a7a5a5f7b233","264e0ca52658d2a0","a3a5de911d6c1179","81fbb3c97eef0c34","e6fdaa36135bbcb8","60bfe31fa4878b1c","56f76aa3cbd7aad4","a9e019030531d5c9","f36192f1becaa4d9","22645e14f2d66897","0f62c422191f3c5c","10188eaf769b5b4f","5e10ba1311d74136","19d96c2d1026274d","17eb765ff8bdb406"],"x":54,"y":659,"w":3002,"h":562},{"id":"6975c5caf14452ee","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["52c4fe0b5115c16c","9e2f75a618a6a942","2392688cd197fe47","57532c19c86edcd0","9a1676d5a5e05b62","316550b9d5d18322","0d433e62683f6be8"],"x":894,"y":579},{"id":"95861d07508e4eae","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["74b29f96c7e425fd","12e9db49183b91c5","0c447601fc98671f","61e43be939e68646","e5d6355881da6768","b5e22ee55dc4ee36","30502b06a6b5bce3","beb7fda05b2fe6c0","4c863915faad5849","58eceb9583059fa2","4f63feefda948114","f352e085644e9fa0","efff7c9a1c7ed6df","53d2b8d94cd11258","1a939f67df90dc25","82b59c2457fddf8e","0522f6c225c5d710"],"x":34,"y":579},{"id":"d21e3e6ec895624b","type":"group","z":"81dea24119402f3d","name":"","style":{"label":true},"nodes":["78328d42.dfbd24","a7bca137.c0d2f","bfbe267f.ea05f8","ecf00c0c.9acbc","ef0a208b.3ff8e8","f5e1d08b.a8cd58","f1c1abfe3bf53636","645224af50a0017e","e8b57cc49ea15a40","43b21201b05c8013","3cb5b773cf80c3ef","4c3673c951e9d7b9","c3c756d436a23c64","a84c4f21f6acb97b"],"x":34,"y":39},{"id":"f7710150c9cb5972","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["56dad286db1798fa","d2e6f2e78852e617","d6a094825203c86a","ba8940a0792e3a57","b4fbb079f9a362f6","e518af598013fcd0","ae5d6e1357ad837a","05cdb9d2fe8a346a","715cc250ba4cf7f2"],"x":34,"y":2919},{"id":"0c0ec2abd618f08d","type":"group","z":"81dea24119402f3d","name":"","style":{"label":true},"nodes":["c247964ad7fb4f8c","d811adba213b410a","7bdafb2eea6d5548","fd0bc41a81984c86","73ba46b0d1be393e","abfd6b550cfac2fd","26f210ef9a679afe","020ab7c17e48c69c","2e0647abeb8a52fa","43527217706f4a65"],"x":34,"y":2579},{"id":"bd3118f367301ff5","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["47c6beecaf9e5285","8fef094520f97e33","8d6e0c3515de5e46","ba4b0a900eaa620b","a8a272fb5fe1e626","78ffdee5ce1f83f0","38b8672ee442e9f0","31474addb70e9b66","a7094f5080084d0d","21843f05c8a1678d","7671e90adb265d95","aa22207828b574e1","aa359bf704718694","889ec330f44a214b","baf09091da5eeec6","64e10880e9c0a9cf","13647171e3c55ca1"],"x":34,"y":1659},{"id":"3c7ebf27175ff688","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["37689cad1adec245","a0149f40178356cc","5302aabeacf1e6cc","34a2227aa3a9a106","f15ed318dd3b0e7b","45c2d0281967263f","6250d260a22af26f","cc777e3bea3f9c4f","23f17b2780b546e8","f6fcadfd27220882","9be5f08ea4571bfb","638c99a18a49619e","8b02b706ece88876","44483b79178d06d2","6bb1544ce0fd6be9","8b446a9f2038fedd","6adade4fddc5cec7","9e9a255c3ddd706d","0d39f2930bf14a65","89705a4bcdf30fc9","748df687d70372bf","aabafc943660d22b","5cfc49ac3e1df9ac","5e0194b18cf20aeb","7b23fdda4f22758c","573ce81078d2f925","0c336a501206023e"],"x":34,"y":2039},{"id":"40db6052de5b63de","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["dc5c6a3cf1f36edd","c5ecd5198894a738","9c5653e8a90c95e0","420cb61e6f9134cb","1d49619462c6119c","acc1c2bbdc58ad22","13086e9fad6d2edd"],"x":44,"y":2799,"w":812,"h":262},{"id":"c27b37bacfd81b8e","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["2248c3bddab232ab","daef73369d61fe35","9802069d87a1a750","cfa47ef66a12662e","46ebda7d20107695","573fc76fae6efd28","8b270b95bae615f1","8ed4e2c0fee923d2"],"x":54,"y":2459,"w":652,"h":282},{"id":"8c050726f929271a","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ced1b96b66e43fa2","4e41751b09df2bb9","e241cbba47358a7d","4ce80fbce3d69252","8c87bef3cf981275","4ff0b97165dcbf2f","e6819eb8ca67a1cb","da7ce0e1273c7ce9","6e719492b5557f6b","6c4c4b79342bda26"],"x":814,"y":2019,"w":692,"h":382},{"id":"0d3a64265ec09852","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["e4754a95609a8baa","4c5fa8f19276f614","a4c20c7ee5f47897","7b53b32ba035cdb3","6e24d360031a0fbd","58d39ac25a967346","9842fe79057cd998","4d2787f7908ec7ea","f55e48e54989ccde","d74b32891d8e4b8f"],"x":54,"y":2019,"w":692,"h":362},{"id":"9369390f85b0a7e0","type":"group","z":"75bda675505dd534","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3379d2c5f0df6d46","0c92d10980bbc11f","1e24c652e374616d","d84a8005c6bbeba7","bf529671432541e5","b79c3c4e0778ef6a","a9f0acf44e7a59c9","fbf1e3790cbc57e3","59216e6630c62881","da9e359576f76a32","5f8cd28d7154bad9"],"x":34,"y":299},{"id":"1bb40b79d6de32c3","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["194478bee1f33b1f","5bd95af51098d271","f759d497c3d3f683","731b39a84738bfb8","f32f66f033b09c0b","ece7245699721110","f305cd7d4e967216","8570bfe314b5b863"],"x":774,"y":2459,"w":652,"h":282},{"id":"9639a007cedd7578","type":"group","z":"81dea24119402f3d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["88a670ea5db9e7d1","05da33c6bf4a222b","fb7e14069f40d90c","fc794c8d224fbe76"],"x":34,"y":3239},{"id":"931f2c0cfb587811","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3d319eb43635c372","17e807837ca65f6b","cf5b15aa2245e096","be821d5e67a0b37f","b55c8a0e5f57f4ef","1ad0cb43ae43dcd1","8d7cfbe35a3a9c53","05789be1405a5c04","3a39b2906daaa5ac","6b7cad3791a7eea6","9fee0bcdb128d21a","9020e9f04c93c71a","641f8f0a5a75ba1a","cb989ea02acf6d43","63c97c71a58d216d","fa83cd6d6ee71bb8"],"x":44,"y":3759,"w":822,"h":522},{"id":"abb95db352dd9844","type":"group","z":"a95ec654e9a3d387","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ca7f0ec6ab089e7b","6f2dc7d6a66e6ed9","a8d7d9ab126bcd9b","b126de85b3fe471d","7bcdc8555abb2614","ba6895f23ee9fad7","9750e4da9bc743a7"],"x":34,"y":2019},{"id":"778ef0caf6d2c32c","type":"group","z":"a95ec654e9a3d387","name":"","style":{"label":true},"nodes":["ed114745415daaa7","789ae31bb535788e","84f415b0ca92552c","b634a2cc34e15b02","f5126bc7b7a5f46b","ebe466b648484bdd","ae6beda26d49fe49","4c39affa2da2b391","cd1fe112915221f9","eaabce55fd80cfa9","24fd24ba11cde870","35ea4f7396bfdab0","ac1c75ccd657b1af","58f40ea7af36a3b3","a42b8c5530dcc689","0148461838254a59","9b4241664e283d94","0acc558d10291b4d"],"x":34,"y":1519},{"id":"3d111a6d8f2d610a","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6eb77fd71dfe2179","72b503af050e7fca","c828474c0be22a0f","46f09da25dc03c4d","526993b05ed91f8c","79bad15a5fb4e8c1","0744498b2a8e7773","525d3e1b31ca412f","f70a8b1ab9bb5f8e","2f693999591a775b","a9594f83577395e9","d8933fb60a1a0f3f","4368ab46ba3c2d0c","f7f58db737fe72bf","37f2998cd87abf22","a344f227196256df","e06b88c92ea9114d","1eeaba8e960e2c44","96997e620aa7c16f","25dd1cf0c9178ade","25b653da6bfe7a2b","5562ddc95a1aff52","6e961fd77f3a44d9","02ffc8ed438c4923","ce2b8828f892a189"],"x":54,"y":2559,"w":1292,"h":602},{"id":"f98f8b4014a46540","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9ee36580978f187d","b7d10364882a6285","9e53db863b3a965a","2901e2f3173064bb","917efd60dcc16fba","d201aa1c6a17b061","b0dc70e931aeb02d","8a119b5df32ec2d0","9d900fdc36792c95","e088c31b4f46938a","6be11bf05a85aade","a6cda53330188176","63eb07cdc05eb87a","93e43b93ef9fd350","ae05897d7eda3d39","78b6625978e27750","960d9233a968f1c7","172ad7433fb4e831","8b6c2870f4c235d3","3d3cf0a53eefd516","fec717108f38f2a7"],"x":1574,"y":2019,"w":692,"h":882},{"id":"d64103cd82ca6e3b","type":"group","z":"ccf4e5eced60ee19","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b1def57ef9befa9e","4d0ce4d155134e89","c4e0cf2f167398e7","8483a15dfc485e24","17bb2dafa4a86e73","1cf517e7cdad2510","51196973216ea1ee","e558ce69bedd92a9","222ad4871b1d07e8","82518eec87e715f3","276a08303af61fee"],"x":44,"y":1199},{"id":"f7b26ea9f0e17e65","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b5bf4f1d2a2db4f8","5cf6c389a5ca2ed2","2906bc08a146bc76","79cffc2277e844a8","acaaaba2e5cf897f","ecf0da358e993948","28e2c4de343b6cb6","7696b565e6d8ec17","479cf12bac6b99d9","57629077d801ac2d","22365c5a0e151574","4ca4858c792efbe3","b647e1cc9ad5186e","8652ebf46b0dc0d7","d6e63a4502b6ee81"],"x":44,"y":299,"w":1422,"h":422},{"id":"055cf721a024eda7","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["77fd5a5925a8fe38","4e7668e4541ffd96","df37b6773619aeeb","cac8d0cdb7e26ace","a29de08d17bb4544","defc24f01f2aa66c","9a85a7549f42bf5d","c51febc42ace8684","e47f81c98ed71e65","13a0c7bc92a753f3","70744c3eca5c9153","b50bbf99ede0e422","304e47a61e0d594d","b4ced1bfdff8c6ac","48bdac3621efee11","a52eb4ddaac5b28a"],"x":1524,"y":299,"w":1422,"h":422},{"id":"26d6ae42cf54cc15","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["f5ce6c4b657db2c6","9e51f06487268cf4","39645fbb0beffd8a","1ca8e51d5f5d6744","31e8c7beffe0e706","a131e5da16adaee0","0bbad6ac2d3ab204","457cec0835b07196","44d1cf60f64d4d25","39ae507e8ab1c037","3babac707586d369","da254d24606c0471","837eb941c19cabed","2b82ed4f3991bd97","041e0e608f525032"],"x":44,"y":779,"w":1422,"h":422},{"id":"c2559b5357486764","type":"group","z":"4e1d02e135536c14","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["72b133dce044ac3e","bf9d38f82fb378c0","44b070089176d435","156d74c3f0388325","355f63f2e10f1d96","c4783caa54bb5088","4d9216dd9ff40777","36d841614c763817","af8b37fdc6c7b173","3d17dbe7c27762fd","c73eb5201af299f3","8183acb716f3cde2","da54efefea53b2c3","4e90582666396a4e","758aef5cc49e9313"],"x":1524,"y":779,"w":1422,"h":422},{"id":"2ee7394580f79cc3","type":"group","z":"462cafc155901a6e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c3f90b66e3a8c016","fb32772955875f5c","f55cc72d92f1f70a","e9039f41e19fcf5b","af8742a324d4a9ca","313b15db17f51c49","edbe95c8e04ae40f","436bd0cbac023aa2","2654a666178d678c","f58380ee182c86ec","f225b54cfb2e3021","14fca1ac313b8d29","99cd8013b1699953","5a3bb6abe9e57e74","db8aa1fd36d66fe3","f6bd8bd0778af331","615b75ca30943019","07fa100d50c32077","97b2bf5d774045ea","933bf22407bc93f2","ea822f9fb3960583","ce57080c49c2c3d2","a6ddde1b055a94b0","cf277ce484a8b7f1","41e49b4cd1ba8256","3d7a14d68c705c72","f9c6dafb0bb6a57e"],"x":54,"y":39},{"id":"a1741ef23732bce4","type":"group","z":"948139bb1964bc5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5a9b8a593022a4cc","fa4a123c463666e9","491012938a8df3df","10ff9389d2759db9","a36ce9d743a7b4e4","b106ddb20cb58a94","b7edd6e7118a40eb","7dc9dae958fa0afb","8ced5b9f06ad2806","80fe987c31d55e24","133a35a444987b17","49dc585b87420a49","7d8abea773b5358f","be92547e75f10fb4","dcd205bb71e96443"],"x":1434,"y":39,"w":1122,"h":382},{"id":"09e750898cfc8b60","type":"group","z":"4e1d02e135536c14","g":"58946bdd678fbfa5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["23bf231d5f92d898","8a0b2594a3296c88","8a1a871a9a68c76c","dddf15f421481e85","9a29585104596ba7","05df8139c9f6130f","914500a98f1597b0","5c045c6f71cafd52","17b416995544c0ca"],"x":74,"y":1299,"w":1232,"h":142},{"id":"c4be9eb3db479d51","type":"group","z":"4e1d02e135536c14","g":"58946bdd678fbfa5","name":"","style":{"label":true},"nodes":["a62008d8914b95a2","1d6d45ce35d1f8fb","fa75df9d99a78852","8363ca529c5b4620","a425ce3a062da4e5","fd82a36789e9f0fd","f9e0b7ba2c681f39","3a01748301fe8498","c722151add88f640","b9fb615b89979085","e4967201c6355ab0","85de72e04aaa2de6","d892463cc91098f1","915f38fb1e724141","d86681ccbd79c9f3","4c26de52a53acb79","064a1785b9c6a8a0","d0dc2e32d91cc767","30a58835931e351d","e6130a39a2ab366a","e3f52efe96ae8364","b9d4c31f4c3cc017","42fa0ba60aff98c6","06d2f5e90b465001","86fa6b8d15a3bd95","5752a3489da78395","1a2972494879f106","eb8e6829bd532d6b","b2d6fd7d25cc6c7f","6d9005bfb46a1024"],"x":74,"y":1479,"w":1242,"h":462},{"id":"1040bb61.673d75","type":"server","name":"Home Assistant","version":4,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"","connectionDelay":false,"cacheJson":true,"heartbeat":false,"heartbeatInterval":"","areaSelector":"friendlyName","deviceSelector":"friendlyName","entitySelector":"friendlyName","statusSeparator":"at: ","statusYear":"hidden","statusMonth":"short","statusDay":"numeric","statusHourCycle":"h23","statusTimeFormat":"h:m"},{"id":"5b243deefd9de0d1","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"31826811.22a458","type":"position-config","name":"Home Location","isValide":"true","longitude":"0","latitude":"0","angleType":"deg","timeZoneOffset":"99","timeZoneDST":"0","stateTimeFormat":"3","stateDateFormat":"12","contextStore":""},{"id":"26f98e1b.bd1812","type":"position-config","name":"","isValide":"true","longitude":"0","latitude":"0","angleType":"deg","timeZoneOffset":"99","timeZoneDST":"0","stateTimeFormat":"3","stateDateFormat":"12","contextStore":""},{"id":"82cdeceea55f3c77","type":"zigbee2mqtt-server","name":"MQTT Server","host":"192.168.30.111","mqtt_port":"1883","mqtt_username":"mqtt-user","mqtt_password":"R+Ykai39fTEn=d2B","mqtt_qos":"0","tls":"","usetls":false,"base_topic":"zigbee2mqtt"},{"id":"7d5ff4fa087a1ae1","type":"switch","z":"9d5b166df6c5a423","name":"curve switch","property":"payload.times_of_day.active.name","propertyType":"msg","rules":[{"t":"eq","v":"night","vt":"str"},{"t":"eq","v":"morning","vt":"str"},{"t":"eq","v":"day","vt":"str"},{"t":"eq","v":"evening","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":510,"y":240,"wires":[["ceb610e6512e7c5a","ae47d0e553e6bbdc"],["c071a45eafc49203","1eb871a2fca59c93"],["a7f90772d90e5f53","69046c3fc86d6aa0"],["4bc2ddeb21bf7968","f7eace105dc8187f"]]},{"id":"ceb610e6512e7c5a","type":"spline-curve","z":"9d5b166df6c5a423","name":"night curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.3},{"x":0.333,"y":0.037},{"x":0.477,"y":0},{"x":0.783,"y":0},{"x":1,"y":0}],"x":750,"y":80,"wires":[["b164590f43513f75"]]},{"id":"c071a45eafc49203","type":"spline-curve","z":"9d5b166df6c5a423","name":"morning curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.01},{"x":0.132,"y":0.01},{"x":0.269,"y":0.027},{"x":0.449,"y":0.124},{"x":0.676,"y":0.334},{"x":1,"y":0.75}],"x":760,"y":120,"wires":[["b164590f43513f75"]]},{"id":"4bc2ddeb21bf7968","type":"spline-curve","z":"9d5b166df6c5a423","name":"evening curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.036,"y":0.78},{"x":0.176,"y":0.63},{"x":1,"y":0.3}],"x":760,"y":200,"wires":[["b164590f43513f75"]]},{"id":"a7f90772d90e5f53","type":"spline-curve","z":"9d5b166df6c5a423","name":"daylight curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.744},{"x":0.03,"y":0.838},{"x":0.097,"y":0.941},{"x":0.183,"y":1},{"x":0.86,"y":0.995},{"x":0.943,"y":0.931},{"x":1,"y":0.85}],"x":760,"y":160,"wires":[["b164590f43513f75"]]},{"id":"ae47d0e553e6bbdc","type":"spline-curve","z":"9d5b166df6c5a423","name":"night curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.5},{"x":0.067,"y":0.368},{"x":0.133,"y":0.265},{"x":0.27,"y":0.171},{"x":0.333,"y":0.16},{"x":0.506,"y":0.124},{"x":0.606,"y":0}],"x":750,"y":280,"wires":[["103949ee1d3705df"]]},{"id":"1eb871a2fca59c93","type":"spline-curve","z":"9d5b166df6c5a423","name":"morning curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0},{"x":0.42,"y":0.018},{"x":0.54,"y":0.051},{"x":0.587,"y":0.101},{"x":0.817,"y":0.675},{"x":1,"y":0.85}],"x":760,"y":320,"wires":[["103949ee1d3705df"]]},{"id":"f7eace105dc8187f","type":"spline-curve","z":"9d5b166df6c5a423","name":"evening curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.787,"y":0.598},{"x":1,"y":0.5}],"x":760,"y":400,"wires":[["103949ee1d3705df"]]},{"id":"69046c3fc86d6aa0","type":"spline-curve","z":"9d5b166df6c5a423","name":"daylight curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.123,"y":0.927},{"x":0.5,"y":1},{"x":0.92,"y":0.904},{"x":1,"y":0.85}],"x":760,"y":360,"wires":[["103949ee1d3705df"]]},{"id":"1c9430e6a50c3787","type":"function","z":"9d5b166df6c5a423","name":"Times of Day","func":"var newmsg = JSON.parse( JSON.stringify( msg ) );\nnewmsg.payload.times_of_day = {};\n\nprocessTimeOfDay = function( nme, obj, name_start, name_end )\n{ \n    var ret = {};\n    ret.name  = nme;\n    ret.start = obj.times[name_start].ts;\n    ret.end   = obj.times[name_end].ts;\n    ret.perc  = ( obj.ts - ret.start ) / ( ret.end - ret.start );\n\n    // To cover range starting before midnight and ending after it\n    if( ret.start > ret.end )\n    {\n        var a;\n\n        // Before midnight\n        if( ret.start < obj.ts )\n        { \n            a = new Date( ret.end );\n            a.setUTCDate( a.getUTCDate() + 1 );\n            ret.end = a.getTime();\n             \n             \n        } else if( ret.end > obj.ts )\n        { \n            a = new Date( ret.start );\n            a.setUTCDate( a.getUTCDate() - 1 );\n            ret.start = a.getTime();\n\n        } // endif\n    } // endif\n    \n    ret.perc  = ( obj.ts - ret.start ) / ( ret.end - ret.start );\n    \n    obj.times_of_day[nme] = ret;\n\n    if( ret.start <= obj.ts && obj.ts < ret.end )\n    { \n        obj.times_of_day.active = ret;\n\n    } // endif\n}\n\nprocessTimeOfDay( 'night', newmsg.payload, 'astronomicalDusk', 'astronomicalDawn' );\nprocessTimeOfDay( 'morning', newmsg.payload, 'astronomicalDawn', 'goldenHourDawnEnd' );\nprocessTimeOfDay( 'day', newmsg.payload, 'goldenHourDawnEnd', 'sunsetStart' );\nprocessTimeOfDay( 'evening', newmsg.payload, 'sunsetStart', 'astronomicalDusk' );\n\nreturn newmsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":240,"wires":[["7d5ff4fa087a1ae1"]]},{"id":"b164590f43513f75","type":"range","z":"9d5b166df6c5a423","minin":"0","maxin":"1","minout":"1","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":980,"y":140,"wires":[[]]},{"id":"103949ee1d3705df","type":"range","z":"9d5b166df6c5a423","minin":"0","maxin":"1","minout":"2700","maxout":"5500","action":"scale","round":true,"property":"payload","name":"","x":990,"y":340,"wires":[[]]},{"id":"dd36e44f52c004a6","type":"sun-position","z":"9d5b166df6c5a423","name":"","positionConfig":"31826811.22a458","rules":[],"onlyOnChange":"true","topic":"","outputs":1,"start":"","startType":"none","startOffset":0,"startOffsetType":"num","startOffsetMultiplier":60000,"end":"","endType":"none","endOffset":0,"endOffsetType":"num","endOffsetMultiplier":60000,"x":190,"y":160,"wires":[["1c9430e6a50c3787"]]},{"id":"dc97f68a.35ea2","type":"switch","z":"26c6c4d5.3a01e4","name":"curve switch","property":"payload.times_of_day.active.name","propertyType":"msg","rules":[{"t":"eq","v":"night","vt":"str"},{"t":"eq","v":"morning","vt":"str"},{"t":"eq","v":"day","vt":"str"},{"t":"eq","v":"evening","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":510,"y":240,"wires":[["ce91189c.8bc7d8","bd8db343.5462f8"],["ad9966f3.3fced","4db18fbe.9ffb6"],["c2d43d53.d7ddf8","838233f4.7ffed"],["eef1dc11.39342","2e9ef8a9.d7fd88"]]},{"id":"ce91189c.8bc7d8","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"night curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.3},{"x":0.333,"y":0.037},{"x":0.477,"y":0},{"x":0.783,"y":0},{"x":1,"y":0}],"x":750,"y":80,"wires":[["e64dbfa.021204"]]},{"id":"ad9966f3.3fced","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"morning curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.01},{"x":0.132,"y":0.01},{"x":0.269,"y":0.027},{"x":0.449,"y":0.124},{"x":0.676,"y":0.334},{"x":1,"y":0.75}],"x":760,"y":120,"wires":[["e64dbfa.021204"]]},{"id":"eef1dc11.39342","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"evening curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.036,"y":0.78},{"x":0.176,"y":0.63},{"x":1,"y":0.3}],"x":760,"y":200,"wires":[["e64dbfa.021204"]]},{"id":"c2d43d53.d7ddf8","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"daylight curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.744},{"x":0.03,"y":0.838},{"x":0.097,"y":0.941},{"x":0.183,"y":1},{"x":0.86,"y":0.995},{"x":0.943,"y":0.931},{"x":1,"y":0.85}],"x":760,"y":160,"wires":[["e64dbfa.021204"]]},{"id":"bd8db343.5462f8","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"night curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.5},{"x":0.067,"y":0.368},{"x":0.133,"y":0.265},{"x":0.27,"y":0.171},{"x":0.333,"y":0.16},{"x":0.506,"y":0.124},{"x":0.606,"y":0}],"x":750,"y":280,"wires":[["d9f0035a.28956"]]},{"id":"4db18fbe.9ffb6","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"morning curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0},{"x":0.42,"y":0.018},{"x":0.54,"y":0.051},{"x":0.587,"y":0.101},{"x":0.817,"y":0.675},{"x":1,"y":0.85}],"x":760,"y":320,"wires":[["d9f0035a.28956"]]},{"id":"2e9ef8a9.d7fd88","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"evening curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.787,"y":0.598},{"x":1,"y":0.5}],"x":760,"y":400,"wires":[["d9f0035a.28956"]]},{"id":"838233f4.7ffed","type":"spline-curve","z":"26c6c4d5.3a01e4","name":"daylight curve","output_key":"","input_key":"payload.times_of_day.active.perc","points":[{"x":0,"y":0.85},{"x":0.123,"y":0.927},{"x":0.5,"y":1},{"x":0.92,"y":0.904},{"x":1,"y":0.85}],"x":760,"y":360,"wires":[["d9f0035a.28956"]]},{"id":"667d6dd.334db94","type":"function","z":"26c6c4d5.3a01e4","name":"Times of Day","func":"var newmsg = JSON.parse( JSON.stringify( msg ) );\nnewmsg.payload.times_of_day = {};\n\nprocessTimeOfDay = function( nme, obj, name_start, name_end )\n{ \n    var ret = {};\n    ret.name  = nme;\n    ret.start = obj.times[name_start].ts;\n    ret.end   = obj.times[name_end].ts;\n    ret.perc  = ( obj.ts - ret.start ) / ( ret.end - ret.start );\n\n    // To cover range starting before midnight and ending after it\n    if( ret.start > ret.end )\n    {\n        var a;\n\n        // Before midnight\n        if( ret.start < obj.ts )\n        { \n            a = new Date( ret.end );\n            a.setUTCDate( a.getUTCDate() + 1 );\n            ret.end = a.getTime();\n             \n             \n        } else if( ret.end > obj.ts )\n        { \n            a = new Date( ret.start );\n            a.setUTCDate( a.getUTCDate() - 1 );\n            ret.start = a.getTime();\n\n        } // endif\n    } // endif\n    \n    ret.perc  = ( obj.ts - ret.start ) / ( ret.end - ret.start );\n    \n    obj.times_of_day[nme] = ret;\n\n    if( ret.start <= obj.ts && obj.ts < ret.end )\n    { \n        obj.times_of_day.active = ret;\n\n    } // endif\n}\n\nprocessTimeOfDay( 'night', newmsg.payload, 'astronomicalDusk', 'astronomicalDawn' );\nprocessTimeOfDay( 'morning', newmsg.payload, 'astronomicalDawn', 'goldenHourDawnEnd' );\nprocessTimeOfDay( 'day', newmsg.payload, 'goldenHourDawnEnd', 'sunsetStart' );\nprocessTimeOfDay( 'evening', newmsg.payload, 'sunsetStart', 'astronomicalDusk' );\n\nreturn newmsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":240,"wires":[["dc97f68a.35ea2"]]},{"id":"e64dbfa.021204","type":"range","z":"26c6c4d5.3a01e4","minin":"0","maxin":"1","minout":"1","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":980,"y":140,"wires":[[]]},{"id":"d9f0035a.28956","type":"range","z":"26c6c4d5.3a01e4","minin":"0","maxin":"1","minout":"2000","maxout":"5500","action":"scale","round":true,"property":"payload","name":"","x":990,"y":340,"wires":[[]]},{"id":"7d4ca80d.e23468","type":"sun-position","z":"26c6c4d5.3a01e4","name":"","positionConfig":"26f98e1b.bd1812","rules":[],"onlyOnChange":"true","topic":"","outputs":1,"start":"","startType":"none","startOffset":0,"startOffsetType":"num","startOffsetMultiplier":60000,"end":"","endType":"none","endOffset":0,"endOffsetType":"num","endOffsetMultiplier":60000,"x":190,"y":160,"wires":[["667d6dd.334db94"]]},{"id":"b66b740408fe5733","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"{\"brightness\":204,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1530,"y":520,"wires":[["a3c88ca6db142ac5"]]},{"id":"d547650c5a2d1f2c","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Turn Lights ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1300,"y":640,"wires":[["f344be2df57e242f"]]},{"id":"952a5b6384f3a813","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If TV is on","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"playing","halt_if_type":"str","halt_if_compare":"is","entity_id":"media_player.sony_bravia_tv","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":940,"y":520,"wires":[["38ac479d21115bd1"],[]]},{"id":"77ce70f8ea73afa1","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Residents Home","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"home","halt_if_type":"str","halt_if_compare":"is","entity_id":"group.residents","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":520,"wires":[["952a5b6384f3a813","131cf7adb5bda567","1470f335e76b6c98"],[]]},{"id":"1470f335e76b6c98","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Backyard String Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1020,"y":640,"wires":[["d547650c5a2d1f2c"],[]]},{"id":"131cf7adb5bda567","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Ceiling Ledge Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1000,"y":580,"wires":[["f788e9f8fbef9822"],[]]},{"id":"38ac479d21115bd1","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Living Room Corner Lamp is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1200,"y":520,"wires":[["b66b740408fe5733"],[]]},{"id":"32cccaadc1c71ce0","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1030,"y":980,"wires":[["97cd162e32eb7c9f"]]},{"id":"8b63dfc4c9e23c15","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1000,"y":1040,"wires":[["9b69b8b35935fe53"]]},{"id":"83bdc9bdedd5c703","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1090,"y":1280,"wires":[["03addf22e40bc908"]]},{"id":"8beb947db40d7699","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If TV is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"media_player.sony_bravia_tv","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1160,"wires":[["e26838c3d428684d"],["be4261c9c45ad9e4"]]},{"id":"5b4b316c5ce5394b","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"At Bedtime","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"5004","endtime":"10005","starttime2":"0","endtime2":"0","startoff":"+240","endoff":"+240","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":150,"y":980,"wires":[["4be567938dadd156"],[],[]]},{"id":"9d3441863665ba13","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Foyer Exterior Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":980,"wires":[["32cccaadc1c71ce0"],[]]},{"id":"392103830291ac1f","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Backyard Exterior Lights are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":740,"y":1040,"wires":[["8b63dfc4c9e23c15"],[]]},{"id":"69a9377db1fbae6d","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Foyer Ceiling Ledge Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":750,"y":1280,"wires":[["83bdc9bdedd5c703"],[]]},{"id":"be4261c9c45ad9e4","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Living Room Corner Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":940,"y":1220,"wires":[["6dec74ac5574f034"],[]]},{"id":"a3c88ca6db142ac5","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1770,"y":520,"wires":[]},{"id":"4be567938dadd156","type":"switch","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":160,"y":1140,"wires":[["50daefad513e6590","8c4706b8fb84af54"],[]]},{"id":"f344be2df57e242f","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1490,"y":640,"wires":[]},{"id":"e35f0e75fe9a65d6","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1550,"y":580,"wires":[]},{"id":"66eb2a0e58d55b7e","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1890,"y":1160,"wires":[]},{"id":"9b69b8b35935fe53","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1170,"y":1040,"wires":[]},{"id":"31a1ccbe51156198","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1710,"y":1280,"wires":[]},{"id":"508530b4a6242cc6","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Guests Home","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.guests_home","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":580,"wires":[["131cf7adb5bda567","952a5b6384f3a813","1470f335e76b6c98"],[]]},{"id":"3ebc94adc32366e3","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Gouda Home","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.gouda_home","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":640,"wires":[["131cf7adb5bda567"],[]]},{"id":"9ad5147cd229ac8a","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.automation_daily_sunset"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":760,"y":460,"wires":[["67270dccd98acc56"]]},{"id":"7ef1a443942dbba3","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Evening Automation Flag OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.automation_daily_sunset"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":940,"y":1100,"wires":[["0386f69352102998"]]},{"id":"67270dccd98acc56","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":930,"y":460,"wires":[]},{"id":"0386f69352102998","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1190,"y":1100,"wires":[]},{"id":"b8f52e4f41cd2d0d","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"At Sunrise","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"5003","endtime":"10001","starttime2":0,"endtime2":0,"startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":150,"y":140,"wires":[["83b265c91908ebc9"],[],[]]},{"id":"83b265c91908ebc9","type":"switch","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":160,"y":200,"wires":[["72af4f94c5a53079","8df8865412c76469","37289fa14f97c1e8"],[]]},{"id":"72af4f94c5a53079","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"If Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":350,"y":260,"wires":[["ce7234c8b9b5fb38"],[]]},{"id":"ce7234c8b9b5fb38","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"Turn Backyard Lights OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":590,"y":260,"wires":[["37c06292e60fa0f2"]]},{"id":"37c06292e60fa0f2","type":"debug","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":260,"wires":[]},{"id":"3d6c570539c4e0a6","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"Turn Foyer Exterior Light OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":610,"y":140,"wires":[["352185a904ef52c8"]]},{"id":"8df8865412c76469","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"If Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":350,"y":140,"wires":[["3d6c570539c4e0a6"],[]]},{"id":"352185a904ef52c8","type":"debug","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":140,"wires":[]},{"id":"37289fa14f97c1e8","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"If Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.garage_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":350,"y":200,"wires":[["36bdeb7225d0ea6e"],[]]},{"id":"36bdeb7225d0ea6e","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"Turn Garage Exterior Lights OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.garage_exterior"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":620,"y":200,"wires":[["eb336140f99bd9fb"]]},{"id":"eb336140f99bd9fb","type":"debug","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":870,"y":200,"wires":[]},{"id":"ca3ea91ad8b05cff","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Garage Exterior Lights are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.garage_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":1720,"wires":[["8575c9d21522d666"],[]]},{"id":"5acf72e502eba1e0","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Waste Reminder Boolean is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sidebar_display_waste_reminder","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":660,"y":1660,"wires":[["2a6908734907a6da"],[]]},{"id":"8575c9d21522d666","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.garage_exterior"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":900,"y":1720,"wires":[["a22dcc5d492030a2"]]},{"id":"2a6908734907a6da","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.sidebar_display_waste_reminder"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1660,"wires":[["82164ad95d19fcbf"]]},{"id":"a22dcc5d492030a2","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":1720,"wires":[]},{"id":"79a8ec701046fd7e","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"At Midnight","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"0","endtime":"10001","starttime2":0,"endtime2":0,"startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":210,"y":1680,"wires":[["49aae6dea38bcdde"],[],[]]},{"id":"49aae6dea38bcdde","type":"switch","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":1660,"wires":[["5acf72e502eba1e0","ca3ea91ad8b05cff","418a74c911a1fc60","3c5aa315473a06a8","a199a4fcfbc3dc46","121b89de54450d79"],[]]},{"id":"6cf4987d08bd7f90","type":"inject","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Trigger: INACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"inactive","payloadType":"str","x":190,"y":1620,"wires":[["49aae6dea38bcdde"]]},{"id":"24d40ae116f2abbf","type":"inject","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Trigger: ACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"active","payloadType":"str","x":200,"y":1580,"wires":[["49aae6dea38bcdde"]]},{"id":"82164ad95d19fcbf","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1090,"y":1660,"wires":[]},{"id":"50daefad513e6590","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Evening Automation is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":980,"wires":[["9d3441863665ba13","392103830291ac1f","83f5bdc8b93aaa05"],[]]},{"id":"d9c0c2e3795b9980","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Away Mode Flag is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.home_away_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":470,"y":520,"wires":[["77ce70f8ea73afa1","508530b4a6242cc6","3ebc94adc32366e3"],[]]},{"id":"83f5bdc8b93aaa05","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Away Mode Flag is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.home_away_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1100,"wires":[["8beb947db40d7699","69a9377db1fbae6d","e444dbca5dc32c07","f69c80594b85c018","d36114d13d391bd3"],[]]},{"id":"e73ebd0bd5c0344b","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"At 10:15 pm","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"1335","endtime":"10005","starttime2":"0","endtime2":"0","startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":150,"y":1060,"wires":[["4be567938dadd156"],[],[]]},{"id":"7971e1dc35e7ff5c","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Evening Automation Flag is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":500,"y":460,"wires":[["9ad5147cd229ac8a"],[]]},{"id":"e444dbca5dc32c07","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Flag is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1100,"wires":[["7ef1a443942dbba3"],[]]},{"id":"a3b250eba3c64cb3","type":"comment","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"----- Run daily, at midnight -----","info":"","x":220,"y":1540,"wires":[]},{"id":"df4ac9e5af0e8f6f","type":"comment","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"----- Run daily, 4 hours after sunset OR at 10:30 pm -----","info":"","x":290,"y":920,"wires":[]},{"id":"ac8e0389514188ba","type":"comment","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"----- Run daily, before sunset -----","info":"","x":220,"y":400,"wires":[]},{"id":"6e0b3c1b03210e20","type":"comment","z":"0e8f6b67bf5f7644","g":"af922ec12cc24eb2","name":"----- Run daily, at sunrise. -----","info":"","x":210,"y":80,"wires":[]},{"id":"f69c80594b85c018","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Kitchen Above Cabinets are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.cabinet_upper_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":740,"y":1400,"wires":[["c0ab1218baa04e24"],[]]},{"id":"40f99c206974098d","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.cabinet_upper_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1200,"y":1400,"wires":[["2637ed3cce1da98c"]]},{"id":"2637ed3cce1da98c","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":1400,"wires":[]},{"id":"8c4706b8fb84af54","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Garage is CLOSED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"closed","halt_if_type":"str","halt_if_compare":"is","entity_id":"cover.garage_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":920,"wires":[["f1c037d1f1107475"],[]]},{"id":"2b18ddccaad76d53","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"switch","service":"turn_off","areaId":[],"deviceId":[],"entityId":["switch.garage_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1180,"y":920,"wires":[["10b7f7a6bfa8975f"]]},{"id":"10b7f7a6bfa8975f","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1350,"y":920,"wires":[]},{"id":"f1c037d1f1107475","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Garage Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.garage_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":960,"y":920,"wires":[["2b18ddccaad76d53"],[]]},{"id":"f788e9f8fbef9822","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{\"brightness\":102,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","output_location":"payload","output_location_type":"msg","x":1310,"y":580,"wires":[["e35f0e75fe9a65d6"]]},{"id":"cd9fa763f5527bf3","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"45 Minutes Before Sunset","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"5004","endtime":"10005","starttime2":0,"endtime2":0,"startoff":"-45","endoff":"-45","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":190,"y":460,"wires":[["fe4fe4a319aba2fa"],[],[]]},{"id":"fe4fe4a319aba2fa","type":"switch","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":240,"y":640,"wires":[["aadb7647ec3374ce","0fd57bfc1cb5087e","7971e1dc35e7ff5c","d9c0c2e3795b9980"],[]]},{"id":"aadb7647ec3374ce","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Foyer Exterior Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":480,"y":780,"wires":[["d6e0dbaa97906f3e"],[]]},{"id":"0fd57bfc1cb5087e","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"If Garage Exterior Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.garage_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":500,"y":720,"wires":[["3ebe07734d58afec"],[]]},{"id":"d6e0dbaa97906f3e","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"{\"brightness\":255,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":790,"y":780,"wires":[["06dad956c4af2594"]]},{"id":"3ebe07734d58afec","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.garage_exterior"],"data":"{\"brightness\":255,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":830,"y":720,"wires":[["2d4425f77f88c6b4"]]},{"id":"06dad956c4af2594","type":"delay","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1040,"y":780,"wires":[["be7533b9d4f98f55"]]},{"id":"2d4425f77f88c6b4","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":720,"wires":[]},{"id":"be7533b9d4f98f55","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"Turn Manual Override OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.manual_override_foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":780,"wires":[["045f483e1dbc5d9a"]]},{"id":"045f483e1dbc5d9a","type":"debug","z":"0e8f6b67bf5f7644","g":"97d95b79239fec91","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1510,"y":780,"wires":[]},{"id":"97cd162e32eb7c9f","type":"delay","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1290,"y":980,"wires":[["25fd21970749adac"]]},{"id":"25fd21970749adac","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1480,"y":980,"wires":[["10d3e644d2dc56a4"]]},{"id":"10d3e644d2dc56a4","type":"debug","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1650,"y":980,"wires":[]},{"id":"03addf22e40bc908","type":"delay","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1350,"y":1280,"wires":[["03db6f81cdb33042"]]},{"id":"03db6f81cdb33042","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1540,"y":1280,"wires":[["31a1ccbe51156198"]]},{"id":"418a74c911a1fc60","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Living Room Corner Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":660,"y":1780,"wires":[["72c95ca78e4a0239"],[]]},{"id":"a13ee021a5f36948","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1610,"y":1780,"wires":[]},{"id":"7f5f19a344d42bde","type":"delay","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1250,"y":1780,"wires":[["036cfc441ac07f94"]]},{"id":"036cfc441ac07f94","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.living_room"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1440,"y":1780,"wires":[["a13ee021a5f36948"]]},{"id":"2ab30f2f6e61cea0","type":"delay","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1530,"y":1220,"wires":[["e479926da7f7194b"]]},{"id":"e479926da7f7194b","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.living_room"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1720,"y":1220,"wires":[["66eb2a0e58d55b7e"]]},{"id":"e26838c3d428684d","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"If Living Room Corner Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":940,"y":1160,"wires":[["17f6f94f24cd0597"],[]]},{"id":"72c95ca78e4a0239","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":990,"y":1780,"wires":[["7f5f19a344d42bde"]]},{"id":"17f6f94f24cd0597","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"{\"brightness\":25,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1270,"y":1160,"wires":[["66eb2a0e58d55b7e"]]},{"id":"6dec74ac5574f034","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1270,"y":1220,"wires":[["2ab30f2f6e61cea0"]]},{"id":"c0ab1218baa04e24","type":"delay","z":"0e8f6b67bf5f7644","g":"bcf8b42cf961c13f","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1010,"y":1400,"wires":[["40f99c206974098d"]]},{"id":"3c5aa315473a06a8","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Backyard Exterior Lights are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":660,"y":1960,"wires":[["ab7a0c371f1814c1"],[]]},{"id":"ab7a0c371f1814c1","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1960,"wires":[["24faaef27d786fa1"]]},{"id":"24faaef27d786fa1","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1090,"y":1960,"wires":[]},{"id":"bd08b725b42218f5","type":"bigtimer","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"At 2:00 am","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"120","endtime":"10001","starttime2":0,"endtime2":0,"startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":210,"y":1760,"wires":[["49aae6dea38bcdde"],[],[]]},{"id":"a199a4fcfbc3dc46","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Foyer Ceiling Ledge Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1840,"wires":[["d1594f6182d56064"],[]]},{"id":"d1594f6182d56064","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1010,"y":1840,"wires":[["df3d8a5b6fd8c6a5"]]},{"id":"df3d8a5b6fd8c6a5","type":"delay","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1270,"y":1840,"wires":[["7802733fd58cefa8"]]},{"id":"7802733fd58cefa8","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1460,"y":1840,"wires":[["379ac16b20fdc0b7"]]},{"id":"379ac16b20fdc0b7","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":1840,"wires":[]},{"id":"d36114d13d391bd3","type":"api-current-state","z":"0e8f6b67bf5f7644","name":"If Foyer Under Table Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_under_table","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":750,"y":1340,"wires":[["77c2204bac81a9bb"],[]]},{"id":"77c2204bac81a9bb","type":"api-call-service","z":"0e8f6b67bf5f7644","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1090,"y":1340,"wires":[["26d228e3c73c8637"]]},{"id":"26d228e3c73c8637","type":"delay","z":"0e8f6b67bf5f7644","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1350,"y":1340,"wires":[["60bc7457e8f912f1"]]},{"id":"60bc7457e8f912f1","type":"api-call-service","z":"0e8f6b67bf5f7644","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1540,"y":1340,"wires":[["2a7085b38d543614"]]},{"id":"2a7085b38d543614","type":"debug","z":"0e8f6b67bf5f7644","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1710,"y":1340,"wires":[]},{"id":"121b89de54450d79","type":"api-current-state","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"If Foyer Under Table Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_under_table","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1900,"wires":[["f8623267292eed2e"],[]]},{"id":"f8623267292eed2e","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"{\"brightness\":0,\"transition\":900}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1010,"y":1900,"wires":[["10f44381e91bed82"]]},{"id":"10f44381e91bed82","type":"delay","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1270,"y":1900,"wires":[["11dfcbc9c3c6975c"]]},{"id":"11dfcbc9c3c6975c","type":"api-call-service","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1460,"y":1900,"wires":[["ad292ed8e2dfcda3"]]},{"id":"ad292ed8e2dfcda3","type":"debug","z":"0e8f6b67bf5f7644","g":"8e91da327c4f467a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":1900,"wires":[]},{"id":"995c225c75538054","type":"comment","z":"81dea24119402f3d","g":"8806b584b745745a","name":"----- Set Default Values When Lights are Turned On -----","info":"","x":270,"y":1180,"wires":[]},{"id":"78328d42.dfbd24","type":"comment","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"----- Circadian (Adaptive Lighting) Routines -----","info":"","x":240,"y":80,"wires":[]},{"id":"a7bca137.c0d2f","type":"comment","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"----- Update Home Assistant Entities -----","info":"","x":220,"y":120,"wires":[]},{"id":"4c3673c951e9d7b9","type":"ha-entity","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"SET SENSOR: Brightness in Percent","server":"1040bb61.673d75","version":2,"debugenabled":false,"outputs":1,"entityType":"sensor","config":[{"property":"name","value":"nr_circadian_brightness"},{"property":"device_class","value":""},{"property":"icon","value":"mdi:brightness-percent"},{"property":"unit_of_measurement","value":"%"},{"property":"state_class","value":""},{"property":"last_reset","value":""}],"state":"payload","stateType":"msg","attributes":[],"resend":true,"outputLocation":"","outputLocationType":"none","inputOverride":"allow","outputOnStateChange":false,"outputPayload":"","outputPayloadType":"str","x":1030,"y":360,"wires":[[]]},{"id":"c3c756d436a23c64","type":"ha-entity","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"SET SENSOR: Color Temp in Mireds","server":"1040bb61.673d75","version":2,"debugenabled":false,"outputs":1,"entityType":"sensor","config":[{"property":"name","value":"nr_circadian_mireds"},{"property":"device_class","value":""},{"property":"icon","value":"mdi:brightness-6"},{"property":"unit_of_measurement","value":""},{"property":"state_class","value":""},{"property":"last_reset","value":""}],"state":"payload","stateType":"msg","attributes":[],"resend":true,"outputLocation":"","outputLocationType":"none","inputOverride":"allow","outputOnStateChange":false,"outputPayload":"$entity().state ? \"on\": \"off\"","outputPayloadType":"jsonata","x":1030,"y":420,"wires":[[]]},{"id":"a84c4f21f6acb97b","type":"ha-entity","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"SET SENSOR: Color Temp in Kelvin","server":"1040bb61.673d75","version":2,"debugenabled":false,"outputs":1,"entityType":"sensor","config":[{"property":"name","value":"nr_circadian_kelvin"},{"property":"device_class","value":""},{"property":"icon","value":"mdi:brightness-6"},{"property":"unit_of_measurement","value":"K"},{"property":"state_class","value":""},{"property":"last_reset","value":""}],"state":"payload","stateType":"msg","attributes":[],"resend":true,"outputLocation":"payload","outputLocationType":"msg","inputOverride":"allow","outputOnStateChange":false,"outputPayload":"","outputPayloadType":"str","x":1030,"y":480,"wires":[[]]},{"id":"f1c1abfe3bf53636","type":"inject","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"Every 2 minutes","props":[{"p":"payload"}],"repeat":"120","crontab":"","once":true,"onceDelay":"10","topic":"","payloadType":"date","x":170,"y":360,"wires":[["645224af50a0017e"]]},{"id":"645224af50a0017e","type":"subflow:9d5b166df6c5a423","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"","env":[],"x":420,"y":360,"wires":[["e8b57cc49ea15a40"],["43b21201b05c8013","3cb5b773cf80c3ef"],[]]},{"id":"e8b57cc49ea15a40","type":"function","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"SET GLOBAL: Brightness","func":"var brightness = msg.payload\n\nglobal.set( 'nr_circadian_brightness', brightness );\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":360,"wires":[["4c3673c951e9d7b9"]]},{"id":"43b21201b05c8013","type":"function","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"CONVERT: Kelvin to Mireds","func":"var kelvin = msg.payload;\nvar mireds = Math.round( 1000000 / kelvin );\n\nmsg.payload = mireds;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":420,"wires":[["c3c756d436a23c64"]]},{"id":"3cb5b773cf80c3ef","type":"function","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"SET GLOBAL: Kelvin","func":"var kelvin = msg.payload;\n\nglobal.set( 'nr_circadian_kelvin', kelvin );\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":480,"wires":[["a84c4f21f6acb97b"]]},{"id":"bfbe267f.ea05f8","type":"inject","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"","props":[{"p":"payload"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":180,"wires":[["ecf00c0c.9acbc"]]},{"id":"ecf00c0c.9acbc","type":"subflow:26c6c4d5.3a01e4","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"","env":[],"x":370,"y":180,"wires":[["ef0a208b.3ff8e8"],["f5e1d08b.a8cd58"],[]],"outputLabels":["Bigthness [%]","Warmth [K]","Debug"],"icon":"node-red-node-suncalc/sun.png"},{"id":"ef0a208b.3ff8e8","type":"ha-entity","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"MODIFY SENSOR: Gain [%]","server":"1040bb61.673d75","version":2,"debugenabled":false,"outputs":1,"entityType":"sensor","config":[{"property":"name","value":"nr_circadian_gain"},{"property":"device_class","value":""},{"property":"icon","value":"mdi:brightness-percent"},{"property":"unit_of_measurement","value":"%"},{"property":"state_class","value":""},{"property":"last_reset","value":""}],"state":"payload","stateType":"msg","attributes":[],"resend":true,"outputLocation":"","outputLocationType":"none","inputOverride":"allow","outputOnStateChange":false,"outputPayload":"","outputPayloadType":"str","x":640,"y":180,"wires":[[]]},{"id":"f5e1d08b.a8cd58","type":"ha-entity","z":"81dea24119402f3d","g":"d21e3e6ec895624b","name":"MODIFY SENSOR: Warmth [K]","server":"1040bb61.673d75","version":2,"debugenabled":false,"outputs":1,"entityType":"sensor","config":[{"property":"name","value":"nr_circadian_warmth"},{"property":"device_class","value":""},{"property":"icon","value":"mdi:brightness-6"},{"property":"unit_of_measurement","value":"K"},{"property":"state_class","value":""},{"property":"last_reset","value":""}],"state":"payload","stateType":"msg","attributes":[],"resend":true,"outputLocation":"payload","outputLocationType":"msg","inputOverride":"allow","outputOnStateChange":false,"outputPayload":"","outputPayloadType":"str","x":650,"y":240,"wires":[[]]},{"id":"077858d3b827010a","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 1, Closet (Hers)","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.closet_hallway_light_j","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1050,"y":1360,"wires":[["44fa6547b4a4d62e"],[]]},{"id":"cc50702b59c1daa6","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 1, Closet (His)","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.closet_hallway_light_t","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1040,"y":1420,"wires":[["44fa6547b4a4d62e"],[]]},{"id":"dc79f3514cd3514d","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 4, Desk Lamp","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.bedroom_4_desk_lamp","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1040,"y":1480,"wires":[["01b3ce52c11743b8"],[]]},{"id":"1837f7aa88a7ae60","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 1, Bedside Lamps","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.bedroom_1_bedside_lamps","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1060,"y":1240,"wires":[["a1397f38ed4c472b"],[]]},{"id":"f05247446c43b482","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 1, Closet Hallway","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.closet_hallway_ceiling_light","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1050,"y":1300,"wires":[["5ed6f9b1f1dce105"],[]]},{"id":"7efdbde4e0e67848","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Bedroom 4, Lightstrip","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.bedroom_4_lightstrip","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1040,"y":1540,"wires":[["01b3ce52c11743b8"],[]]},{"id":"db49b0e0b2f5d0d1","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Kitchen, Cabinets, Upper Coffee Bar","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.kitchen_cabinet_upper_coffee_bar","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":200,"y":1360,"wires":[["cdbb4f362eb7cc92"],[]]},{"id":"32c4913d7fc6fba1","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Kitchern, Cabinets, Upper Range","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.kitchen_cabinet_upper_range","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":""}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":190,"y":1420,"wires":[["cdbb4f362eb7cc92"],[]]},{"id":"c2e63742111982cf","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Garage Light","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.garage_light","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":""}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1450,"y":1360,"wires":[["c2d9c5d0f0f75c79"],[]]},{"id":"2392688cd197fe47","type":"function","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"Setup Color Temperature, Circadian","func":"msg.payload = {\n    data : {\n        \"kelvin\" : context.global.get( 'nr_circadian_kelvin' )\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1160,"y":680,"wires":[["57532c19c86edcd0"]]},{"id":"9e2f75a618a6a942","type":"link in","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"Set Light Color Temp, Circadian","links":["c106cd286f469772","921793dff525f13e","a3047785d55e0610","d0a9a8dc3b812aa9","442689a8b125509d","5ed6f9b1f1dce105","01b3ce52c11743b8","4e5232568b353045","c2d9c5d0f0f75c79","a1397f38ed4c472b","4b61ae11cd77b022"],"x":935,"y":680,"wires":[["2392688cd197fe47"]]},{"id":"152e52d325d787ec","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Outside, Garage Lights","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.garage_exterior","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1480,"y":1240,"wires":[["589975afdfe85545"],[]]},{"id":"589975afdfe85545","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":1735,"y":1240,"wires":[]},{"id":"52c4fe0b5115c16c","type":"comment","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"----- Set Light Temperature. -----","info":"","x":1050,"y":620,"wires":[]},{"id":"57532c19c86edcd0","type":"api-call-service","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"Turn Light ON with custom SETTINGS","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{ topic }}"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1510,"y":680,"wires":[["9a1676d5a5e05b62"]]},{"id":"9a1676d5a5e05b62","type":"debug","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1610,"y":740,"wires":[]},{"id":"316550b9d5d18322","type":"function","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"Setup Color Temperature, Generic","func":"msg.payload = {\n    data : {\n        \"color_temp\" : 200\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1160,"y":740,"wires":[["57532c19c86edcd0"]]},{"id":"0d433e62683f6be8","type":"link in","z":"81dea24119402f3d","g":"6975c5caf14452ee","name":"Set Light Color Temp, Generic","links":["3666cb2f46f03878","365e7f9a79775c09","b86ff6d6e91af2ab"],"x":935,"y":740,"wires":[["316550b9d5d18322"]]},{"id":"74b29f96c7e425fd","type":"comment","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"----- Set Light Brightness. -----","info":"","x":190,"y":620,"wires":[]},{"id":"12e9db49183b91c5","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, Circadian","links":[],"x":75,"y":680,"wires":[["b5e22ee55dc4ee36"]]},{"id":"0c447601fc98671f","type":"api-call-service","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Turn Light ON with custom SETTINGS","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["{{ topic }}"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":610,"y":680,"wires":[["61e43be939e68646"]]},{"id":"61e43be939e68646","type":"debug","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":740,"wires":[]},{"id":"e5d6355881da6768","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 100%","links":["b75af08c7daf340c","aed0faedccf647ec","a3047785d55e0610","4ee87d5c7d0b6401","bba3b5e3841b2f43","c2d9c5d0f0f75c79","4b61ae11cd77b022"],"x":75,"y":740,"wires":[["30502b06a6b5bce3"]]},{"id":"b5e22ee55dc4ee36","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Circadian Brightness","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : context.global.get( 'nr_circadian_brightness' )\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":680,"wires":[["0c447601fc98671f"]]},{"id":"30502b06a6b5bce3","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 100%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 100\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":740,"wires":[["0c447601fc98671f"]]},{"id":"beb7fda05b2fe6c0","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 80%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 80\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":800,"wires":[["0c447601fc98671f"]]},{"id":"4c863915faad5849","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 60%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 60\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":860,"wires":[["0c447601fc98671f"]]},{"id":"58eceb9583059fa2","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 40%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 40\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":920,"wires":[["0c447601fc98671f"]]},{"id":"4f63feefda948114","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 20%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 20\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":980,"wires":[["0c447601fc98671f"]]},{"id":"f352e085644e9fa0","type":"function","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Setup Brightness, 10%","func":"msg.payload = {\n    data : {\n        \"brightness_pct\" : 10\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":1040,"wires":[["0c447601fc98671f"]]},{"id":"efff7c9a1c7ed6df","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 80%","links":["d0a9a8dc3b812aa9"],"x":75,"y":800,"wires":[["beb7fda05b2fe6c0"]]},{"id":"53d2b8d94cd11258","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 60%","links":["442689a8b125509d","5ed6f9b1f1dce105"],"x":75,"y":860,"wires":[["4c863915faad5849"]]},{"id":"1a939f67df90dc25","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 40%","links":["4e5232568b353045","b86ff6d6e91af2ab","01b3ce52c11743b8"],"x":75,"y":920,"wires":[["58eceb9583059fa2"]]},{"id":"82b59c2457fddf8e","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 20%","links":[],"x":75,"y":980,"wires":[["4f63feefda948114"]]},{"id":"0522f6c225c5d710","type":"link in","z":"81dea24119402f3d","g":"95861d07508e4eae","name":"Set Light Brightness, 10%","links":["e437eec0c6a8dbfb"],"x":75,"y":1040,"wires":[["f352e085644e9fa0"]]},{"id":"58e505b4d56eacb6","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Outside, Entryway Lights","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.foyer_exterior_entryway","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1490,"y":1300,"wires":[["fd171e63764a0568"],[]]},{"id":"fd171e63764a0568","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":1735,"y":1300,"wires":[]},{"id":"1e65968ea8fa33d0","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Kitchen, Ceiling Lights","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.kitchen_ceiling_lights","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":160,"y":1240,"wires":[["1a9cddeb6a4cb22a"],[]]},{"id":"c106cd286f469772","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["9e2f75a618a6a942"],"x":415,"y":1300,"wires":[]},{"id":"ec14e2a512d9f8fb","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Dining Room, Chandelier","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.dining_room_chandelier","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":170,"y":1480,"wires":[["e437eec0c6a8dbfb"],[]]},{"id":"e437eec0c6a8dbfb","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["0522f6c225c5d710"],"x":415,"y":1480,"wires":[]},{"id":"9692858aacf65b02","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Living Room, Corner Lamp","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.living_room_corner_lamp","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":170,"y":1540,"wires":[["921793dff525f13e"],[]]},{"id":"921793dff525f13e","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["9e2f75a618a6a942"],"x":415,"y":1540,"wires":[]},{"id":"7704307bbbc8f624","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Laundry Room, Ceiling Light","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.laundry_ceiling_light","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":620,"y":1420,"wires":[["93878d7559f29d13"],[]]},{"id":"93878d7559f29d13","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":855,"y":1420,"wires":[]},{"id":"502f19e707dec424","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Laundry Room, Hallway Light","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.laundry_hallway_light","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":620,"y":1480,"wires":[["40fd3d529ea93161"],[]]},{"id":"40fd3d529ea93161","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":855,"y":1480,"wires":[]},{"id":"5b6ff1592c851d62","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Foyer, Entryway Light","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.foyer_entryway_ceiling","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":600,"y":1240,"wires":[["c61461434b9ecc33"],[]]},{"id":"c61461434b9ecc33","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":855,"y":1240,"wires":[]},{"id":"b6ebc91fded5d3c4","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Foyer, Hallway Light","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.foyer_ceiling_ledge","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":590,"y":1300,"wires":[["904c0fabb5d54456"],[]]},{"id":"904c0fabb5d54456","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":855,"y":1300,"wires":[]},{"id":"8892fc81830677ec","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Foyer, Lightstrip Ceiling Ledge","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.foyer_ceiling_ledge","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1500,"y":1480,"wires":[["4480c4f99747985b"],[]]},{"id":"3666cb2f46f03878","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["0d433e62683f6be8"],"x":1735,"y":1480,"wires":[]},{"id":"365e7f9a79775c09","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["0d433e62683f6be8"],"x":855,"y":1360,"wires":[]},{"id":"9c3302d238182693","type":"trigger-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Foyer, Lightstrip Under Table","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.foyer_under_table","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":620,"y":1360,"wires":[["365e7f9a79775c09"],[]]},{"id":"a1397f38ed4c472b","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["9e2f75a618a6a942"],"x":1295,"y":1240,"wires":[]},{"id":"5ed6f9b1f1dce105","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["53d2b8d94cd11258","9e2f75a618a6a942"],"x":1295,"y":1300,"wires":[]},{"id":"44fa6547b4a4d62e","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":1295,"y":1360,"wires":[]},{"id":"01b3ce52c11743b8","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["1a939f67df90dc25","9e2f75a618a6a942"],"x":1295,"y":1480,"wires":[]},{"id":"cdbb4f362eb7cc92","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":[],"x":415,"y":1360,"wires":[]},{"id":"c2d9c5d0f0f75c79","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["9e2f75a618a6a942","e5d6355881da6768"],"x":1735,"y":1360,"wires":[]},{"id":"56dad286db1798fa","type":"api-current-state","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"Get Tablet Battery Level","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.fire_tablet_battery_level","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":190,"y":3080,"wires":[["d6a094825203c86a"]]},{"id":"d2e6f2e78852e617","type":"inject","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"Check Every 30 Minutes","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":190,"y":3020,"wires":[["56dad286db1798fa"]]},{"id":"d6a094825203c86a","type":"switch","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"20","vt":"num"},{"t":"gte","v":"80","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":3080,"wires":[["e518af598013fcd0"],["ba8940a0792e3a57"]]},{"id":"ba8940a0792e3a57","type":"api-current-state","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"If Plug is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.tablet_plug","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":610,"y":3140,"wires":[["b4fbb079f9a362f6"],[]]},{"id":"b4fbb079f9a362f6","type":"api-call-service","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"Turn Tablet Plug OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.tablet_plug"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":840,"y":3140,"wires":[["715cc250ba4cf7f2"]]},{"id":"e518af598013fcd0","type":"api-current-state","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"If Plug is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.tablet_plug","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":620,"y":3080,"wires":[["ae5d6e1357ad837a"],[]]},{"id":"ae5d6e1357ad837a","type":"api-call-service","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"Turn Tablet Plug ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.tablet_plug"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":860,"y":3080,"wires":[["715cc250ba4cf7f2"]]},{"id":"05cdb9d2fe8a346a","type":"comment","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"----- Automate Tablet Plug, in the Kitchen -----","info":"","x":230,"y":2960,"wires":[]},{"id":"715cc250ba4cf7f2","type":"debug","z":"81dea24119402f3d","g":"f7710150c9cb5972","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":3080,"wires":[]},{"id":"c247964ad7fb4f8c","type":"comment","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"----- Enable Override, on Exterior Entryway Light Toggle -----","info":"","x":280,"y":2620,"wires":[]},{"id":"d811adba213b410a","type":"server-state-changed","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"Foyer, Exterior Entryway","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"light.foyer_exterior_entryway","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":false,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":2760,"wires":[["73ba46b0d1be393e"]]},{"id":"7bdafb2eea6d5548","type":"api-call-service","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"Turn Manual Override ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.manual_override_foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":910,"y":2760,"wires":[["fd0bc41a81984c86"]]},{"id":"fd0bc41a81984c86","type":"debug","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2760,"wires":[]},{"id":"73ba46b0d1be393e","type":"switch","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":2760,"wires":[["2e0647abeb8a52fa"],["43527217706f4a65"]]},{"id":"abfd6b550cfac2fd","type":"api-call-service","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"Turn Manual Override OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.manual_override_foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":2820,"wires":[["fd0bc41a81984c86"]]},{"id":"26f210ef9a679afe","type":"inject","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"Trigger: Light ON","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":200,"y":2680,"wires":[["73ba46b0d1be393e"]]},{"id":"020ab7c17e48c69c","type":"inject","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"Trigger: Light OFF","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":190,"y":2720,"wires":[["73ba46b0d1be393e"]]},{"id":"2e0647abeb8a52fa","type":"api-current-state","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"If Evening Automation is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":620,"y":2760,"wires":[["7bdafb2eea6d5548"],[]]},{"id":"43527217706f4a65","type":"api-current-state","z":"81dea24119402f3d","g":"0c0ec2abd618f08d","name":"If Evening Automation is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":620,"y":2820,"wires":[["abfd6b550cfac2fd"],[]]},{"id":"47c6beecaf9e5285","type":"server-state-changed","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Foyer, Hallway","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"light.foyer_hallway_ceiling","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":false,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":1760,"wires":[["78ffdee5ce1f83f0"],["38b8672ee442e9f0"]]},{"id":"8fef094520f97e33","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_entryway_ceiling","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1760,"wires":[["8d6e0c3515de5e46"],[]]},{"id":"8d6e0c3515de5e46","type":"api-call-service","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Turn Entryway Light ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_entryway_ceiling"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":890,"y":1760,"wires":[["64e10880e9c0a9cf"]]},{"id":"ba4b0a900eaa620b","type":"comment","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"----- Sync Lights, In the Foyer -----","info":"","x":200,"y":1700,"wires":[]},{"id":"a8a272fb5fe1e626","type":"server-state-changed","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Foyer, Entryway","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"light.foyer_entryway_ceiling","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":false,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":1880,"wires":[["31474addb70e9b66"],["a7094f5080084d0d"]]},{"id":"78ffdee5ce1f83f0","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Sync Foyer Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_foyer_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1760,"wires":[["8fef094520f97e33"],[]]},{"id":"38b8672ee442e9f0","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Sync Foyer Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_foyer_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1820,"wires":[["21843f05c8a1678d"],[]]},{"id":"31474addb70e9b66","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Sync Foyer Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_foyer_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1880,"wires":[["aa22207828b574e1"],[]]},{"id":"a7094f5080084d0d","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Sync Foyer Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_foyer_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1940,"wires":[["aa359bf704718694"],[]]},{"id":"21843f05c8a1678d","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"If Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_entryway_ceiling","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":1820,"wires":[["7671e90adb265d95"],[]]},{"id":"7671e90adb265d95","type":"api-call-service","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Turn Entryway Light OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_entryway_ceiling"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":890,"y":1820,"wires":[["64e10880e9c0a9cf"]]},{"id":"aa22207828b574e1","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_hallway_ceiling","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1880,"wires":[["baf09091da5eeec6"],[]]},{"id":"aa359bf704718694","type":"api-current-state","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"If Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_hallway_ceiling","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":1940,"wires":[["889ec330f44a214b"],[]]},{"id":"889ec330f44a214b","type":"api-call-service","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Turn Hallway Light OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_hallway_ceiling"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":890,"y":1940,"wires":[["13647171e3c55ca1"]]},{"id":"baf09091da5eeec6","type":"api-call-service","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"Turn Hallway Light ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_hallway_ceiling"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":880,"y":1880,"wires":[["13647171e3c55ca1"]]},{"id":"64e10880e9c0a9cf","type":"debug","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1760,"wires":[]},{"id":"13647171e3c55ca1","type":"debug","z":"81dea24119402f3d","g":"bd3118f367301ff5","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1880,"wires":[]},{"id":"37689cad1adec245","type":"inject","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Trigger: Light ON","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":260,"y":2140,"wires":[["f6fcadfd27220882"]]},{"id":"a0149f40178356cc","type":"inject","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Trigger: Light OFF","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":250,"y":2180,"wires":[["f6fcadfd27220882"]]},{"id":"5302aabeacf1e6cc","type":"server-state-changed","z":"81dea24119402f3d","d":true,"g":"3c7ebf27175ff688","name":"Kitchen Cabinets Above, Coffee Bar","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"light.kitchen_cabinet_upper_coffee_bar","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":false,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":200,"y":2220,"wires":[["f6fcadfd27220882"]]},{"id":"34a2227aa3a9a106","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"If Cabinet Above Range Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_range","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":920,"y":2280,"wires":[["f15ed318dd3b0e7b"],[]]},{"id":"f15ed318dd3b0e7b","type":"api-call-service","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.kitchen_cabinet_upper_range"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1180,"y":2280,"wires":[["23f17b2780b546e8"]]},{"id":"45c2d0281967263f","type":"comment","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"----- Sync Lights, Kitchen Above Cabinets -----","info":"","x":240,"y":2080,"wires":[]},{"id":"6250d260a22af26f","type":"api-call-service","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"SYNC Cabinet Above Range Lights","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.kitchen_cabinet_upper_range"],"data":"{ {{msg.payload}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1400,"y":2220,"wires":[["23f17b2780b546e8"]]},{"id":"cc777e3bea3f9c4f","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Sync Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_cabinet_above_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":2220,"wires":[["638c99a18a49619e"],[]]},{"id":"23f17b2780b546e8","type":"debug","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1650,"y":2220,"wires":[]},{"id":"f6fcadfd27220882","type":"switch","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":2220,"wires":[["cc777e3bea3f9c4f"],["9be5f08ea4571bfb"]]},{"id":"9be5f08ea4571bfb","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Sync Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_cabinet_above_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":2280,"wires":[["34a2227aa3a9a106"],[]]},{"id":"638c99a18a49619e","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Get Current Attributes","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_coffee_bar","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":2140,"wires":[["8b02b706ece88876"]]},{"id":"8b02b706ece88876","type":"function","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Set Syncing Attributes","func":"msg.payload = {\n    \"data\": {\n        \"brightness\" : msg.data.attributes.brightness, \n        \"rgb_color\"  : msg.data.attributes.rgb_color, \n        \"effect\"     : msg.data.attributes.effect\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":2220,"wires":[["0c336a501206023e"]]},{"id":"88a670ea5db9e7d1","type":"api-call-service","z":"81dea24119402f3d","g":"9639a007cedd7578","name":"Set Max Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.dining_room_chandelier"],"data":"{\"brightness\":25}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":490,"y":3340,"wires":[["fb7e14069f40d90c"]]},{"id":"05da33c6bf4a222b","type":"comment","z":"81dea24119402f3d","g":"9639a007cedd7578","name":"----- Fade In, Dining Room Action -----","info":"","x":210,"y":3280,"wires":[]},{"id":"fb7e14069f40d90c","type":"debug","z":"81dea24119402f3d","g":"9639a007cedd7578","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":750,"y":3340,"wires":[]},{"id":"fc794c8d224fbe76","type":"trigger-state","z":"81dea24119402f3d","d":true,"g":"9639a007cedd7578","name":"Dining Room, Chandelier","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"light.dining_room_chandelier","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":170,"y":3340,"wires":[["88a670ea5db9e7d1"],[]]},{"id":"4480c4f99747985b","type":"api-current-state","z":"81dea24119402f3d","g":"8806b584b745745a","name":"If Evening Automation Flag is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1520,"y":1560,"wires":[["3666cb2f46f03878"],["b86ff6d6e91af2ab"]]},{"id":"b86ff6d6e91af2ab","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["0d433e62683f6be8","1a939f67df90dc25"],"x":1735,"y":1540,"wires":[]},{"id":"8b446a9f2038fedd","type":"server-state-changed","z":"81dea24119402f3d","d":true,"g":"3c7ebf27175ff688","name":"Kitchen Cabinets Above, Range","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"light.kitchen_cabinet_upper_range","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":false,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2420,"wires":[["6adade4fddc5cec7"]]},{"id":"6adade4fddc5cec7","type":"switch","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":2420,"wires":[["9e9a255c3ddd706d"],["0d39f2930bf14a65"]]},{"id":"44483b79178d06d2","type":"inject","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Trigger: Light ON","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":260,"y":2340,"wires":[["6adade4fddc5cec7"]]},{"id":"6bb1544ce0fd6be9","type":"inject","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Trigger: Light OFF","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"off","payloadType":"str","x":250,"y":2380,"wires":[["6adade4fddc5cec7"]]},{"id":"9e9a255c3ddd706d","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Sync Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_cabinet_above_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":2420,"wires":[["89705a4bcdf30fc9"],[]]},{"id":"0d39f2930bf14a65","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Sync Lights?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sync_cabinet_above_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":2480,"wires":[["aabafc943660d22b"],[]]},{"id":"89705a4bcdf30fc9","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Get Current Attributes","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_range","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":2340,"wires":[["748df687d70372bf"]]},{"id":"aabafc943660d22b","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"If Cabinet Above Coffee Bar Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_coffee_bar","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":940,"y":2480,"wires":[["5e0194b18cf20aeb"],[]]},{"id":"748df687d70372bf","type":"function","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Set Syncing Attributes","func":"msg.payload = {\n    \"data\": {\n        \"brightness\" : msg.data.attributes.brightness, \n        \"rgb_color\"  : msg.data.attributes.rgb_color, \n        \"effect\"     : msg.data.attributes.effect\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":2420,"wires":[["573ce81078d2f925"]]},{"id":"5e0194b18cf20aeb","type":"api-call-service","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.kitchen_cabinet_upper_range"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1220,"y":2480,"wires":[["7b23fdda4f22758c"]]},{"id":"5cfc49ac3e1df9ac","type":"api-call-service","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"SYNC Cabinet Above Coffee Bar Lights","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.kitchen_cabinet_upper_coffee_bar"],"data":"{ {{msg.payload}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1420,"y":2420,"wires":[["7b23fdda4f22758c"]]},{"id":"7b23fdda4f22758c","type":"debug","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1690,"y":2420,"wires":[]},{"id":"573ce81078d2f925","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_coffee_bar","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1120,"y":2420,"wires":[["5cfc49ac3e1df9ac"],[]]},{"id":"0c336a501206023e","type":"api-current-state","z":"81dea24119402f3d","g":"3c7ebf27175ff688","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.kitchen_cabinet_upper_range","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1120,"y":2220,"wires":[["6250d260a22af26f"],[]]},{"id":"1a9cddeb6a4cb22a","type":"time-range-switch","z":"81dea24119402f3d","g":"8806b584b745745a","name":"Only between 7:30am - 9pm","lat":"26.305080","lon":"-80.197180","startTime":"7:30","endTime":"21:00","startOffset":"","endOffset":"","x":180,"y":1300,"wires":[["4b61ae11cd77b022"],["c106cd286f469772"]]},{"id":"4b61ae11cd77b022","type":"link out","z":"81dea24119402f3d","g":"8806b584b745745a","name":"","mode":"link","links":["9e2f75a618a6a942","e5d6355881da6768"],"x":415,"y":1240,"wires":[]},{"id":"1c847a4542ba2517","type":"api-current-state","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"If Closet Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.closet_hallway_light_t","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":140,"wires":[["ef91789de0473a81"],[]]},{"id":"ef91789de0473a81","type":"api-call-service","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.closet_hallway_light_t"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":140,"wires":[["2d23a7750946bc2d","5e9ffa173eb691e7"]]},{"id":"e9f3e7483c18d115","type":"api-current-state","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"If Closet Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.closet_hallway_light_t","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":260,"wires":[["ddd8b329f4e3a961"],[]]},{"id":"ddd8b329f4e3a961","type":"api-call-service","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.closet_hallway_light_t"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":260,"wires":[["2d23a7750946bc2d"]]},{"id":"02c9c7877f7bd7c5","type":"api-current-state","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"If Closet Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.closet_hallway_light_j","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":460,"wires":[["3ef848920d23e01f"],[]]},{"id":"cfd5c0a89e5d590f","type":"api-current-state","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"If Closet Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.closet_hallway_light_j","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":580,"wires":[["4639f3deaa4ba71c"],[]]},{"id":"3ef848920d23e01f","type":"api-call-service","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.closet_hallway_light_j"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":460,"wires":[["ffccc618fbd95dcf","1466455846b44c47"]]},{"id":"4639f3deaa4ba71c","type":"api-call-service","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.closet_hallway_light_j"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":580,"wires":[["ffccc618fbd95dcf"]]},{"id":"ffccc618fbd95dcf","type":"debug","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":520,"wires":[]},{"id":"d721ce3bd6206ce3","type":"debug","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":780,"wires":[]},{"id":"d105d1df17b7b199","type":"api-current-state","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"If Office Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_4_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":390,"y":780,"wires":[["b4fb0ad9bfb713c4"],[]]},{"id":"b4fb0ad9bfb713c4","type":"api-call-service","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":620,"y":780,"wires":[["d721ce3bd6206ce3"]]},{"id":"b18a99e3215ce7a9","type":"api-current-state","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"If Office Lights are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_4_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":840,"wires":[["4db84ce07de49276"],[]]},{"id":"4db84ce07de49276","type":"api-call-service","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":620,"y":840,"wires":[["d721ce3bd6206ce3"]]},{"id":"fab252dc566fd69f","type":"api-current-state","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"If Backyard Exterior Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1100,"wires":[["96a6be7a7bdad98a"],[]]},{"id":"96a6be7a7bdad98a","type":"api-call-service","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":900,"y":1100,"wires":[["0c745f65dfe2301c"]]},{"id":"10fb8e3957dae1b8","type":"api-call-service","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1440,"y":1100,"wires":[["6ae3bfdbf1d8b22a"]]},{"id":"bfd7f3089fe57cd9","type":"api-current-state","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"If Ceiling Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.laundry_ceiling_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":1300,"wires":[["6b05354a13d1ee5f"],[]]},{"id":"106add1242e5743b","type":"api-current-state","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"If Ceiling Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.laundry_ceiling_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":1360,"wires":[["b4d9116fa41904ef"],[]]},{"id":"6b05354a13d1ee5f","type":"api-call-service","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"{\"brightness\":255,\"transition\":1.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":670,"y":1300,"wires":[["6768dd61bf1cd6cb"]]},{"id":"b4d9116fa41904ef","type":"api-call-service","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1360,"wires":[["6768dd61bf1cd6cb"]]},{"id":"f3b33899ef94e86c","type":"comment","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"----- Toggle Light, on His Closet Door Action -----","info":"","x":240,"y":80,"wires":[]},{"id":"c48c1d94ee6a6711","type":"comment","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"----- Toggle Light, on Her Closet Door Action -----","info":"","x":250,"y":400,"wires":[]},{"id":"21107ebe8dd9c18e","type":"comment","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"----- Toggle Lights, on Bedroom 4 Door Action -----","info":"","x":250,"y":720,"wires":[]},{"id":"c375aba6238b4590","type":"comment","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"----- Toggle Light, on Living Room Sliding Door Action or Timeout -----","info":"","x":310,"y":980,"wires":[]},{"id":"4f8bd1dd7d308b46","type":"comment","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"----- Toggle Light, on Laundry Room Door Action -----","info":"","x":260,"y":1240,"wires":[]},{"id":"c367a2a0e26fd211","type":"time-range-switch","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"","lat":"26.305080","lon":"-80.197180","startTime":"sunset","endTime":"sunrise","startOffset":"-30","endOffset":"+30","x":360,"y":1100,"wires":[["ef376d85a3136f21"],[]]},{"id":"6ae3bfdbf1d8b22a","type":"debug","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1610,"y":1100,"wires":[]},{"id":"2d23a7750946bc2d","type":"debug","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":200,"wires":[]},{"id":"6768dd61bf1cd6cb","type":"debug","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":930,"y":1300,"wires":[]},{"id":"ef376d85a3136f21","type":"api-current-state","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"If Evening Automation Flag is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1040,"wires":[["fab252dc566fd69f"],[]]},{"id":"98af20ded667f694","type":"api-current-state","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"If Backyard Exterior Lights are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.backyard_string_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1180,"y":1100,"wires":[["10fb8e3957dae1b8"],[]]},{"id":"3a3337d7327a07cc","type":"zigbee2mqtt-in","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"Door Sensor","server":"82cdeceea55f3c77","friendly_name":"Tom's Closet Door","device_id":"0x00158d0006d62665","state":"0","outputAtStartup":true,"filterChanges":true,"x":550,"y":80,"wires":[[]]},{"id":"ed04d002c9779b7e","type":"switch","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":150,"y":200,"wires":[["1c847a4542ba2517"],["e9f3e7483c18d115"]]},{"id":"c7a2741c9343625d","type":"zigbee2mqtt-in","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"Door Sensor","server":"82cdeceea55f3c77","friendly_name":"Jess' Closet Door","device_id":"0x00158d000232a0cd","state":"0","outputAtStartup":true,"filterChanges":true,"x":570,"y":400,"wires":[[]]},{"id":"70871eb018dde9c3","type":"switch","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":150,"y":520,"wires":[["02c9c7877f7bd7c5"],["cfd5c0a89e5d590f"]]},{"id":"36dbe061dd870db9","type":"zigbee2mqtt-in","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"Door Sensor","server":"82cdeceea55f3c77","friendly_name":"Door, Bedroom 4","device_id":"0x00158d0004448761","state":"0","outputAtStartup":true,"filterChanges":true,"x":570,"y":720,"wires":[[]]},{"id":"1cab91dc852c881f","type":"switch","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":840,"wires":[["d105d1df17b7b199"],["b18a99e3215ce7a9"]]},{"id":"85bba7b30bded39c","type":"zigbee2mqtt-in","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"Door Sensor","server":"82cdeceea55f3c77","friendly_name":"Door, Laundry Room","device_id":"0x00158d000232af0c","state":"0","outputAtStartup":true,"filterChanges":true,"x":590,"y":1240,"wires":[[]]},{"id":"f8a7a9957d74f03c","type":"switch","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":1360,"wires":[["bfd7f3089fe57cd9"],["ca0bce132255d2f5"]]},{"id":"85baadc8430df888","type":"zigbee2mqtt-in","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"Door Sensor","server":"82cdeceea55f3c77","friendly_name":"Door, Laundry Room","device_id":"0x00158d000232af0c","state":"0","outputAtStartup":true,"filterChanges":true,"x":690,"y":980,"wires":[[]]},{"id":"ad5708633460b6fb","type":"switch","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":1100,"wires":[["c367a2a0e26fd211"],[]]},{"id":"998ffb489c5cf41f","type":"server-state-changed","z":"a95ec654e9a3d387","g":"6eb43475c0cbaf9e","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_closet_hallway_t","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":140,"wires":[["ed04d002c9779b7e"],[]]},{"id":"ed6210c8a2ed785f","type":"server-state-changed","z":"a95ec654e9a3d387","g":"09686aa28ec76166","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_closet_hallway_j","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":460,"wires":[["70871eb018dde9c3"],[]]},{"id":"8f4cbc4036b81f6f","type":"server-state-changed","z":"a95ec654e9a3d387","g":"90b28685286b5c32","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_bedroom_4","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":780,"wires":[["1cab91dc852c881f"],[]]},{"id":"19907a9d0aa0f539","type":"server-state-changed","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_living","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":1040,"wires":[["ad5708633460b6fb"],[]]},{"id":"a514ea0cfddc53d5","type":"server-state-changed","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_laundry","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":1300,"wires":[["f8a7a9957d74f03c"],[]]},{"id":"1466455846b44c47","type":"stoptimer","z":"a95ec654e9a3d387","duration":"10","units":"Minute","payloadtype":"num","payloadval":"0","name":"","x":580,"y":520,"wires":[["cfd5c0a89e5d590f"],[]]},{"id":"5e9ffa173eb691e7","type":"stoptimer","z":"a95ec654e9a3d387","duration":"10","units":"Minute","payloadtype":"num","payloadval":"0","name":"","x":580,"y":200,"wires":[["e9f3e7483c18d115"],[]]},{"id":"0c745f65dfe2301c","type":"stoptimer","z":"a95ec654e9a3d387","g":"2ef23d258e2908a5","duration":"20","units":"Minute","payloadtype":"num","payloadval":"0","name":"","x":1120,"y":1040,"wires":[["98af20ded667f694"],[]]},{"id":"ca7f0ec6ab089e7b","type":"api-current-state","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"If Foyer Exterior Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":630,"y":2120,"wires":[["6f2dc7d6a66e6ed9"],[]]},{"id":"6f2dc7d6a66e6ed9","type":"api-call-service","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":880,"y":2120,"wires":[["7bcdc8555abb2614"]]},{"id":"a8d7d9ab126bcd9b","type":"comment","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"----- Turn on Light, on Front Entryway Sliding Door Action -----","info":"","x":290,"y":2060,"wires":[]},{"id":"b126de85b3fe471d","type":"time-range-switch","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"","lat":"26.305080","lon":"-80.197180","startTime":"sunset","endTime":"sunrise","startOffset":"+45","endOffset":"-45","x":360,"y":2120,"wires":[["ca7f0ec6ab089e7b"],[]]},{"id":"7bcdc8555abb2614","type":"debug","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1050,"y":2120,"wires":[]},{"id":"ba6895f23ee9fad7","type":"switch","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":2180,"wires":[["b126de85b3fe471d"],[]]},{"id":"9750e4da9bc743a7","type":"server-state-changed","z":"a95ec654e9a3d387","g":"abb95db352dd9844","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_front_primary","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":130,"y":2120,"wires":[["ba6895f23ee9fad7"],[]]},{"id":"ed114745415daaa7","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Garage Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.garage_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":1800,"wires":[["789ae31bb535788e"],[]]},{"id":"789ae31bb535788e","type":"api-call-service","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"switch","service":"turn_on","areaId":[],"deviceId":[],"entityId":["switch.garage_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1800,"wires":[["b634a2cc34e15b02"]]},{"id":"84f415b0ca92552c","type":"comment","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"----- Toggle Light, on Interior Garage Door Action -----","info":"","x":260,"y":1560,"wires":[]},{"id":"b634a2cc34e15b02","type":"debug","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1090,"y":1800,"wires":[]},{"id":"f5126bc7b7a5f46b","type":"switch","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Route","property":"state","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":470,"y":1860,"wires":[["ed114745415daaa7"],["0acc558d10291b4d"]]},{"id":"ebe466b648484bdd","type":"server-state-changed","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Door Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_garage","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"state","propertyType":"msg","value":"","valueType":"entityState"}],"x":130,"y":1620,"wires":[["0148461838254a59"],[]]},{"id":"ae6beda26d49fe49","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Garage Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.garage_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":1920,"wires":[["4c39affa2da2b391"],[]]},{"id":"4c39affa2da2b391","type":"api-call-service","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"switch","service":"turn_off","areaId":[],"deviceId":[],"entityId":["switch.garage_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1860,"wires":[["b634a2cc34e15b02"]]},{"id":"cd1fe112915221f9","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Garage Cover is CLOSED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"closed, closing","halt_if_type":"str","halt_if_compare":"includes","entity_id":"cover.garage_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":400,"y":1800,"wires":[["f5126bc7b7a5f46b"],[]]},{"id":"ca0bce132255d2f5","type":"api-current-state","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","name":"If Garage Door is CLOSED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.door_garage","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":400,"y":1360,"wires":[["76355636c0ef3764"],[]]},{"id":"0148461838254a59","type":"switch","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":1680,"wires":[["eaabce55fd80cfa9","cd1fe112915221f9"],["a42b8c5530dcc689","cd1fe112915221f9"]]},{"id":"eaabce55fd80cfa9","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Ceiling Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.laundry_ceiling_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":380,"y":1620,"wires":[["24fd24ba11cde870"],[]]},{"id":"a42b8c5530dcc689","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Laundry Door is CLOSED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.door_laundry","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":400,"y":1680,"wires":[["9b4241664e283d94"],[]]},{"id":"24fd24ba11cde870","type":"api-call-service","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Set Brightness & Fade Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"{\"brightness\":255,\"transition\":1.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":670,"y":1620,"wires":[["35ea4f7396bfdab0"]]},{"id":"58f40ea7af36a3b3","type":"api-current-state","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"If Ceiling Light is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.laundry_ceiling_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":1680,"wires":[["ac1c75ccd657b1af"],[]]},{"id":"35ea4f7396bfdab0","type":"debug","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":930,"y":1620,"wires":[]},{"id":"ac1c75ccd657b1af","type":"api-call-service","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","name":"Turn OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":1680,"wires":[["35ea4f7396bfdab0"]]},{"id":"76355636c0ef3764","type":"stoptimer","z":"a95ec654e9a3d387","g":"6c9abf623b0a916b","duration":"3","units":"Second","payloadtype":"num","payloadval":"0","name":"","x":440,"y":1420,"wires":[["106add1242e5743b"],[]]},{"id":"9b4241664e283d94","type":"stoptimer","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","duration":"3","units":"Second","payloadtype":"num","payloadval":"0","name":"","x":440,"y":1740,"wires":[["58f40ea7af36a3b3"],[]]},{"id":"0acc558d10291b4d","type":"stoptimer","z":"a95ec654e9a3d387","g":"778ef0caf6d2c32c","duration":"2","units":"Minute","payloadtype":"num","payloadval":"0","name":"","x":680,"y":1860,"wires":[["ae6beda26d49fe49"],[]]},{"id":"6e95ceae462da943","type":"server-state-changed","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Motion Sensor, is off","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.motion_laundry","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"off","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":"4","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":760,"wires":[["b675052fa6098c73"],["b675052fa6098c73","10a0cfab0de3b09f"]]},{"id":"5bbfae9781c64ed1","type":"api-call-service","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Turn Ceiling Light ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"{\"brightness\":msg.data.attributes.brightness,\"transition\":1.5}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":660,"y":820,"wires":[["184d75c4d4c87969"]]},{"id":"a6fafb1aaff116e8","type":"api-call-service","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Turn Ceiling Light OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":760,"wires":[["184d75c4d4c87969"]]},{"id":"72cbdf5001a79ab4","type":"comment","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"----- Toggle Light, on Laundry Room Motion Action -----","info":"","x":280,"y":640,"wires":[]},{"id":"3cc73458ada50437","type":"server-state-changed","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"Motion Sensor","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.foyer_doorbell_motion","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":420,"wires":[["6b7b3dea72c4a498"],[]]},{"id":"6b7b3dea72c4a498","type":"time-range-switch","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"","lat":"26.305080","lon":"-80.197180","startTime":"sunset","endTime":"sunrise","startOffset":"+270","endOffset":"0","x":160,"y":500,"wires":[["6c94fd1427d21d53"],[]]},{"id":"813c6b4b26caebac","type":"api-current-state","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"If Foyer Exterior Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":940,"y":420,"wires":[["35144f3b54e1eb38"],[]]},{"id":"35144f3b54e1eb38","type":"api-call-service","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"Turn ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1180,"y":420,"wires":[["18a2e9166694fb0c"]]},{"id":"bf86bf1f40773cb9","type":"comment","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"----- Toggle Light, on Evening Foyer Entryway Motion Action -----","info":"","x":310,"y":360,"wires":[]},{"id":"184d75c4d4c87969","type":"debug","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":870,"y":820,"wires":[]},{"id":"2a9db556fe75a53e","type":"switch","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"On or Off","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":700,"y":460,"wires":[["813c6b4b26caebac"],["a3917d33848d267a"]]},{"id":"eba66ecd4c9de23d","type":"inject","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Trigger: Motion START","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"on","payloadType":"str","x":220,"y":700,"wires":[["7eb75ed978c8054b"]]},{"id":"592b1510af2557a0","type":"time-range-switch","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"","lat":"26.305080","lon":"-80.197180","startTime":"sunset","endTime":"sunrise","startOffset":"0","endOffset":"0","x":640,"y":1100,"wires":[["7251a67d88a0352f","88b0462386162524"],[]]},{"id":"7251a67d88a0352f","type":"api-current-state","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":1020,"wires":[["4b31058af4d10e03"],[]]},{"id":"88b0462386162524","type":"api-current-state","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"If Light is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_1_bedside_lamps","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":1080,"wires":[["0aeff1a50e52889a"],[]]},{"id":"4b31058af4d10e03","type":"api-call-service","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"Set Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{\"brightness\":102}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1080,"y":1020,"wires":[["a705f00b0dbe73b5"]]},{"id":"0aeff1a50e52889a","type":"api-call-service","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"Set Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"{\"brightness\":102}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1080,"y":1080,"wires":[["a705f00b0dbe73b5"]]},{"id":"a705f00b0dbe73b5","type":"debug","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":1020,"wires":[]},{"id":"886d3b36ab1636e9","type":"comment","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"----- Toggle Lights, on Evening Arriving Home -----","info":"","x":260,"y":960,"wires":[]},{"id":"b8626ff9ac46f637","type":"inject","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"Trigger: ARRIVAL","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"home","payloadType":"str","x":400,"y":1100,"wires":[["592b1510af2557a0"]]},{"id":"6c94fd1427d21d53","type":"api-current-state","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"If Evening Automation Flag OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.automation_daily_sunset","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":420,"wires":[["66acd1847becf796"],[]]},{"id":"b73b70a08481ad81","type":"api-current-state","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"If Motion is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.foyer_doorbell_motion","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1120,"y":480,"wires":[["8c18b33da463a312"],[]]},{"id":"8c18b33da463a312","type":"api-call-service","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"Turn Foyer Exterior Light OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_exterior_entryway"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1390,"y":480,"wires":[["18a2e9166694fb0c"]]},{"id":"18a2e9166694fb0c","type":"debug","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":420,"wires":[]},{"id":"530882536988219d","type":"ha-zone","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"Tom Arrives at Regency","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.thomas"],"event":"enter","zones":["zone.regency_lakes"],"x":180,"y":1020,"wires":[["eba87b7c0a53c6e7"]]},{"id":"f492ca33661c8df8","type":"delay","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":620,"y":1020,"wires":[["592b1510af2557a0"]]},{"id":"891e0a6331a6d3ee","type":"comment","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"----- Motion Detected at Front Door, Send Notification with Image -----","info":"","x":320,"y":80,"wires":[]},{"id":"49caf1957641923a","type":"api-current-state","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.doorbell_motion_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":380,"y":140,"wires":[["e97f90c8b6b8e055"],[]]},{"id":"c84665cc506cc72a","type":"trigger-state","z":"ccf4e5eced60ee19","d":true,"g":"6f4459aaf422d31f","name":"Motion Sensor","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.foyer_doorbell_motion","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":150,"y":140,"wires":[["2e59f659b453aacb"],[]]},{"id":"b551f8302ee60639","type":"api-call-service","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Take snapshot","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"camera","service":"snapshot","areaId":[],"deviceId":[],"entityId":["camera.foyer_doorbell_high"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":880,"y":140,"wires":[["9983291167b2f4d5"]]},{"id":"9983291167b2f4d5","type":"delay","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"","pauseType":"delay","timeout":"750","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1090,"y":140,"wires":[["f38856448387560f"]]},{"id":"f38856448387560f","type":"function","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Prepare iOS Notification","func":"msg.notification_type = 'info';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"There is motion at the Front Door\",\n        \"data\"    : {\n            \"subtitle\" : false,\n    \t\t\"image\"    : msg.snapshot,\n    \t\t\"actions\"  : [\n                { \n                    action : \"DOORBELL_SNOOZE_30MIN\",\n                    title  : \"Snooze: 30 Minutes\"\n                }, \n                { \n                    action : \"DOORBELL_SNOOZE_1HR\",\n                    title  : \"Snooze: 1 Hour\"\n                }, \n                { \n                    action : \"DOORBELL_SNOOZE_TODAY\",\n                    title  : \"Snooze: Today\"\n                }\n            ]\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1130,"y":220,"wires":[["2bd12a1dd8e20657"]]},{"id":"2bd12a1dd8e20657","type":"link out","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Motion at Frontdoor, Send Notification with Snapshot","mode":"link","links":["b5bf4f1d2a2db4f8","eb19baaad61d9a94","0afd84020e41df91","2390dbfc9a79785a","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":1255,"y":140,"wires":[]},{"id":"9695c9861fe197a3","type":"function","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Setup Snapshot","func":"const timestamp = new Date().toISOString();\n\nconst snapshot_file = \"doorbell-motion-\" + timestamp + \".jpg\";\n\nmsg.snapshot = \"/local/snapshots/\" + snapshot_file;\n\nmsg.payload = {\n    data : {\n        \"filename\" : \"/config/www/snapshots/\" + snapshot_file\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":220,"wires":[["b551f8302ee60639"]]},{"id":"e97f90c8b6b8e055","type":"api-current-state","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"Is Snoozed Indefinitely?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.doorbell_motion_snooze_indefinite","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":410,"y":220,"wires":[[],["57e784ddeb4dd9f7"]]},{"id":"57e784ddeb4dd9f7","type":"delay","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":650,"y":140,"wires":[["9695c9861fe197a3"]]},{"id":"2e59f659b453aacb","type":"delay","z":"ccf4e5eced60ee19","g":"6f4459aaf422d31f","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":160,"y":220,"wires":[["49caf1957641923a"]]},{"id":"66acd1847becf796","type":"api-current-state","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","name":"If Manual Override is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.manual_override_foyer_exterior_entryway","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":500,"wires":[["2a9db556fe75a53e"],[]]},{"id":"a3917d33848d267a","type":"stoptimer","z":"ccf4e5eced60ee19","g":"ac97a59aa0e054c4","duration":"3","units":"Minute","payloadtype":"num","payloadval":"0","name":"","x":900,"y":480,"wires":[["b73b70a08481ad81"],[]]},{"id":"b675052fa6098c73","type":"trigger","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"","op1":"Delay","op2":"off","op1type":"str","op2type":"str","duration":"5","extend":true,"overrideDelay":false,"units":"min","reset":"on","bytopic":"all","topic":"topic","outputs":2,"x":390,"y":760,"wires":[["7eb75ed978c8054b"],["a6fafb1aaff116e8"]]},{"id":"9e761378ef4304d7","type":"api-call-service","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Turn Ceiling Light ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.laundry_ceiling_light"],"data":"{\"brightness\":msg.data.attributes.brightness/2}","dataType":"jsonata","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":820,"y":700,"wires":[["184d75c4d4c87969"]]},{"id":"7eb75ed978c8054b","type":"api-current-state","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Current State","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.laundry_ceiling_light","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"lightBrightness","propertyType":"flow","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":580,"y":700,"wires":[["9e761378ef4304d7"]]},{"id":"10a0cfab0de3b09f","type":"change","z":"ccf4e5eced60ee19","g":"1f3f56a64bdf7245","name":"Set Brightness Var","rules":[{"t":"set","p":"data","pt":"msg","to":"lightBrightness","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":820,"wires":[["5bbfae9781c64ed1"]]},{"id":"eba87b7c0a53c6e7","type":"api-current-state","z":"ccf4e5eced60ee19","g":"babed62518ff1825","name":"Jess not Home","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Home","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"person.jessica","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"","forType":"num","forUnits":"hours","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":420,"y":1020,"wires":[["f492ca33661c8df8"],[]]},{"id":"b1def57ef9befa9e","type":"time-range-switch","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"1:00pm - 7:00pm","lat":"26.305080","lon":"-80.197180","startTime":"13:00","endTime":"19:00","startOffset":"0","endOffset":"0","x":730,"y":1360,"wires":[["4d0ce4d155134e89"],[]]},{"id":"4d0ce4d155134e89","type":"api-current-state","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"If Front Door is LOCKED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"locked","halt_if_type":"str","halt_if_compare":"is","entity_id":"lock.front_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1010,"y":1300,"wires":[["c4e0cf2f167398e7"],[]]},{"id":"c4e0cf2f167398e7","type":"api-call-service","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Unlock Front Door","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"lock","service":"unlock","areaId":[],"deviceId":[],"entityId":["lock.front_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":990,"y":1360,"wires":[["8483a15dfc485e24"]]},{"id":"8483a15dfc485e24","type":"debug","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1250,"y":1300,"wires":[]},{"id":"17bb2dafa4a86e73","type":"comment","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"----- Toggle Door Lock, on Afternoon Arriving Home -----","info":"","x":280,"y":1240,"wires":[]},{"id":"1cf517e7cdad2510","type":"inject","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Trigger: ARRIVAL","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"home","payloadType":"str","x":720,"y":1240,"wires":[["222ad4871b1d07e8"]]},{"id":"51196973216ea1ee","type":"ha-zone","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Dolores Arrives at Regency","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.dolores"],"event":"enter","zones":["zone.regency_lakes"],"x":190,"y":1300,"wires":[["276a08303af61fee"]]},{"id":"e558ce69bedd92a9","type":"delay","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":420,"y":1360,"wires":[["222ad4871b1d07e8"]]},{"id":"222ad4871b1d07e8","type":"weekday","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Is Workday","sun":false,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":false,"x":710,"y":1300,"wires":[["b1def57ef9befa9e"],[]]},{"id":"82518eec87e715f3","type":"ha-zone","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Leo Arrives at Regency","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.leo"],"event":"enter","zones":["zone.regency_lakes"],"x":180,"y":1360,"wires":[[]]},{"id":"276a08303af61fee","type":"api-current-state","z":"ccf4e5eced60ee19","g":"d64103cd82ca6e3b","name":"Tom not in REGENCY","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Regency Lakes","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"person.thomas","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"","forType":"num","forUnits":"hours","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":460,"y":1300,"wires":[["e558ce69bedd92a9"],[]]},{"id":"c3f90b66e3a8c016","type":"comment","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"----- Laundry Status -----","info":"","x":190,"y":80,"wires":[]},{"id":"fb32772955875f5c","type":"switch","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Run","vt":"str"},{"t":"eq","v":"Finished","vt":"str"},{"t":"eq","v":"Standby","vt":"str"},{"t":"eq","v":"Off","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":390,"y":140,"wires":[["db8aa1fd36d66fe3"],["2654a666178d678c"],["2654a666178d678c"],["2654a666178d678c"]]},{"id":"f55cc72d92f1f70a","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Get Current Attributes","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.laundry_washer_time_remaining","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":80,"wires":[["e9039f41e19fcf5b"]]},{"id":"e9039f41e19fcf5b","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Store Original Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_text","service":"set_value","areaId":[],"deviceId":[],"entityId":["input_text.laundry_washer_original_duration"],"data":"{\"value\":\"{{payload}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":840,"y":140,"wires":[["af8742a324d4a9ca"]]},{"id":"af8742a324d4a9ca","type":"debug","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1050,"y":140,"wires":[]},{"id":"313b15db17f51c49","type":"switch","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Run","vt":"str"},{"t":"eq","v":"Finished","vt":"str"},{"t":"eq","v":"Standby","vt":"str"},{"t":"eq","v":"Off","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":390,"y":340,"wires":[["f6bd8bd0778af331"],["f225b54cfb2e3021"],["f225b54cfb2e3021"],["f225b54cfb2e3021"]]},{"id":"edbe95c8e04ae40f","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Get Current Attributes","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.laundry_dryer_time_remaining","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":260,"wires":[["436bd0cbac023aa2"]]},{"id":"436bd0cbac023aa2","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Store Original Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_text","service":"set_value","areaId":[],"deviceId":[],"entityId":["input_text.laundry_dryer_original_duration"],"data":"{\"value\":\"{{payload}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":840,"y":320,"wires":[["f58380ee182c86ec"]]},{"id":"2654a666178d678c","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Clear Original Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_text","service":"set_value","areaId":[],"deviceId":[],"entityId":["input_text.laundry_washer_original_duration"],"data":"{\"value\":\"null\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":200,"wires":[["af8742a324d4a9ca"]]},{"id":"f58380ee182c86ec","type":"debug","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":320,"wires":[]},{"id":"f225b54cfb2e3021","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Clear Original Duration","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_text","service":"set_value","areaId":[],"deviceId":[],"entityId":["input_text.laundry_dryer_original_duration"],"data":"{\"value\":\"null\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":600,"y":380,"wires":[["f58380ee182c86ec"]]},{"id":"14fca1ac313b8d29","type":"inject","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","props":[{"p":"payload"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Run","payloadType":"str","x":230,"y":280,"wires":[["313b15db17f51c49","fb32772955875f5c"]]},{"id":"99cd8013b1699953","type":"trigger-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Washing Machine","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"sensor.laundry_washer_machine_state","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"includes","comparatorValueDatatype":"list","comparatorValue":"Finished, Standby, Off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Run"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":190,"y":200,"wires":[[],[]]},{"id":"5a3bb6abe9e57e74","type":"trigger-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Tumble Dryer","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"sensor.laundry_dryer_machine_state","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"includes","comparatorValueDatatype":"list","comparatorValue":"Finished, Standby, Off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Run"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":210,"y":400,"wires":[[],[]]},{"id":"db8aa1fd36d66fe3","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If Value is NULL","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"null","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.laundry_washer_original_duration","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":580,"y":140,"wires":[["f55cc72d92f1f70a"],[]]},{"id":"f6bd8bd0778af331","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If Value is NULL","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"null","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.laundry_dryer_original_duration","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":580,"y":320,"wires":[["edbe95c8e04ae40f"],[]]},{"id":"615b75ca30943019","type":"server-state-changed","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Washing Machine","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.laundry_washer_machine_state","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"Run, Off, Standby, Finished","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":140,"wires":[["fb32772955875f5c"],[]]},{"id":"07fa100d50c32077","type":"server-state-changed","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Tumble Dryer","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.laundry_dryer_machine_state","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"Run, Off, Standby, Finished","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":340,"wires":[["313b15db17f51c49"],[]]},{"id":"97b2bf5d774045ea","type":"trigger-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Washer Door Opened/Closed","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.laundry_washer_door","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":200,"y":480,"wires":[["cf277ce484a8b7f1"],[]]},{"id":"933bf22407bc93f2","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Turn Flag OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.reminder_laundry_complete_washer"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":860,"y":480,"wires":[["a6ddde1b055a94b0"]]},{"id":"ea822f9fb3960583","type":"trigger-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Dryer Door Opened/Closed","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.laundry_dryer_door","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":200,"y":540,"wires":[["41e49b4cd1ba8256"],[]]},{"id":"ce57080c49c2c3d2","type":"api-call-service","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"Turn Flag OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.reminder_laundry_complete_dryer"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":860,"y":540,"wires":[["a6ddde1b055a94b0"]]},{"id":"a6ddde1b055a94b0","type":"debug","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1050,"y":480,"wires":[]},{"id":"cf277ce484a8b7f1","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If is DONE","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Standby, Off","halt_if_type":"str","halt_if_compare":"includes","entity_id":"sensor.laundry_washer_machine_state","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":450,"y":480,"wires":[["f9c6dafb0bb6a57e"],[]]},{"id":"41e49b4cd1ba8256","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If is DONE","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Standby, Off","halt_if_type":"str","halt_if_compare":"includes","entity_id":"sensor.laundry_dryer_machine_state","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":450,"y":540,"wires":[["3d7a14d68c705c72"],[]]},{"id":"3d7a14d68c705c72","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If flag is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.reminder_laundry_complete_dryer","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":540,"wires":[["ce57080c49c2c3d2"],[]]},{"id":"f9c6dafb0bb6a57e","type":"api-current-state","z":"462cafc155901a6e","g":"2ee7394580f79cc3","name":"If flag is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.reminder_laundry_complete_washer","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":480,"wires":[["933bf22407bc93f2"],[]]},{"id":"bc55baeed9cde3d9","type":"comment","z":"75bda675505dd534","name":"----- IKEA Switch Button Press -----","info":"","x":180,"y":1540,"wires":[]},{"id":"aa395cef7eb28827","type":"switch","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"single","vt":"str"},{"t":"eq","v":"double","vt":"str"},{"t":"eq","v":"long","vt":"str"},{"t":"eq","v":"release","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":170,"y":940,"wires":[["0c8aebd6101ee42a"],["4e657bd12f3da99e"],[],[]]},{"id":"0c8aebd6101ee42a","type":"api-current-state","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"If Ceiling Ledge is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":400,"y":860,"wires":[["bca1cbf60fec6762"],["a4d93a3fba41f377"]]},{"id":"4e657bd12f3da99e","type":"api-current-state","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"If Under Table Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_under_table","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":920,"wires":[["80c1fab30b054d93"],["1ede4d1e655b7797"]]},{"id":"bca1cbf60fec6762","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Turn Ceiling Ledge OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":730,"y":800,"wires":[["541f985126d20172"]]},{"id":"a4d93a3fba41f377","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Turn Ceiling Ledge ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":720,"y":860,"wires":[["541f985126d20172"]]},{"id":"80c1fab30b054d93","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Turn Under Table Lightstrip OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":750,"y":920,"wires":[["43099f1c296af873"]]},{"id":"1ede4d1e655b7797","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Turn Under Table Lightstrip ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_under_table"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":750,"y":980,"wires":[["43099f1c296af873"]]},{"id":"541f985126d20172","type":"debug","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":950,"y":800,"wires":[]},{"id":"43099f1c296af873","type":"debug","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":990,"y":920,"wires":[]},{"id":"0e0b319d3521efee","type":"api-current-state","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"If Garage Door is CLOSED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"closed","halt_if_type":"str","halt_if_compare":"is","entity_id":"cover.garage_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":420,"y":1300,"wires":[["3f4b62c2ba6c794c"],[]]},{"id":"4015279ee4d1fd11","type":"api-current-state","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"If Garage Door is OPEN","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"open","halt_if_type":"str","halt_if_compare":"includes","entity_id":"cover.garage_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1360,"wires":[["16191e38c834bdf9"],[]]},{"id":"3f4b62c2ba6c794c","type":"api-call-service","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"Make Garage Door OPEN","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"cover","service":"open_cover","areaId":[],"deviceId":[],"entityId":["cover.garage_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":710,"y":1300,"wires":[["cb339aea427179e6"]]},{"id":"16191e38c834bdf9","type":"api-call-service","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"Make Garage Door CLOSE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"cover","service":"close_cover","areaId":[],"deviceId":[],"entityId":["cover.garage_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":1360,"wires":[["cb339aea427179e6"]]},{"id":"cb339aea427179e6","type":"debug","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":930,"y":1300,"wires":[]},{"id":"6971f02eb5529462","type":"switch","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"single","vt":"str"},{"t":"eq","v":"double","vt":"str"},{"t":"eq","v":"hold","vt":"str"},{"t":"eq","v":"release","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":170,"y":1380,"wires":[["0e0b319d3521efee"],["4015279ee4d1fd11"],[],[]]},{"id":"1a9e5b3d723fd043","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Adjust Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{ \"entity_id\":\"light.foyer_ceiling_ledge\", \"brightness\":{{payload}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1110,"y":1100,"wires":[["49f92784cf7a09aa"]]},{"id":"3f9b5f430db4660b","type":"function","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Get New Brightness Level","func":"var brightness = msg.data.attributes.brightness;\nconst brightness_min = 25;  // Do not make less than 1 (2.55%)\nconst brightness_max = 255; // Do not make greater than 255 (100%)\nconst brightness_step = 25;\n\nbrightness = parseInt( brightness );\n\nbrightness = Math.ceil( brightness + brightness_step );\n\n\nif( brightness < brightness_min )\n{ \n    brightness = brightness_max;\n\n} else if( brightness > brightness_max )\n{ \n    brightness = brightness_min;\n\n} // endif\n\nmsg.payload = brightness;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1130,"y":1040,"wires":[["1a9e5b3d723fd043"]]},{"id":"69db3d8a0e4cd78f","type":"api-current-state","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"If Ceiling Ledge is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1040,"wires":[["6250801d5249ba07"],["ec1fccd358e40463"]]},{"id":"2343f16b29502fdb","type":"trigger","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":380,"y":1040,"wires":[["69db3d8a0e4cd78f"]]},{"id":"804006fe20f4ab7b","type":"change","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1100,"wires":[["2343f16b29502fdb"]]},{"id":"49f92784cf7a09aa","type":"debug","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":1040,"wires":[]},{"id":"b33f1b35912969e0","type":"server-state-changed","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Doorbell Button Pressed","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.doorbell_ding","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on","halt_if_type":"str","halt_if_compare":"is","outputs":2,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":200,"wires":[["9591d8a2bed75603"],[]]},{"id":"a96ca5ac6d732b08","type":"api-call-service","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Take snapshot","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"camera","service":"snapshot","areaId":[],"deviceId":[],"entityId":["camera.foyer_doorbell_high"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":460,"y":200,"wires":[["17e0253cc7611cdd"]]},{"id":"7133d65cba709e01","type":"inject","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Trigger: Button Press START","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"on","payloadType":"str","x":200,"y":140,"wires":[["9591d8a2bed75603"]]},{"id":"0180a8e0974cc07b","type":"function","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Prepare iOS Notification","func":"msg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Someone rang the doorbell\",\n        \"data\"    : { \n            \"subtitle\": false,\n            \"image\" : msg.snapshot,\n            \"push\" : { \n                \"sound\" : { \n                    \"name\"     : \"default\",\n                    \"sound\"    : 0,\n                    \"critical\" : 1\n                }\n            },\n            \n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":910,"y":200,"wires":[[]]},{"id":"1f3d679062bc9586","type":"link out","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Doorbell Pressed, Send Notification","mode":"link","links":["b5bf4f1d2a2db4f8","eb19baaad61d9a94","0afd84020e41df91","2390dbfc9a79785a","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":1095,"y":200,"wires":[]},{"id":"f7a0be51b3cf53de","type":"comment","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"----- Doorbell Button Pressed, Send Notification with Image -----","info":"","x":310,"y":80,"wires":[]},{"id":"9591d8a2bed75603","type":"function","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"Setup Snapshot","func":"const timestamp = new Date().toISOString();\n\nconst snapshot_file = \"doorbell-press-\" + timestamp + \".jpg\";\n\nmsg.snapshot = \"/local/snapshots/\" + snapshot_file;\n\nmsg.payload = {\n    data : {\n        \"filename\" : \"/config/www/snapshots/\" + snapshot_file\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":140,"wires":[["a96ca5ac6d732b08"]]},{"id":"17e0253cc7611cdd","type":"delay","z":"75bda675505dd534","g":"bbdfd791e1227da1","name":"","pauseType":"delay","timeout":"750","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":670,"y":200,"wires":[["0180a8e0974cc07b"]]},{"id":"ec1fccd358e40463","type":"api-call-service","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Turn Ceiling Ledge ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":640,"y":1100,"wires":[["7b69a238ddfbd434"]]},{"id":"b2a7b37874b4b0fb","type":"comment","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"----- Foyer for Foyer -----","info":"","x":160,"y":780,"wires":[]},{"id":"807a15bf46fb8d0b","type":"comment","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"----- Kitchen for Garage -----","info":"","x":180,"y":1240,"wires":[]},{"id":"ac6478947365b072","type":"switch","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"},{"t":"eq","v":"brightness_up","vt":"str"},{"t":"eq","v":"brightness_down","vt":"str"},{"t":"eq","v":"brightness_stop","vt":"str"}],"checkall":"false","repair":false,"outputs":5,"x":170,"y":1820,"wires":[["41a8c88062ca01cd"],["68fce3057208e760"],["8b379f210d5b55fd"],["8b379f210d5b55fd"],["b6465fd896443869"]]},{"id":"b6465fd896443869","type":"change","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":1860,"wires":[["8b379f210d5b55fd"]]},{"id":"36f68ebfdafa41a2","type":"api-call-service","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Turn Bedside Lamps OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":730,"y":1740,"wires":[["a53a26265673939a"]]},{"id":"a53a26265673939a","type":"debug","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":950,"y":1680,"wires":[]},{"id":"c96cb06fce36d315","type":"api-call-service","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Turn Bedside Lamps ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":730,"y":1680,"wires":[["a53a26265673939a"]]},{"id":"8b379f210d5b55fd","type":"trigger","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":400,"y":1800,"wires":[["4054e2fe3d389c8c"]]},{"id":"d62c5c9d.ef6d18","type":"switch","z":"75bda675505dd534","g":"d46092dab47821af","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"toggle","vt":"str"},{"t":"eq","v":"brightness_up_click","vt":"str"},{"t":"eq","v":"arrow_right_click","vt":"str"},{"t":"eq","v":"brightness_down_click","vt":"str"},{"t":"eq","v":"arrow_left_click","vt":"str"},{"t":"eq","v":"brightness_up_hold","vt":"str"},{"t":"eq","v":"arrow_right_hold","vt":"str"},{"t":"eq","v":"brightness_down_hold","vt":"str"},{"t":"eq","v":"arrow_left_hold","vt":"str"},{"t":"eq","v":"arrow_right_release","vt":"str"},{"t":"eq","v":"brightness_up_release","vt":"str"},{"t":"eq","v":"brightness_down_release","vt":"str"},{"t":"eq","v":"arrow_left_release","vt":"str"}],"checkall":"false","repair":false,"outputs":13,"x":170,"y":2640,"wires":[["259e2ad8042c16d9"],["2a0d77fade2710e7"],[],["2a0d77fade2710e7"],[],["a9ee4724c66e2f19"],[],["a9ee4724c66e2f19"],[],[],["0a38f536b463b6b0"],["0a38f536b463b6b0"],[]],"inputLabels":["Command In"],"outputLabels":["Power Button","Up Button","Right Button","Down Button","Left Button","","","","","","","",""]},{"id":"609ab88c0c8f076c","type":"api-call-service","z":"75bda675505dd534","g":"d46092dab47821af","name":"Turn Office Lights OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2500,"wires":[["259405adc493c6cc"]]},{"id":"259e2ad8042c16d9","type":"api-current-state","z":"75bda675505dd534","g":"d46092dab47821af","name":"If Office Lights are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_4_lights","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":2440,"wires":[["ca4892a8c0470bd9"],["609ab88c0c8f076c"]]},{"id":"ca4892a8c0470bd9","type":"api-call-service","z":"75bda675505dd534","g":"d46092dab47821af","name":"Turn Office Lights ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2440,"wires":[["259405adc493c6cc"]]},{"id":"259405adc493c6cc","type":"debug","z":"75bda675505dd534","g":"d46092dab47821af","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":910,"y":2440,"wires":[]},{"id":"a9ee4724c66e2f19","type":"trigger","z":"75bda675505dd534","g":"d46092dab47821af","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":410,"y":2560,"wires":[["2a0d77fade2710e7"]]},{"id":"0a38f536b463b6b0","type":"change","z":"75bda675505dd534","g":"d46092dab47821af","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":2620,"wires":[["a9ee4724c66e2f19"]]},{"id":"2a0d77fade2710e7","type":"api-current-state","z":"75bda675505dd534","g":"d46092dab47821af","name":"If Desk Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_4_desk_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":2560,"wires":[["b9a4464ae5baee1b"],["bfe8b62aa101afa1"]]},{"id":"bfe8b62aa101afa1","type":"api-call-service","z":"75bda675505dd534","g":"d46092dab47821af","name":"Turn Desk Lamp ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_desk_lamp"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":670,"y":2620,"wires":[["0998685f26fc6907"]]},{"id":"dc9e9ba0c3926658","type":"api-call-service","z":"75bda675505dd534","g":"d46092dab47821af","name":"Adjust Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_4_desk_lamp"],"data":"{ \"brightness\":{{brightness}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1130,"y":2620,"wires":[["bcca83e51de327bb"]]},{"id":"bcca83e51de327bb","type":"debug","z":"75bda675505dd534","g":"d46092dab47821af","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":2560,"wires":[]},{"id":"577628db0a3600cf","type":"function","z":"75bda675505dd534","g":"d46092dab47821af","name":"Set Brightness Level","func":"var brightness = msg.data.attributes.brightness;\nconst brightness_min = 25;  // Do not make less than 1 (2.55%)\nconst brightness_max = 255; // Do not make greater than 255 (100%)\nconst brightness_step = 25;\n\nbrightness = parseInt( brightness );\n\n\n//brightness = Math.ceil( brightness + brightness_step );\nif( 'brightness_up_click' == msg.press_code || 'brightness_up_hold' == msg.press_code )\n{ \n    brightness = Math.ceil( brightness + brightness_step );\n\n} else\n{ \n    brightness = Math.ceil( brightness - brightness_step );\n\n} // endif\n\n\nif( brightness < brightness_min )\n{ \n    brightness = brightness_max;\n\n} else if( brightness > brightness_max )\n{ \n    brightness = brightness_min;\n\n} // endif\n\nmsg.brightness = brightness;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2560,"wires":[["dc9e9ba0c3926658"]]},{"id":"b9a4464ae5baee1b","type":"api-current-state","z":"75bda675505dd534","g":"d46092dab47821af","name":"Get Brightness","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_4_desk_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":900,"y":2560,"wires":[["577628db0a3600cf"]]},{"id":"0998685f26fc6907","type":"delay","z":"75bda675505dd534","g":"d46092dab47821af","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":880,"y":2620,"wires":[["b9a4464ae5baee1b"]]},{"id":"f40dfb419f1e9e22","type":"comment","z":"75bda675505dd534","name":"----- Aqara Mini-Switch Button Press -----","info":"","x":200,"y":700,"wires":[]},{"id":"fe173d11a4227841","type":"comment","z":"75bda675505dd534","g":"d46092dab47821af","name":"----- His Office for His Office -----","info":"","x":190,"y":2380,"wires":[]},{"id":"ebab4eaf662659a7","type":"comment","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"----- Main Bedroom for Main Bedroom -----","info":"","x":220,"y":1620,"wires":[]},{"id":"4054e2fe3d389c8c","type":"api-current-state","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"If Bedside Lamps is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_1_bedside_lamps","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1800,"wires":[["dee03074ae00cbdc"],["a418271732700c61"]]},{"id":"a418271732700c61","type":"api-call-service","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Turn Bedside Lamps ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":670,"y":1860,"wires":[["3cd0806b1bfed34d"]]},{"id":"46724618b7510644","type":"api-call-service","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Adjust Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"{ \"brightness\":{{brightness}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1230,"y":1860,"wires":[["bae6b195750d5204"]]},{"id":"3ca1851b424cb660","type":"function","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Set Brightness Level","func":"var brightness = msg.data.attributes.brightness;\nconst brightness_min = 25;  // Do not make less than 1 (2.55%)\nconst brightness_max = 255; // Do not make greater than 255 (100%)\nconst brightness_step = 25;\n\nbrightness = parseInt( brightness );\n\n\n//brightness = Math.ceil( brightness + brightness_step );\nif( 'brightness_move_up' == msg.press_code )\n{ \n    brightness = Math.ceil( brightness + brightness_step );\n\n} else\n{ \n    brightness = Math.ceil( brightness - brightness_step );\n\n} // endif\n\n\nif( brightness < brightness_min )\n{ \n    brightness = brightness_max;\n\n} else if( brightness > brightness_max )\n{ \n    brightness = brightness_min;\n\n} // endif\n\nmsg.brightness = brightness;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1240,"y":1800,"wires":[["46724618b7510644"]]},{"id":"bae6b195750d5204","type":"debug","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1490,"y":1800,"wires":[]},{"id":"41a8c88062ca01cd","type":"api-current-state","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"If Bedside Lamps are OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_1_bedside_lamps","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":440,"y":1680,"wires":[["c96cb06fce36d315"],["dee03074ae00cbdc"]]},{"id":"f097b40a4e67e02c","type":"change","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":2240,"wires":[["b5da29cab8251554"]]},{"id":"d26830d4bca97ec7","type":"debug","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":910,"y":2060,"wires":[]},{"id":"17cadfe8639999ee","type":"api-call-service","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Turn Corner Lamp ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":680,"y":2060,"wires":[["d26830d4bca97ec7"]]},{"id":"b5da29cab8251554","type":"trigger","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":400,"y":2180,"wires":[["2ab6688cb35abf93"]]},{"id":"a1c3525f3b4e549e","type":"comment","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"----- Living Room for Living Room -----","info":"","x":210,"y":2000,"wires":[]},{"id":"2ab6688cb35abf93","type":"api-current-state","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"If Corner Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":660,"y":2180,"wires":[["08bb4171711a307b"],["70761485952b920a"]]},{"id":"70761485952b920a","type":"api-call-service","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Turn Corner Lamp ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":660,"y":2240,"wires":[["96c11c227394e543"]]},{"id":"60967315f0040565","type":"api-call-service","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Adjust Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"{ \"brightness\":{{brightness}} }","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1210,"y":2240,"wires":[["e652e8beb2243482"]]},{"id":"191db3f4aacd4f54","type":"function","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Set Brightness Level","func":"var brightness = msg.data.attributes.brightness;\nconst brightness_min = 25;  // Do not make less than 1 (2.55%)\nconst brightness_max = 255; // Do not make greater than 255 (100%)\nconst brightness_step = 25;\n\nbrightness = parseInt( brightness );\n\n\n//brightness = Math.ceil( brightness + brightness_step );\nif( 'on' == msg.press_code || 'brightness_move_up' == msg.press_code )\n{ \n    brightness = Math.ceil( brightness + brightness_step );\n\n} else\n{ \n    brightness = Math.ceil( brightness - brightness_step );\n\n} // endif\n\n\nif( brightness < brightness_min )\n{ \n    brightness = brightness_max;\n\n} else if( brightness > brightness_max )\n{ \n    brightness = brightness_min;\n\n} // endif\n\nmsg.brightness = brightness;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":2180,"wires":[["60967315f0040565"]]},{"id":"e652e8beb2243482","type":"debug","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1450,"y":2180,"wires":[]},{"id":"cead0db4e8f2ec05","type":"api-current-state","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"If Corner Lamp is OFF","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"off","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":420,"y":2060,"wires":[["17cadfe8639999ee"],["08bb4171711a307b"]]},{"id":"3379d2c5f0df6d46","type":"debug","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":400,"wires":[]},{"id":"0c92d10980bbc11f","type":"comment","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"----- Hue Tap, Home Control -----","info":"","x":190,"y":340,"wires":[]},{"id":"1e24c652e374616d","type":"api-call-service","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Toggle Bedside Lamps","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"toggle","areaId":[],"deviceId":[],"entityId":["light.bedroom_1_bedside_lamps"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":400,"y":400,"wires":[["3379d2c5f0df6d46"]]},{"id":"d84a8005c6bbeba7","type":"api-call-service","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Toggle Backyard String Lights","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"toggle","areaId":[],"deviceId":[],"entityId":["light.backyard_string_lights"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":430,"y":580,"wires":[["3379d2c5f0df6d46"]]},{"id":"dc37777860f959f2","type":"switch","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"},{"t":"eq","v":"brightness_move_up","vt":"str"},{"t":"eq","v":"brightness_move_down","vt":"str"},{"t":"eq","v":"brightness_stop","vt":"str"}],"checkall":"false","repair":false,"outputs":5,"x":170,"y":2200,"wires":[["cead0db4e8f2ec05"],["1e60e4a06754a0f3"],["b5da29cab8251554"],["b5da29cab8251554"],["f097b40a4e67e02c"]]},{"id":"dee03074ae00cbdc","type":"api-current-state","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Get Current Brightness","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_1_bedside_lamps","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":970,"y":1800,"wires":[["3ca1851b424cb660"]]},{"id":"08bb4171711a307b","type":"api-current-state","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Get Current Brightness","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":950,"y":2180,"wires":[["191db3f4aacd4f54"]]},{"id":"3cd0806b1bfed34d","type":"delay","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":920,"y":1860,"wires":[["dee03074ae00cbdc"]]},{"id":"96c11c227394e543","type":"delay","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":900,"y":2240,"wires":[["08bb4171711a307b"]]},{"id":"141b31b82b2c02eb","type":"api-call-service","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Turn Corner Lamp OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":2120,"wires":[["d26830d4bca97ec7"]]},{"id":"6250801d5249ba07","type":"api-current-state","z":"75bda675505dd534","name":"Get Brightness","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":1040,"wires":[["3f9b5f430db4660b"]]},{"id":"7b69a238ddfbd434","type":"delay","z":"75bda675505dd534","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":860,"y":1100,"wires":[["6250801d5249ba07"]]},{"id":"b593eb4f6467ec00","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Button Press","server":"82cdeceea55f3c77","friendly_name":"Switch, Living Room for Living Room","device_id":"0x50325ffffe1e0631","state":"0","outputAtStartup":false,"filterChanges":true,"x":490,"y":2000,"wires":[[]]},{"id":"2df86f05ed60e37c","type":"change","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Set Attribute","rules":[{"t":"set","p":"press_code","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":150,"y":2120,"wires":[["dc37777860f959f2"]]},{"id":"cc15bec00fa60581","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"d46092dab47821af","name":"Button Pressed","server":"82cdeceea55f3c77","friendly_name":"Switch, Bedroom 4 for Bedroom 4","device_id":"0xb4e3f9fffea024ec","state":"0","outputAtStartup":false,"filterChanges":true,"x":460,"y":2380,"wires":[[]]},{"id":"0fef4cb1bfee9991","type":"change","z":"75bda675505dd534","g":"d46092dab47821af","name":"Set Attribute","rules":[{"t":"set","p":"press_code","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":150,"y":2500,"wires":[["d62c5c9d.ef6d18"]]},{"id":"24c2ddaa9b0285c6","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Button Press","server":"82cdeceea55f3c77","friendly_name":"Switch, Bedroom 1 for Bedroom 1","device_id":"0x50325ffffe6ca270","state":"0","outputAtStartup":false,"filterChanges":true,"x":530,"y":1620,"wires":[[]]},{"id":"bb787ff04cbcc689","type":"change","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Set Attribute","rules":[{"t":"set","p":"press_code","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":150,"y":1740,"wires":[["ac6478947365b072"]]},{"id":"bf529671432541e5","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Button Pressed","server":"82cdeceea55f3c77","friendly_name":"Switch, Hue Tap","device_id":"0x00000000004642c5","state":"0","outputAtStartup":false,"filterChanges":true,"x":140,"y":400,"wires":[["b79c3c4e0778ef6a"]]},{"id":"b79c3c4e0778ef6a","type":"change","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Set Attribute","rules":[{"t":"set","p":"press_code","pt":"msg","to":"payload.action","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":150,"y":460,"wires":[["a9f0acf44e7a59c9"]]},{"id":"a9f0acf44e7a59c9","type":"switch","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Route","property":"payload.action","propertyType":"msg","rules":[{"t":"eq","v":"toggle","vt":"str"},{"t":"eq","v":"recall_scene_0","vt":"str"},{"t":"eq","v":"recall_scene_1","vt":"str"},{"t":"eq","v":"recall_scene_2","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":170,"y":540,"wires":[["1e24c652e374616d"],["5f8cd28d7154bad9"],["da9e359576f76a32"],["d84a8005c6bbeba7"]]},{"id":"453baa88c61820a0","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Button Press","server":"82cdeceea55f3c77","friendly_name":"Switch, Foyer for Foyer","device_id":"0x00124b00251dad02","state":"0","outputAtStartup":false,"filterChanges":true,"x":390,"y":780,"wires":[[]]},{"id":"b833ad8a443495ca","type":"zigbee2mqtt-in","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"Button Press","server":"82cdeceea55f3c77","friendly_name":"Switch, Kitchen for Garage","device_id":"0x00158d00029015cf","state":"0","outputAtStartup":false,"filterChanges":true,"x":430,"y":1240,"wires":[[]]},{"id":"1e60e4a06754a0f3","type":"api-current-state","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"If Corner Lamp is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.living_room_corner_lamp","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":420,"y":2120,"wires":[["141b31b82b2c02eb"],["17cadfe8639999ee"]]},{"id":"68fce3057208e760","type":"api-current-state","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"If Bedside Lamps are ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.bedroom_1_bedside_lamps","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":430,"y":1740,"wires":[["36f68ebfdafa41a2"],["c96cb06fce36d315"]]},{"id":"ca92859fe80d1a43","type":"server-state-changed","z":"75bda675505dd534","g":"0b05817bb4d42102","name":"Button Press","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.switch_kitchen_for_garage","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":1300,"wires":[["6971f02eb5529462"]]},{"id":"c7dfac556efb9726","type":"server-state-changed","z":"75bda675505dd534","g":"abb2809c73c9bf16","name":"Button Press","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.switch_bedroom_1_for_bedroom_1","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":1680,"wires":[["bb787ff04cbcc689"]]},{"id":"10771234a898d714","type":"server-state-changed","z":"75bda675505dd534","g":"8953653722b0a6b2","name":"Button Press","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.switch_living_room_for_living_room","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":2060,"wires":[["2df86f05ed60e37c"]]},{"id":"ca05185aee5f33af","type":"server-state-changed","z":"75bda675505dd534","g":"d46092dab47821af","name":"Button Press","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.switch_bedroom_4_for_bedroom_4","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":2440,"wires":[["0fef4cb1bfee9991"]]},{"id":"99930259515b2d43","type":"server-state-changed","z":"75bda675505dd534","g":"3c888c1f5a7f12b2","name":"Button Press","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.switch_foyer_for_foyer","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":860,"wires":[["aa395cef7eb28827"]]},{"id":"fbf1e3790cbc57e3","type":"api-call-service","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Set Brightness","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_on","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"{\"brightness\":102}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":740,"y":580,"wires":[["3379d2c5f0df6d46"]]},{"id":"59216e6630c62881","type":"api-call-service","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Turn Off","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"turn_off","areaId":[],"deviceId":[],"entityId":["light.foyer_ceiling_ledge"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":720,"y":520,"wires":[["3379d2c5f0df6d46"]]},{"id":"da9e359576f76a32","type":"api-current-state","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"If Foyer Ceiling Ledge Lightstrip is ON","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.foyer_ceiling_ledge","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":450,"y":520,"wires":[["59216e6630c62881"],["fbf1e3790cbc57e3"]]},{"id":"5f8cd28d7154bad9","type":"api-call-service","z":"75bda675505dd534","g":"9369390f85b0a7e0","name":"Toggle Corner Lamp","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"light","service":"toggle","areaId":[],"deviceId":[],"entityId":["light.living_room_corner_lamp"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":400,"y":460,"wires":[["3379d2c5f0df6d46"]]},{"id":"0d46746ba8440730","type":"comment","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"----- Doors Open or Close, Send Notification -----","info":"","x":260,"y":80,"wires":[]},{"id":"b963a2ee377d2e71","type":"comment","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"----- Garage Door Usage Notifications -----","info":"","x":240,"y":1340,"wires":[]},{"id":"539dc1c9d7a3b1eb","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Alexa Notification","func":"msg.notification = \"Warning, water has been detected in the \" + msg.room + \" \" + msg.location;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":1820,"wires":[["8be476363dfd33d3"]]},{"id":"8d26ab37046c1f9a","type":"server-state-changed","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Door, Garage","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"cover.garage_door","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"opening, closing","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Garage (Cover) door","valueType":"str"}],"x":150,"y":1400,"wires":[["7cce35452bc5c875"],[]]},{"id":"7cce35452bc5c875","type":"switch","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Route","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"opening","vt":"str"},{"t":"eq","v":"closing","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":1400,"wires":[["68a78ab1a08de10a"],["68a78ab1a08de10a"]]},{"id":"0952a2ee0d589e03","type":"comment","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"----- Leak/Water is Detected, Send Notification -----","info":"","x":270,"y":1700,"wires":[]},{"id":"c779d0a765e3d78d","type":"comment","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"----- Front Door Left Unlocked, Send Notification -----","info":"","x":270,"y":2260,"wires":[]},{"id":"3a4231a2e53f04e3","type":"inject","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Trigger: ACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"active","payloadType":"str","x":200,"y":2400,"wires":[["aaf36abb2aa6af60"]]},{"id":"16cc91349e008901","type":"bigtimer","z":"948139bb1964bc5a","g":"a2caccdf611fb758","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"Sunset to Midnight","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"5004","endtime":"0","starttime2":0,"endtime2":0,"startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":190,"y":2320,"wires":[["aaf36abb2aa6af60"],[],[]]},{"id":"b6a048bf5769c8cf","type":"api-current-state","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Is Front Door Unlocked?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"unlocked","halt_if_type":"str","halt_if_compare":"is","entity_id":"lock.front_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":2320,"wires":[["56e812d6e0542d72"],[]]},{"id":"2b7b1e49e0f35dad","type":"inject","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Trigger: INACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"inactive","payloadType":"str","x":190,"y":2460,"wires":[["aaf36abb2aa6af60"]]},{"id":"23c6f469513289a8","type":"link out","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Garage Door Activity, Send Notification","mode":"link","links":["72b133dce044ac3e","77fd5a5925a8fe38","b5bf4f1d2a2db4f8","f5ce6c4b657db2c6"],"x":1175,"y":1400,"wires":[]},{"id":"8519b53052fc2bae","type":"link out","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Garage Door Left Open, Send Notification","mode":"link","links":["72b133dce044ac3e","77fd5a5925a8fe38","b5bf4f1d2a2db4f8","f5ce6c4b657db2c6"],"x":1155,"y":2320,"wires":[]},{"id":"a8e6cda928e350b6","type":"link out","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Leak Detected, Send Notification (iOS)","mode":"link","links":["72b133dce044ac3e","77fd5a5925a8fe38","b5bf4f1d2a2db4f8","f5ce6c4b657db2c6"],"x":1055,"y":1760,"wires":[]},{"id":"6b25673ada107590","type":"link out","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Household Door Activity, Send Notification","mode":"link","links":["72b133dce044ac3e","77fd5a5925a8fe38","b5bf4f1d2a2db4f8","f5ce6c4b657db2c6"],"x":1315,"y":220,"wires":[]},{"id":"aaf36abb2aa6af60","type":"switch","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":420,"y":2320,"wires":[["d5ef7b3634b07679"],[]]},{"id":"7aea4a101153a0b6","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Persistant Notification","func":"msg.notification = { \n    data : {\n        \"title\"   : \"Water Leak Detected\",\n        \"message\": \"Water has been detected in the \" + msg.room + \" \" + msg.location + \".\"\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":1880,"wires":[["e0b6b365e87fb6b5"]]},{"id":"e0b6b365e87fb6b5","type":"link out","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Leak Detected, Send Notification (Home Assistant)","mode":"link","links":["a2729e8ee4af65f5"],"x":1095,"y":1880,"wires":[]},{"id":"8be476363dfd33d3","type":"link out","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Leak Detected, Send Notification (Alexa)","mode":"link","links":["064a1785b9c6a8a0","b9d4c31f4c3cc017","b9fb615b89979085","e3f52efe96ae8364","f9e0b7ba2c681f39","fa75df9d99a78852"],"x":1055,"y":1820,"wires":[]},{"id":"c6d8e1b43823a5dc","type":"function","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Prepare iOS Notification","func":"const name = msg.friendly_name; // Custom attribute name\nconst state = ( msg.payload === 'on' ) ? \"opened\" : \"closed\";\n\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"The \" + name + \" has been \" + state,\n        \"data\"    : { \n            \"subtitle\": false,\n            \"actions\" : [\n                { \n                    action : \"HOUSEHOLD_ACTIVITY_SNOOZE_1HR\",\n                    title  : \"Snooze: 1 Hour\",\n                    icon   : \"sfsymbols:clock\"\n                },\n                { \n                    action      : \"HOUSEHOLD_ACTIVITY_SNOOZE_TODAY\",\n                    title       : \"Ignore\",\n                    icon        : \"sfsymbols:xmark\",\n                    destructive : true\n                }\n            ]\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":848,"y":139,"wires":[["2f20f625c192cd1e"]]},{"id":"68a78ab1a08de10a","type":"function","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Prepare iOS Notification","func":"const name = msg.friendly_name; // Custom attribute name\nconst state = ( msg.payload === \"opening\" ) ? \"opening\" : \"closing\";\n\nmsg.notification_type = 'activity_door_exterior';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\": \"The \" + name + \" is \" + state,\n        \"data\": {\n            \"subtitle\": false,\n            \"actions\": [\n                {\n                    action: \"HOUSEHOLD_ACTIVITY_SNOOZE_30MIN\",\n                    title: \"Snooze: 30 Minutes\",\n                    icon: \"sfsymbols:clock\"\n                },\n                {\n                    action: \"HOUSEHOLD_ACTIVITY_SNOOZE_1HR\",\n                    title: \"Snooze: 1 Hour\",\n                    icon: \"sfsymbols:clock\"\n                },\n                {\n                    action: \"HOUSEHOLD_ACTIVITY_SNOOZE_TODAY\",\n                    title: \"Snooze: Today\",\n                    icon: \"sfsymbols:clock\"\n                }\n            ]\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":1400,"wires":[["eacdcfdaf260a1d4"]]},{"id":"56e812d6e0542d72","type":"function","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Prepare iOS Notification","func":"msg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Oops! Your front door was left unlocked\",\n        \"data\"    : { \n            \"subtitle\": false,\n            \"actions\" : [\n                { \n                    action : \"FRONT_DOOR_LOCK\",\n                    title  : \"Lock Front Door\",\n                    icon   : \"sfsymbols:lock\"\n                },\n                { \n                    action      : \"FRONT_DOOR_SNOOZE_TODAY\",\n                    title       : \"Ignore\",\n                    icon        : \"sfsymbols:xmark\",\n                    destructive : true\n                }\n            ]\n        }\n            \n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":2400,"wires":[["c80904eb22878e87"]]},{"id":"848ffb410d7e4f62","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare iOS Notification","func":"msg.notification_type = 'critical';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\": \"Water has been detected in the \" + msg.room + \" \" + msg.location,\n        \"data\"    : { \n            \"subtitle\": false,\n            \"push\" : { \n                \"sound\" : { \n                    \"name\"     : \"US-EN-Alexa-Water-Detected-Generic.wav\",\n                    \"critical\" : 1,\n                    \"volume\"   : 1\n                }\n            }\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":1760,"wires":[["a8e6cda928e350b6"]]},{"id":"fd147829f79e871a","type":"trigger-state","z":"948139bb1964bc5a","d":true,"g":"2a7a5bd2ac8e1c46","name":"Stale Backups","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.backups_stale","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":150,"y":4440,"wires":[["cbabbdf4c0ece489","1f6a899ad824a749"],[]]},{"id":"cbabbdf4c0ece489","type":"function","z":"948139bb1964bc5a","g":"2a7a5bd2ac8e1c46","name":"Prepare iOS Notification","func":"msg.notification_type = 'general';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"An error occurred while running backups\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":410,"y":4440,"wires":[["8ccc6e2bce0ab81f"]]},{"id":"8ccc6e2bce0ab81f","type":"link out","z":"948139bb1964bc5a","g":"2a7a5bd2ac8e1c46","name":"Backups Stale, Send Notification","mode":"link","links":["b5bf4f1d2a2db4f8","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":595,"y":4440,"wires":[]},{"id":"1f6a899ad824a749","type":"function","z":"948139bb1964bc5a","g":"2a7a5bd2ac8e1c46","name":"Prepare/Store Persistant Notification","func":"msg.notification = { \n    data : {\n        \"title\"   : \"Backup Have Gone Stale\",\n        \"message\" : \"An error occurred while running backups. This should be resolved as soon as possible.\"\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":4500,"wires":[["b9a65f55c429fd35"]]},{"id":"b9a65f55c429fd35","type":"link out","z":"948139bb1964bc5a","g":"2a7a5bd2ac8e1c46","name":"Backups Stale, Persistant Notification","mode":"link","links":["a2729e8ee4af65f5"],"x":675,"y":4500,"wires":[]},{"id":"11f8bc649bee4ded","type":"e-mail","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","server":"smtp.gmail.com","port":"465","secure":true,"tls":true,"name":"casamaxson+homeassistant@gmail.com","dname":"","x":1200,"y":1940,"wires":[]},{"id":"bf8f7ff097449bb7","type":"comment","z":"948139bb1964bc5a","g":"2a7a5bd2ac8e1c46","name":"----- Backups Gone Stale, Send Notification -----","info":"","x":260,"y":4380,"wires":[]},{"id":"f69152fd9615e388","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Email Notification","func":"const d = new Date();\nconst h = d.getHours();\nconst m = d.getMinutes();\n\nmsg = { \n    \"topic\"   : \"WARNING! Water Detected at Home.\",\n    \"payload\": \"The \" + msg.friendly_name + \" has detected the presence of water at\" + h + \":\" + m,\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":1940,"wires":[["11f8bc649bee4ded"]]},{"id":"7118a48e68688bb8","type":"comment","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"----- Temperature to High for Device -----","info":"","x":230,"y":3260,"wires":[]},{"id":"b365d449119baa70","type":"server-state-changed","z":"948139bb1964bc5a","d":true,"g":"7fbcda953d53c56b","name":"Freezer Temperature","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.temp_freezer_temperature","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"15","halt_if_type":"num","halt_if_compare":"gte","outputs":2,"output_only_on_state_change":true,"for":"15","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":3320,"wires":[["2882055dd098430e"],[]]},{"id":"932e85ab244d80e2","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare iOS Notification","func":"const degrees = msg.payload;\n\nmsg.notification_type = 'critical';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"The kitchen freezer is currently at \" + degrees + \", and has been over 10 for longer than 15 minutes.\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":3320,"wires":[["df33dbf3fdbae692"]]},{"id":"df33dbf3fdbae692","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Freezer Fault, Send Notification","mode":"link","links":["5e5bd58cf6de87d0","b7db4f44c09f82ea","e1e31909fc6aa692"],"x":645,"y":3320,"wires":[]},{"id":"6a042d145daea3b0","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare iOS Notification","func":"const degrees = msg.payload;\n\nmsg.notification_type = 'critical';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"The kitchen refrigerator is currently at \" + degrees + \", and has been over 50 for longer than 15 minutes.\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":3540,"wires":[["36bdebec6ee91fe3"]]},{"id":"36bdebec6ee91fe3","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Refrigerator Fault, Send Notification","mode":"link","links":["5e5bd58cf6de87d0","b7db4f44c09f82ea","e1e31909fc6aa692"],"x":675,"y":3540,"wires":[]},{"id":"e975ca0adb158f5f","type":"inject","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Trigger: 16","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"16","payloadType":"num","x":200,"y":3440,"wires":[["932e85ab244d80e2","ee5f7ac9c43720cd","0854fbd251b10ead"]]},{"id":"da23c347ee0484dc","type":"inject","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Trigger: 51","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"51","payloadType":"num","x":230,"y":3660,"wires":[["6a042d145daea3b0","e288d2c91c14a96e","fe61967bf161f58f"]]},{"id":"f5810ad2a121d7f5","type":"server-state-changed","z":"948139bb1964bc5a","d":true,"g":"7fbcda953d53c56b","name":"Refrigerator Temperature","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.temp_refrigerator_temperature","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"50","halt_if_type":"num","halt_if_compare":"gte","outputs":2,"output_only_on_state_change":true,"for":"15","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":3540,"wires":[["4cfb653c1f115c2c"],[]]},{"id":"ee5f7ac9c43720cd","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare/Store Persistant Notification","func":"const degrees = msg.payload;\n\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Warning! The kitchen freezer temperature is on the rise. It is currently at \" + degrees + \", and has been over 10 for longer than 15 minutes.\"\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":3380,"wires":[["e641a7b231760ed2"]]},{"id":"e641a7b231760ed2","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Freezer Fault, Persistant Notification","mode":"link","links":["a2729e8ee4af65f5"],"x":735,"y":3380,"wires":[]},{"id":"e288d2c91c14a96e","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare/Store Persistant Notification","func":"const degrees = msg.payload;\n\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Warning! The kitchen refrigerator temperature is on the rise. It is currently at \" + degrees + \", and has been over 50 for longer longer than 15 minutes.\"\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":3600,"wires":[["189c2f3c3581250e"]]},{"id":"189c2f3c3581250e","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Refrigerator Fault, Persistant Notification","mode":"link","links":["a2729e8ee4af65f5","b9fb615b89979085"],"x":765,"y":3600,"wires":[]},{"id":"2882055dd098430e","type":"delay","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"20","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":190,"y":3380,"wires":[["932e85ab244d80e2","ee5f7ac9c43720cd"]]},{"id":"4cfb653c1f115c2c","type":"delay","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"20","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":220,"y":3600,"wires":[["6a042d145daea3b0","e288d2c91c14a96e"]]},{"id":"0854fbd251b10ead","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare Alexa Notification","func":"const degrees = msg.payload;\n\nmsg.notification = \"Warning! The kitchen freezer temperature is on the rise. It is currently at \" + degrees + \", and has been over 10 for longer than 15 minutes.\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":3440,"wires":[["b8f60790ac1aa5c6"]]},{"id":"b8f60790ac1aa5c6","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Freezer Fault, Alexa Notification","mode":"link","links":["064a1785b9c6a8a0","b9d4c31f4c3cc017","b9fb615b89979085","e3f52efe96ae8364","f9e0b7ba2c681f39","fa75df9d99a78852"],"x":645,"y":3440,"wires":[]},{"id":"fe61967bf161f58f","type":"function","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Prepare Alexa Notification","func":"const degrees = msg.payload;\n\nmsg.notification = \"Warning! The kitchen refrigerator temperature is on the rise. It is currently at \" + degrees + \", and has been over 50 for longer than 15 minutes.\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":3660,"wires":[["1d4347f55d10d1e9"]]},{"id":"1d4347f55d10d1e9","type":"link out","z":"948139bb1964bc5a","g":"7fbcda953d53c56b","name":"Refrigerator Fault, Alexa Notification","mode":"link","links":["064a1785b9c6a8a0","b9d4c31f4c3cc017","b9fb615b89979085","e3f52efe96ae8364","f9e0b7ba2c681f39","fa75df9d99a78852"],"x":675,"y":3660,"wires":[]},{"id":"26970241b0954a94","type":"comment","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"----- Low Battery Level for Devices, Send Notification -----","info":"","x":290,"y":700,"wires":[]},{"id":"9b8508b0edc4f55a","type":"inject","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Trigger: ACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"active","payloadType":"str","x":180,"y":840,"wires":[["aac23615626ff38d"]]},{"id":"aac23615626ff38d","type":"switch","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":760,"wires":[["c8be4bb59ede9d76"],[]]},{"id":"293b8bc84ea48dde","type":"bigtimer","z":"948139bb1964bc5a","g":"52a2267cd3f77359","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"Daily, At Noon","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"720","endtime":"10001","starttime2":"0","endtime2":"0","startoff":"0","endoff":"0","startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":160,"y":760,"wires":[[],["aac23615626ff38d"],[]]},{"id":"062c51f7d411b10d","type":"api-current-state","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Is SNOOZED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.front_door_unlocked_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":970,"y":2400,"wires":[[],["8519b53052fc2bae"]]},{"id":"d5ef7b3634b07679","type":"delay","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"20","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":440,"y":2400,"wires":[["b6a048bf5769c8cf"]]},{"id":"c80904eb22878e87","type":"api-current-state","z":"948139bb1964bc5a","g":"a2caccdf611fb758","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.front_door_unlocked_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":980,"y":2320,"wires":[["062c51f7d411b10d"],[]]},{"id":"2f20f625c192cd1e","type":"api-current-state","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.household_activity_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1100,"y":140,"wires":[["97e968a2365c92c3"],[]]},{"id":"97e968a2365c92c3","type":"api-current-state","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Is SNOOZED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_activity_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1090,"y":220,"wires":[[],["6b25673ada107590"]]},{"id":"eacdcfdaf260a1d4","type":"api-current-state","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.household_activity_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":960,"y":1400,"wires":[["78ee4aa4f4d7e037"],[]]},{"id":"78ee4aa4f4d7e037","type":"api-current-state","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Is SNOOZED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_activity_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":1480,"wires":[[],["23c6f469513289a8"]]},{"id":"2e73d3ccee8d972c","type":"function","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Prepare iOS Notification","func":"msg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Oops! The Garage (Cover) door was left open\",\n        \"data\"    : { \n            \"subtitle\": false,\n            \"push\" : { \n                \"sound\" : { \n                    \"name\"   : \"US-EN-Daisy-Garage-Door-Open.wav\",\n                    \"volume\" : 1\n                }\n            },\n            \"actions\" : [\n                { \n                    action : \"GARAGE_DOOR_CLOSE\",\n                    title  : \"Close Garage Door\",\n                    icon   : \"sfsymbols:door.garage.closed\"\n                },\n                { \n                    action : \"GARAGE_DOOR_SNOOZE_1HR\",\n                    title  : \"Snooze\",\n                    icon   : \"sfsymbols:clock\"\n                },\n                { \n                    action      : \"GARAGE_DOOR_SNOOZE_TODAY\",\n                    title       : \"Ignore\",\n                    icon        : \"sfsymbols:xmark\",\n                    destructive : true\n                }\n            ]\n        }\n            \n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":1560,"wires":[["eacdcfdaf260a1d4"]]},{"id":"e26d20461f8bf2d6","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Sliding Door, Living Room","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_living","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Living Room Sliding Glass door","valueType":"str"}],"x":230,"y":260,"wires":[["ea7898cf98c1f3a2"],[]]},{"id":"b0d4b0345dc6f620","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Laundry Room","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_laundry","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Laundry Room door","valueType":"str"}],"x":250,"y":320,"wires":[["78c61ee070bf9e01"],[]]},{"id":"bcfa23241d3d0e1b","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Bedroom 1 (Main)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_bedroom_1","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Main Bedroom door","valueType":"str"}],"x":240,"y":380,"wires":[["78c61ee070bf9e01"],[]]},{"id":"d2bf35758a98bf99","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Bedroom 2 (Guest)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_bedroom_2","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Guest Bedroom door","valueType":"str"}],"x":230,"y":440,"wires":[["78c61ee070bf9e01"],[]]},{"id":"30046c4972d92b55","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Bedroom 3 (Office, Hers)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_bedroom_3","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Jess' Office door","valueType":"str"}],"x":210,"y":500,"wires":[["78c61ee070bf9e01"],[]]},{"id":"0bc16ebac3c10591","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Bedroom 4 (Office, His)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_bedroom_4","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Tom's Office door","valueType":"str"}],"x":220,"y":560,"wires":[["78c61ee070bf9e01"],[]]},{"id":"2f5cd294e37eebe8","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Air Conditioner, Foyer","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_air_conditioner","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":240,"y":1760,"wires":[["5e2402b400e0069f"],[]]},{"id":"321a3a8d99208af6","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Washing Machine, Laundry Room","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_washing_machine_laundry","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":210,"y":1820,"wires":[["41991e49c80e4cb8"],[]]},{"id":"218b9a93a0633e77","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Sink, Kitchen","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_sink_kitchen","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":270,"y":1880,"wires":[["6970f13d29a9a428"],[]]},{"id":"f69b363c31856755","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Sink, Main Bathroom (His)","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_sink_main_bathroom_his","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":230,"y":1940,"wires":[["91712286c8ce5074"],[]]},{"id":"039cd734cfed78ae","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Sink, Main Bathroom (Hers)","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_sink_main_bathroom_hers","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":2000,"wires":[["9f66152217a79d06"],[]]},{"id":"d43e4579dab3f7df","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Sink, Guest Bathroom","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_sink_guest_bathroom","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":240,"y":2060,"wires":[["c0c1598787a880a3"],[]]},{"id":"092fdb9b732b56fa","type":"trigger-state","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Sink, Half Bathroom","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.leak_sink_half_bathroom","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":250,"y":2120,"wires":[["47da2af96032c2c3"],[]]},{"id":"b14f328059e1b461","type":"bigtimer","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"Sunset to Sunrise","comment":"","lat":"26.305080","lon":"-80.197180","starttime":"5004","endtime":"5003","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":"2","sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":170,"y":1480,"wires":[["544bb1edf8a33d38"],[],[]]},{"id":"544bb1edf8a33d38","type":"switch","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":1480,"wires":[["d9a6de7cc5096fe3"],[]]},{"id":"d9a6de7cc5096fe3","type":"api-current-state","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"Garage Door Open","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"open","halt_if_type":"str","halt_if_compare":"is","entity_id":"cover.garage_door","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":1560,"wires":[["60c96808fad35229"],[]]},{"id":"3d319eb43635c372","type":"comment","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"----- When Location Changes, Send Notification -----","info":"","x":270,"y":3800,"wires":[]},{"id":"17e807837ca65f6b","type":"function","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Prepare ARRIVAL iOS Notification","func":"const name = msg.data.new_state.attributes.friendly_name;\nconst location = msg.payload;\n\nmsg.notification_type = 'activity_location';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : name + \" has arrived at \" + location + \".\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":4000,"wires":[["cf5b15aa2245e096"]]},{"id":"cf5b15aa2245e096","type":"link out","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Tom Arrives at Borgata, Send Notification","mode":"link","links":["b5bf4f1d2a2db4f8","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":805,"y":4000,"wires":[]},{"id":"c7613e444b7edf2c","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Garage (Interior)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_garage","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Garage (Interior) door","valueType":"str"}],"x":240,"y":200,"wires":[["ea7898cf98c1f3a2"],[]]},{"id":"f747c188d570c9db","type":"server-state-changed","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Door, Front (Primary)","server":"1040bb61.673d75","version":4,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"binary_sensor.door_front_primary","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"on, off","halt_if_type":"str","halt_if_compare":"includes","outputs":2,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"},{"property":"friendly_name","propertyType":"msg","value":"Front (Primary) door","valueType":"str"}],"x":250,"y":140,"wires":[["ea7898cf98c1f3a2"],[]]},{"id":"be821d5e67a0b37f","type":"api-current-state","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Tom not in REGENCY","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Regency Lakes","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"person.thomas","state_type":"str","blockInputOverrides":false,"outputProperties":[],"for":"","forType":"num","forUnits":"hours","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":3920,"wires":[["17e807837ca65f6b"],[]]},{"id":"b55c8a0e5f57f4ef","type":"function","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Prepare DEPARTURE iOS Notification","func":"const name = msg.data.event.new_state.attributes.friendly_name;\nconst location = msg.payload;\n\nmsg.notification_type = 'activity_location';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : name + \" has left \" + location + \".\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":4240,"wires":[[]]},{"id":"1ad0cb43ae43dcd1","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Leo Arrives at REGENCY LAKES","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.leo"],"event":"enter","zones":["zone.regency_lakes"],"x":220,"y":3920,"wires":[["8d7cfbe35a3a9c53"]]},{"id":"8d7cfbe35a3a9c53","type":"switch","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Confirm Location Changed","property":"payload != data.old_state.state","propertyType":"jsonata","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3860,"wires":[["be821d5e67a0b37f"],[]]},{"id":"05789be1405a5c04","type":"link out","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Tom Arrives at Borgata, Send Notification","mode":"link","links":["b5bf4f1d2a2db4f8","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":825,"y":4180,"wires":[]},{"id":"3a39b2906daaa5ac","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Jess Arrives at REGENCY LAKES","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.jessica"],"event":"enter","zones":["zone.regency_lakes"],"x":220,"y":3860,"wires":[["8d7cfbe35a3a9c53"]]},{"id":"6b7cad3791a7eea6","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Dolores Arrives at REGENCY LAKES","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.dolores"],"event":"enter","zones":["zone.regency_lakes"],"x":230,"y":3980,"wires":[["8d7cfbe35a3a9c53"]]},{"id":"9fee0bcdb128d21a","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Leo Arrives at DASSAULT (FL)","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.leo"],"event":"enter","zones":["zone.dassault"],"x":210,"y":4040,"wires":[["63c97c71a58d216d"]]},{"id":"9020e9f04c93c71a","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Dolores Arrives at ST. JOSEPH'S","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.dolores"],"event":"enter","zones":["zone.st_joseph_s"],"x":220,"y":4100,"wires":[["63c97c71a58d216d"]]},{"id":"641f8f0a5a75ba1a","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Leo Departs at DASSAULT (FL)","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.leo"],"event":"leave","zones":["zone.dassault"],"x":220,"y":4180,"wires":[["fa83cd6d6ee71bb8"]]},{"id":"cb989ea02acf6d43","type":"ha-zone","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Dolores Departs at ST. JOSEPH'S","server":"1040bb61.673d75","version":0,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entities":["person.dolores"],"event":"leave","zones":["zone.st_joseph_s"],"x":230,"y":4240,"wires":[["fa83cd6d6ee71bb8"]]},{"id":"63c97c71a58d216d","type":"switch","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Confirm Location Changed","property":"payload != data.old_state.state","propertyType":"jsonata","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":4060,"wires":[["17e807837ca65f6b"],[]]},{"id":"6eb77fd71dfe2179","type":"comment","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"----- Waste Reminder Notification -----","info":"","x":230,"y":2600,"wires":[]},{"id":"72b503af050e7fca","type":"link out","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Garage Door Activity, Send Notification","mode":"link","links":["72b133dce044ac3e","77fd5a5925a8fe38","b5bf4f1d2a2db4f8","f5ce6c4b657db2c6"],"x":1195,"y":2700,"wires":[]},{"id":"c828474c0be22a0f","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.waste_reminder_take_out_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1020,"y":2700,"wires":[["46f09da25dc03c4d"],[]]},{"id":"46f09da25dc03c4d","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Is SNOOZED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.waste_reminder_take_out_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1010,"y":2780,"wires":[[],["72b503af050e7fca","5562ddc95a1aff52"]]},{"id":"526993b05ed91f8c","type":"function","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Prepare iOS Notification","func":"msg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\": \"Don't forget to take out the waste can.\",\n        \"data\"    : { \n            \"subtitle\": false,\n            \"actions\" : [\n                { \n                    action: \"WASTE_TAKE_OUT_HIDE\",\n                    title  : \"Done\",\n                    icon  : \"sfsymbols:checkmark\"\n                },\n                { \n                    action: \"WASTE_TAKE_OUT_SNOOZE_1HR\",\n                    title : \"Snooze\",\n                    icon  : \"sfsymbols:clock\"\n                },\n                { \n                    action      : \"WASTE_TAKE_OUT_SNOOZE_TODAY\",\n                    title       : \"Ignore\",\n                    icon        : \"sfsymbols:xmark\",\n                    destructive : true\n                }\n            ]\n        }\n            \n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":750,"y":2780,"wires":[["c828474c0be22a0f"]]},{"id":"79bad15a5fb4e8c1","type":"bigtimer","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"8:00 pm to Midnight","comment":"","lat":0,"lon":0,"starttime":"1200","endtime":"0","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":180,"y":2700,"wires":[[],["0744498b2a8e7773"],[]]},{"id":"0744498b2a8e7773","type":"switch","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":180,"y":2780,"wires":[["f70a8b1ab9bb5f8e"],["f70a8b1ab9bb5f8e"],[]]},{"id":"525d3e1b31ca412f","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Sidebar Reminder VISIBLE","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sidebar_display_waste_reminder","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":440,"y":2780,"wires":[["02ffc8ed438c4923"],[]]},{"id":"f70a8b1ab9bb5f8e","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Waste Day is TOMORROW","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Tomorrow","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.waste_day_solid","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":440,"y":2700,"wires":[["525d3e1b31ca412f"],[]]},{"id":"2f693999591a775b","type":"inject","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Trigger: ACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"active","payloadType":"str","x":400,"y":2840,"wires":[["526993b05ed91f8c"]]},{"id":"a9594f83577395e9","type":"comment","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"----- Waste Take Out -----","info":"","x":190,"y":2640,"wires":[]},{"id":"d8933fb60a1a0f3f","type":"bigtimer","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","outtopic":"","outpayload1":"active","outpayload2":"inactive","name":"4:00 pm to 7:00 pm","comment":"","lat":0,"lon":0,"starttime":"960","endtime":"1140","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"day7":0,"month7":0,"day8":0,"month8":0,"day9":0,"month9":0,"day10":0,"month10":0,"day11":0,"month11":0,"day12":0,"month12":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xday7":0,"xmonth7":0,"xday8":0,"xmonth8":0,"xday9":0,"xmonth9":0,"xday10":0,"xmonth10":0,"xday11":0,"xmonth11":0,"xday12":0,"xmonth12":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"randon1":false,"randoff1":false,"randon2":false,"randoff2":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":170,"y":2980,"wires":[[],["4368ab46ba3c2d0c"],[]]},{"id":"4368ab46ba3c2d0c","type":"switch","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Is Active?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"active","vt":"str"},{"t":"eq","v":"inactive","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":180,"y":3060,"wires":[["37f2998cd87abf22"],["37f2998cd87abf22"],[]]},{"id":"f7f58db737fe72bf","type":"inject","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Trigger: ACTIVE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"active","payloadType":"str","x":400,"y":3120,"wires":[["e06b88c92ea9114d"]]},{"id":"37f2998cd87abf22","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Waste Day is TODAY","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"Today","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.waste_day_solid","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":420,"y":2980,"wires":[["a344f227196256df"],[]]},{"id":"a344f227196256df","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Sidebar Reminder VISIBLE","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.sidebar_display_waste_reminder","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":440,"y":3060,"wires":[["ce2b8828f892a189"],[]]},{"id":"e06b88c92ea9114d","type":"function","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Prepare iOS Notification","func":"msg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"Don't forget to bring in the waste can.\",\n        \"data\"    : { \n            \"subtitle\": false,\n            \"actions\" : [\n                { \n                    action : \"WASTE_BRING_IN_HIDE\",\n                    title  : \"Done\",\n                    icon   : \"sfsymbols:checkmark\"\n                },\n                { \n                    action : \"WASTE_BRING_IN_SNOOZE_1HR\",\n                    title  : \"Snooze: \",\n                    icon   : \"sfsymbols:clock\"\n                },\n                { \n                    action      : \"WASTE_BRING_IN_SNOOZE_TODAY\",\n                    title       : \"Ignore\",\n                    icon        : \"sfsymbols:xmark\",\n                    destructive : true\n                }\n            ]\n        }\n            \n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":750,"y":3060,"wires":[["1eeaba8e960e2c44"]]},{"id":"1eeaba8e960e2c44","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Timer Is Idle?","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"idle","halt_if_type":"str","halt_if_compare":"is","entity_id":"timer.waste_reminder_bring_in_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1020,"y":2980,"wires":[["96997e620aa7c16f"],[]]},{"id":"96997e620aa7c16f","type":"api-current-state","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Is SNOOZED","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.waste_reminder_bring_in_snooze","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1010,"y":3060,"wires":[[],["25dd1cf0c9178ade","6e961fd77f3a44d9"]]},{"id":"25dd1cf0c9178ade","type":"link out","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"Garage Door Activity, Send Notification","mode":"link","links":["0afd84020e41df91","b5bf4f1d2a2db4f8","eb19baaad61d9a94","2390dbfc9a79785a","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":1195,"y":2980,"wires":[]},{"id":"25b653da6bfe7a2b","type":"comment","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"----- Waste Bring In -----","info":"","x":190,"y":2920,"wires":[]},{"id":"5562ddc95a1aff52","type":"debug","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"debug","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1250,"y":2780,"wires":[]},{"id":"6e961fd77f3a44d9","type":"debug","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"debug","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1250,"y":3060,"wires":[]},{"id":"fa83cd6d6ee71bb8","type":"switch","z":"948139bb1964bc5a","g":"931f2c0cfb587811","name":"Confirm Location Changed","property":"payload != data.old_state.state","propertyType":"jsonata","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":4180,"wires":[["b55c8a0e5f57f4ef"],[]]},{"id":"9b86dfa08000eb2a","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Front (Primary)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_front_primary_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Front (Primary) door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":760,"wires":[["5945a93a4f6dc91f"]]},{"id":"96d6e8cf058a4215","type":"function","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Prepare iOS Notification","func":"const name = msg.friendly_name;\nconst percent = msg.battery_level;\n\nmsg.notification_type = 'warning';\nmsg.notification = { \n    data : {\n        \"title\"   : \"Home Assistant\",\n        \"message\" : \"The \" + name + \" is at \" + percent + \"%. Replace battery soon!\",\n        \"data\"    : { \n            \"subtitle\": false\n        }\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2830,"y":920,"wires":[["31b5663484594e93"]]},{"id":"31b5663484594e93","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Battery Level Low, Send Notification","mode":"link","links":["0afd84020e41df91","b5bf4f1d2a2db4f8","eb19baaad61d9a94","2390dbfc9a79785a","77fd5a5925a8fe38","f5ce6c4b657db2c6","72b133dce044ac3e"],"x":3015,"y":920,"wires":[]},{"id":"f54387e9d247f166","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Garage (Interior)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_garage_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Garage (Interior) door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":820,"wires":[["5945a93a4f6dc91f"]]},{"id":"dd59fb911819f06c","type":"switch","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Filter Battery Level Percentage","property":"battery_level","propertyType":"msg","rules":[{"t":"lte","v":"30","vt":"num"},{"t":"gt","v":"30","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":2850,"y":840,"wires":[["96d6e8cf058a4215"],[]]},{"id":"10b865af0575117b","type":"function","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Prepare Battery Level","func":"msg.battery_level = parseInt( msg.payload );\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2820,"y":760,"wires":[["dd59fb911819f06c"]]},{"id":"597a3aad35484c6c","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Sliding Door, Living Room","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_living_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Living Room Sliding Glass door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":880,"wires":[["5945a93a4f6dc91f"]]},{"id":"57289ff556ab4d68","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Laundry Room","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_living_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Laundry Room door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":940,"wires":[["5945a93a4f6dc91f"]]},{"id":"5945a93a4f6dc91f","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door Battery Output","mode":"link","links":["489c309a15b0265e"],"x":935,"y":820,"wires":[]},{"id":"489c309a15b0265e","type":"link in","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Battery Notication Configure","links":["4be2637d2f7d2980","5945a93a4f6dc91f","5cf1ef932028165d","264e0ca52658d2a0","17eb765ff8bdb406"],"x":2635,"y":760,"wires":[["10b865af0575117b"]]},{"id":"eff2e094f280faaf","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Bedroom 1 (Main)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_bedroom_1_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Main Bedroom door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":1000,"wires":[["5945a93a4f6dc91f"]]},{"id":"95e7ca287bea9c43","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Bedroom 2 (Guest)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_bedroom_2_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Guest Bedroom door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":1060,"wires":[["5945a93a4f6dc91f"]]},{"id":"63806c6f9077d801","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Bedroom 3 (Office, Hers)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_bedroom_3_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Jess' Office door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":1120,"wires":[["5945a93a4f6dc91f"]]},{"id":"bd2051d8c9de0fd1","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door, Bedroom 4 (Office, His)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.door_bedroom_4_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Tom's Office door sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":1180,"wires":[["5945a93a4f6dc91f"]]},{"id":"64ed2d9b35d3efa8","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Air Conditioner, Foyer","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_air_conditioner_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Air Conditioner leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1200,"y":760,"wires":[["4be2637d2f7d2980"]]},{"id":"4be2637d2f7d2980","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Leak Battery Output","mode":"link","links":["489c309a15b0265e"],"x":1455,"y":820,"wires":[]},{"id":"609661093ded7d8c","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Leak, Bathroom Sink (Guest)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_guest_bathroom_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Guest Bathroom Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1220,"y":1060,"wires":[["4be2637d2f7d2980"]]},{"id":"774cf9b85a6a6596","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Leak, Bathroom Sink (Half)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_half_bathroom_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Half Bathroom Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1220,"y":1120,"wires":[["4be2637d2f7d2980"]]},{"id":"e059106103611411","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Sink, Main Bathroom (Hers)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_main_bathroom_hers_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Her Bathroom Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1220,"y":940,"wires":[["4be2637d2f7d2980"]]},{"id":"be4193cc20563f8d","type":"link in","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Door Battery Input","links":["c8be4bb59ede9d76"],"x":515,"y":760,"wires":[["9b86dfa08000eb2a","f54387e9d247f166","597a3aad35484c6c","eff2e094f280faaf","57289ff556ab4d68","95e7ca287bea9c43","63806c6f9077d801","bd2051d8c9de0fd1"]]},{"id":"c8be4bb59ede9d76","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Initialize Battery Output","mode":"link","links":["08b204d763442da7","19d96c2d1026274d","3a9bbf474381fa2a","be4193cc20563f8d"],"x":405,"y":820,"wires":[]},{"id":"3a9bbf474381fa2a","type":"link in","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Leak Battery Input","links":["c8be4bb59ede9d76"],"x":1035,"y":760,"wires":[["64ed2d9b35d3efa8","e059106103611411","609661093ded7d8c","774cf9b85a6a6596","c2469ee120f3a394","f52c5f09fb56c2a8","2cc30b6b91c9962e","f36192f1becaa4d9"]]},{"id":"2cc30b6b91c9962e","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Sink, Kitchen","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_kitchen_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Kitchen Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1170,"y":880,"wires":[["4be2637d2f7d2980"]]},{"id":"f52c5f09fb56c2a8","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Washing Machine, Laundry Room","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_half_bathroom_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Half Bathroom Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1240,"y":820,"wires":[[]]},{"id":"c2469ee120f3a394","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Sink, Main Bathroom (His)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_sink_main_bathroom_his_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"His Bathroom Sink leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1210,"y":1000,"wires":[["4be2637d2f7d2980"]]},{"id":"08b204d763442da7","type":"link in","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Other Battery Input","links":["c8be4bb59ede9d76"],"x":2095,"y":760,"wires":[["cc37a7a5a5f7b233","a3a5de911d6c1179","81fbb3c97eef0c34","e6fdaa36135bbcb8","60bfe31fa4878b1c","56f76aa3cbd7aad4"]]},{"id":"cc37a7a5a5f7b233","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Motion, Laundry Room","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.motion_laundry_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Laundry Room motion sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2280,"y":1060,"wires":[["264e0ca52658d2a0"]]},{"id":"264e0ca52658d2a0","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Other Battery Output","mode":"link","links":["489c309a15b0265e"],"x":2535,"y":820,"wires":[]},{"id":"a3a5de911d6c1179","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Remote, Bedroom 1 for Bedroom 1","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.switch_bedroom_1_for_bedroom_1_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Bedroom 1 remote","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2320,"y":760,"wires":[["264e0ca52658d2a0"]]},{"id":"81fbb3c97eef0c34","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Remote, Bedroom 4 for Bedroom 4","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.switch_bedroom_4_for_bedroom_4_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Bedroom 4 remote","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2320,"y":820,"wires":[["264e0ca52658d2a0"]]},{"id":"e6fdaa36135bbcb8","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Remote, Foyer for Foyer","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.switch_foyer_for_foyer_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Foyer remote","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2290,"y":880,"wires":[["264e0ca52658d2a0"]]},{"id":"60bfe31fa4878b1c","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Remote, Kitchen for Garage","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.switch_kitchen_for_garage_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Kitchen remote","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2300,"y":940,"wires":[["264e0ca52658d2a0"]]},{"id":"56f76aa3cbd7aad4","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Remote, Living Room for Living Room","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.switch_living_room_for_living_room_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Living Room remote","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2330,"y":1000,"wires":[["264e0ca52658d2a0"]]},{"id":"a9e019030531d5c9","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature, Wine Cooler (Top)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.temp_wine_cooler_top_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Wine Cooler (Top) temperature sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1770,"y":940,"wires":[["17eb765ff8bdb406"]]},{"id":"f36192f1becaa4d9","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Leak, Wine Cooler","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.leak_wine_cooler_bar_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Wine Cooler leak sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1190,"y":1180,"wires":[["4be2637d2f7d2980"]]},{"id":"22645e14f2d66897","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature, Wine Cooler (Bottom)","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.temp_wine_cooler_bottom_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Wine Cooler (Bottom) temperature sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1780,"y":1000,"wires":[["17eb765ff8bdb406"]]},{"id":"0f62c422191f3c5c","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature, Refrigerator","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.temp_refrigerator_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Refigerator temperature sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1750,"y":820,"wires":[["17eb765ff8bdb406"]]},{"id":"10188eaf769b5b4f","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature, Freezer","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.temp_freezer_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Freezer temperature sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1740,"y":880,"wires":[[]]},{"id":"5e10ba1311d74136","type":"api-current-state","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature, Attic","server":"1040bb61.673d75","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.temp_attic_battery","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"friendly_name","propertyType":"msg","value":"Attic temperature sensor","valueType":"str"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1730,"y":760,"wires":[["17eb765ff8bdb406"]]},{"id":"19d96c2d1026274d","type":"link in","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature Battery Input","links":["c8be4bb59ede9d76"],"x":1555,"y":760,"wires":[["5e10ba1311d74136","0f62c422191f3c5c","10188eaf769b5b4f","a9e019030531d5c9","22645e14f2d66897"]]},{"id":"17eb765ff8bdb406","type":"link out","z":"948139bb1964bc5a","g":"52a2267cd3f77359","name":"Temperature Battery Output","mode":"link","links":["489c309a15b0265e"],"x":1995,"y":820,"wires":[]},{"id":"02ffc8ed438c4923","type":"delay","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":720,"y":2700,"wires":[["526993b05ed91f8c"]]},{"id":"ce2b8828f892a189","type":"delay","z":"948139bb1964bc5a","g":"3d111a6d8f2d610a","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":720,"y":2980,"wires":[["e06b88c92ea9114d"]]},{"id":"ea7898cf98c1f3a2","type":"function","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Prepare iOS Notification Type","func":"msg.notification_type = 'activity_door_exterior';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":140,"wires":[["c6d8e1b43823a5dc"]]},{"id":"78c61ee070bf9e01","type":"function","z":"948139bb1964bc5a","g":"ced32fcc854281a5","name":"Prepare iOS Notification Type","func":"msg.notification_type = 'activity_door_interior';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":320,"wires":[["c6d8e1b43823a5dc"]]},{"id":"60c96808fad35229","type":"delay","z":"948139bb1964bc5a","g":"5df1c59ae220dac5","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"20","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":660,"y":1480,"wires":[["2e73d3ccee8d972c"]]},{"id":"5a9b8a593022a4cc","type":"comment","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"----- Laundry Complete -----","info":"","x":1580,"y":80,"wires":[]},{"id":"fa4a123c463666e9","type":"function","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Prepare Alexa Notification","func":"const degrees = msg.payload;\n\nmsg.notification = \"Your washed clothes are ready to be dried.\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2330,"y":140,"wires":[["491012938a8df3df"]]},{"id":"491012938a8df3df","type":"link out","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Washer Cycle Complete, Alexa Notification","mode":"link","links":["064a1785b9c6a8a0","b9d4c31f4c3cc017","b9fb615b89979085","e3f52efe96ae8364","f9e0b7ba2c681f39","fa75df9d99a78852"],"x":2515,"y":140,"wires":[]},{"id":"10ff9389d2759db9","type":"trigger-state","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Washer Cycle Complete","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"sensor.laundry_washer_machine_state","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Run"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Finished"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1570,"y":140,"wires":[["7dc9dae958fa0afb"],[]]},{"id":"a36ce9d743a7b4e4","type":"trigger-state","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Dryer Cycle Complete","server":"1040bb61.673d75","version":2,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"sensor.laundry_dryer_machine_state","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","propertyValue":"old_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Run"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","propertyValue":"new_state.state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"Finished"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":1560,"y":300,"wires":[["8ced5b9f06ad2806"],[]]},{"id":"b106ddb20cb58a94","type":"function","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Prepare Alexa Notification","func":"const degrees = msg.payload;\n\nmsg.notification = \"Your dried clothes are ready to be folded.\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2310,"y":300,"wires":[["b7edd6e7118a40eb"]]},{"id":"b7edd6e7118a40eb","type":"link out","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Dryer Cycle Complete, Alexa Notification","mode":"link","links":["064a1785b9c6a8a0","b9d4c31f4c3cc017","b9fb615b89979085","e3f52efe96ae8364","f9e0b7ba2c681f39","fa75df9d99a78852"],"x":2495,"y":300,"wires":[]},{"id":"7dc9dae958fa0afb","type":"time-range-switch","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Only between 7am - 9pm","lat":"26.305080","lon":"-80.197180","startTime":"7:00","endTime":"21:00","startOffset":"","endOffset":"","x":1850,"y":140,"wires":[["80fe987c31d55e24"],[]]},{"id":"8ced5b9f06ad2806","type":"time-range-switch","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Only between 7am - 9pm","lat":"26.305080","lon":"-80.197180","startTime":"7:00","endTime":"21:00","startOffset":"","endOffset":"","x":1830,"y":300,"wires":[["133a35a444987b17"],[]]},{"id":"5e2402b400e0069f","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'foyer';\nmsg.location = 'at the bottom of the air conditioner';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":1760,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"41991e49c80e4cb8","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'laundry room';\nmsg.location = 'under the washing machine';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":1820,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"6970f13d29a9a428","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'kitchen';\nmsg.location = 'under the sink';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":1880,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"91712286c8ce5074","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'main bathroom';\nmsg.location = 'under the right sink';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":1940,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"9f66152217a79d06","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'main bathroom';\nmsg.location = 'under the left sink';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":2000,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"c0c1598787a880a3","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'guest bathroom';\nmsg.location = 'under the sink';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":2060,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"47da2af96032c2c3","type":"function","z":"948139bb1964bc5a","g":"b4dea0a7c8b7a32a","name":"Prepare Message Details","func":"msg.room     = 'half bathroom';\nmsg.location = 'under the sink';\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":2120,"wires":[["848ffb410d7e4f62","539dc1c9d7a3b1eb","7aea4a101153a0b6"]]},{"id":"80fe987c31d55e24","type":"api-call-service","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Turn Flag ON ","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.reminder_laundry_complete_washer"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1810,"y":220,"wires":[["fa4a123c463666e9"]]},{"id":"133a35a444987b17","type":"api-call-service","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"Turn Flag ON ","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.reminder_laundry_complete_dryer"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1790,"y":380,"wires":[["b106ddb20cb58a94"]]},{"id":"49dc585b87420a49","type":"ha-wait-until","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"","server":"1040bb61.673d75","version":1,"outputs":2,"entityId":"input_boolean.reminder_laundry_complete_washer","entityIdFilterType":"exact","property":"state","comparator":"is_not","value":"on","valueType":"str","timeout":"10","timeoutType":"num","timeoutUnits":"minutes","entityLocation":"","entityLocationType":"none","checkCurrentState":true,"blockInputOverrides":true,"x":2100,"y":140,"wires":[[],["7d8abea773b5358f","fa4a123c463666e9"]]},{"id":"7d8abea773b5358f","type":"function","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"placeholder","func":"// Needed because you cant link a node to itself.\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2110,"y":220,"wires":[["49dc585b87420a49"]]},{"id":"be92547e75f10fb4","type":"function","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"placeholder","func":"// Needed because you cant link a node to itself.\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2090,"y":360,"wires":[["dcd205bb71e96443"]]},{"id":"dcd205bb71e96443","type":"ha-wait-until","z":"948139bb1964bc5a","g":"a1741ef23732bce4","name":"","server":"1040bb61.673d75","version":1,"outputs":2,"entityId":"input_boolean.reminder_laundry_complete_dryer","entityIdFilterType":"exact","property":"state","comparator":"is_not","value":"on","valueType":"str","timeout":"10","timeoutType":"num","timeoutUnits":"minutes","entityLocation":"","entityLocationType":"none","checkCurrentState":true,"blockInputOverrides":true,"x":2080,"y":300,"wires":[["b106ddb20cb58a94","be92547e75f10fb4"],[]]},{"id":"046f6c6c85c10a7a","type":"comment","z":"4e1d02e135536c14","name":"----- Send iOS Notification -----","info":"","x":190,"y":260,"wires":[]},{"id":"a2729e8ee4af65f5","type":"link in","z":"4e1d02e135536c14","g":"ac8b5c16b46e9c89","name":"Send Persistant Home Assistant Notification","links":["e0b6b365e87fb6b5","b9a65f55c429fd35","e641a7b231760ed2","189c2f3c3581250e","efebe7b287125af2","7dc095058e8db59c","0b17ec9fad7f7b3d","3a8eb56ab19e9222"],"x":85,"y":140,"wires":[["34c20fee04f5acb2"]]},{"id":"634407b9c4245106","type":"api-call-service","z":"4e1d02e135536c14","g":"ac8b5c16b46e9c89","name":"Send Persistant Notification","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"persistent_notification","service":"create","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":530,"y":140,"wires":[["e9187377527269cb"]]},{"id":"e9187377527269cb","type":"debug","z":"4e1d02e135536c14","g":"ac8b5c16b46e9c89","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":760,"y":140,"wires":[]},{"id":"23bf231d5f92d898","type":"link in","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"Send Audible Notification, RECIEVER (DO NOT SEND TO)","links":["06d2f5e90b465001","3a01748301fe8498","915f38fb1e724141","d892463cc91098f1","e4967201c6355ab0","e6130a39a2ab366a"],"x":115,"y":1400,"wires":[["5c045c6f71cafd52"]]},{"id":"8a0b2594a3296c88","type":"comment","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"----- Send Alexa Notification -----","info":"","x":230,"y":1340,"wires":[]},{"id":"a62008d8914b95a2","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo, Kitchen -----","info":"","x":200,"y":1520,"wires":[]},{"id":"1d6d45ce35d1f8fb","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo Dot, Bedroom 1 (Main) -----","info":"","x":250,"y":1680,"wires":[]},{"id":"fa75df9d99a78852","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, KITCHEN","links":["8be476363dfd33d3","2d78febda41962f1","b8f60790ac1aa5c6","1d4347f55d10d1e9","491012938a8df3df","5c055fb9ef39363a","b7edd6e7118a40eb"],"x":115,"y":1580,"wires":[["86fa6b8d15a3bd95"]]},{"id":"8363ca529c5b4620","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo Dot, Bedroom 2 (Guest) -----","info":"","x":870,"y":1680,"wires":[]},{"id":"a425ce3a062da4e5","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo Dot, Bedroom 3 (Office, Hers) -----","info":"","x":270,"y":1840,"wires":[]},{"id":"8a1a871a9a68c76c","type":"function","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"Setup Notification","func":"msg.payload = {\n    data : {\n        \"message\"      : msg.notification,\n        \"data\"         : { \n            \"type\" : \"announce\",\n            \"volume_level\" : msg.volume_level.new\n        },\n        \"target\"       : [ msg.alexa_device ]\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":1340,"wires":[["dddf15f421481e85"]]},{"id":"dddf15f421481e85","type":"api-call-service","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"Send Notification","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"alexa_media","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":550,"y":1400,"wires":[["9a29585104596ba7"]]},{"id":"9a29585104596ba7","type":"delay","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":760,"y":1400,"wires":[["17b416995544c0ca"]]},{"id":"05df8139c9f6130f","type":"api-call-service","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"MODIFY Volume Level","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"media_player","service":"volume_set","areaId":[],"deviceId":[],"entityId":["{{alexa_device}}"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1000,"y":1400,"wires":[["914500a98f1597b0"]]},{"id":"914500a98f1597b0","type":"debug","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1210,"y":1400,"wires":[]},{"id":"fd82a36789e9f0fd","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_dot_bedroom_3\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.5\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1900,"wires":[["3a01748301fe8498"]]},{"id":"f9e0b7ba2c681f39","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, BEDROOM 1 (MAIN)","links":["8be476363dfd33d3","2d78febda41962f1","b8f60790ac1aa5c6","1d4347f55d10d1e9","491012938a8df3df","5c055fb9ef39363a","b7edd6e7118a40eb"],"x":115,"y":1740,"wires":[["1a2972494879f106"]]},{"id":"3a01748301fe8498","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":635,"y":1900,"wires":[]},{"id":"c722151add88f640","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_dot_bedroom_2\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.5\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":1740,"wires":[["e4967201c6355ab0"]]},{"id":"b9fb615b89979085","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, BEDROOM 2 (GUEST)","links":["189c2f3c3581250e","8be476363dfd33d3","b8f60790ac1aa5c6","0b17ec9fad7f7b3d","491012938a8df3df","b7edd6e7118a40eb","1d4347f55d10d1e9"],"x":735,"y":1740,"wires":[["b2d6fd7d25cc6c7f"]]},{"id":"e4967201c6355ab0","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":1275,"y":1740,"wires":[]},{"id":"85de72e04aaa2de6","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_dot_bedroom_1\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.5\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1740,"wires":[["d892463cc91098f1"]]},{"id":"d892463cc91098f1","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":635,"y":1740,"wires":[]},{"id":"915f38fb1e724141","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":635,"y":1580,"wires":[]},{"id":"d86681ccbd79c9f3","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_kitchen\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.7\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1580,"wires":[["915f38fb1e724141"]]},{"id":"4c26de52a53acb79","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo Dot, Dining Room -----","info":"","x":850,"y":1520,"wires":[]},{"id":"064a1785b9c6a8a0","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, BEDROOM 3 (OFFICE, HERS)","links":["8be476363dfd33d3","2d78febda41962f1","b8f60790ac1aa5c6","1d4347f55d10d1e9","491012938a8df3df","5c055fb9ef39363a","b7edd6e7118a40eb"],"x":115,"y":1900,"wires":[["eb8e6829bd532d6b"]]},{"id":"d0dc2e32d91cc767","type":"comment","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"----- Echo Dot, Bedroom 4 (Office, His) -----","info":"","x":880,"y":1840,"wires":[]},{"id":"30a58835931e351d","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_dot_bedroom_4\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.5\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":1900,"wires":[["e6130a39a2ab366a"]]},{"id":"e6130a39a2ab366a","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":1275,"y":1900,"wires":[]},{"id":"e3f52efe96ae8364","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, BEDROOM 4 (OFFICE, HIS)","links":["8be476363dfd33d3","2d78febda41962f1","b8f60790ac1aa5c6","1d4347f55d10d1e9","491012938a8df3df","5c055fb9ef39363a","b7edd6e7118a40eb"],"x":735,"y":1900,"wires":[["6d9005bfb46a1024"]]},{"id":"ef5c926b3d1b7d84","type":"comment","z":"4e1d02e135536c14","g":"ac8b5c16b46e9c89","name":"----- Send Home Assistant Persistent Notification -----","info":"","x":270,"y":80,"wires":[]},{"id":"34c20fee04f5acb2","type":"change","z":"4e1d02e135536c14","g":"ac8b5c16b46e9c89","name":"Setup Notification","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"notification","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":140,"wires":[["634407b9c4245106"]]},{"id":"b9d4c31f4c3cc017","type":"link in","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification, DINING ROOM","links":["8be476363dfd33d3","491012938a8df3df","b7edd6e7118a40eb","b8f60790ac1aa5c6","1d4347f55d10d1e9"],"x":735,"y":1580,"wires":[["5752a3489da78395"]]},{"id":"42fa0ba60aff98c6","type":"function","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Setup Device Data","func":"const gHomeAssistant = global.get(\"homeassistant\").homeAssistant;\nconst device = \"media_player.echo_dot_dining_room\";\n\nmsg.alexa_device = device;\nmsg.volume_level = { \n    \"old\" : gHomeAssistant.states[ device ].attributes.volume_level,\n    \"new\" :  0.7\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":1580,"wires":[["06d2f5e90b465001"]]},{"id":"06d2f5e90b465001","type":"link out","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Send Audible Notification","mode":"link","links":["23bf231d5f92d898"],"x":1275,"y":1580,"wires":[]},{"id":"5c045c6f71cafd52","type":"api-current-state","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"System Can Send","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":290,"y":1400,"wires":[["8a1a871a9a68c76c"],[]]},{"id":"17b416995544c0ca","type":"function","z":"4e1d02e135536c14","g":"09e750898cfc8b60","name":"Setup Volume","func":"msg.payload = {\n    data : {\n        \"volume_level\" : msg.volume_level.old\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":1340,"wires":[["05df8139c9f6130f"]]},{"id":"dc5c6a3cf1f36edd","type":"comment","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"----- Away Mode iOS Actions -----","info":"","x":220,"y":2840,"wires":[]},{"id":"c5ecd5198894a738","type":"server-events","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":160,"y":2960,"wires":[["9c5653e8a90c95e0"]]},{"id":"9c5653e8a90c95e0","type":"switch","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"VACATION_MODE_ON","vt":"str"},{"t":"eq","v":"VACATION_MODE_OFF","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":2960,"wires":[["420cb61e6f9134cb"],["acc1c2bbdc58ad22"]]},{"id":"420cb61e6f9134cb","type":"api-call-service","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"Away Mode: ON","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.home_away_mode"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":550,"y":2960,"wires":[["1d49619462c6119c"]]},{"id":"1d49619462c6119c","type":"debug","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":760,"y":2960,"wires":[]},{"id":"acc1c2bbdc58ad22","type":"api-call-service","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"Away Mode: OFF","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.home_away_mode"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":560,"y":3020,"wires":[["1d49619462c6119c"]]},{"id":"2248c3bddab232ab","type":"server-events","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":170,"y":2540,"wires":[["daef73369d61fe35"]]},{"id":"daef73369d61fe35","type":"switch","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"DOORBELL_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"DOORBELL_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"DOORBELL_SNOOZE_TODAY","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":180,"y":2620,"wires":[["8b270b95bae615f1"],["8b270b95bae615f1"],["46ebda7d20107695"]]},{"id":"9802069d87a1a750","type":"comment","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"----- Doorbell Motion iOS Actions -----","info":"","x":230,"y":2500,"wires":[]},{"id":"cfa47ef66a12662e","type":"debug","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":610,"y":2540,"wires":[]},{"id":"46ebda7d20107695","type":"api-call-service","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"SNOOZE Today","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.doorbell_motion_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":400,"y":2660,"wires":[["cfa47ef66a12662e"]]},{"id":"ced1b96b66e43fa2","type":"server-events","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":930,"y":2120,"wires":[["4e41751b09df2bb9"]]},{"id":"4e41751b09df2bb9","type":"switch","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"FRONT_DOOR_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"FRONT_DOOR_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"FRONT_DOOR_SNOOZE_TODAY","vt":"str"},{"t":"eq","v":"FRONT_DOOR_UNLOCK","vt":"str"},{"t":"eq","v":"FRONT_DOOR_LOCK","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":940,"y":2220,"wires":[["6e719492b5557f6b"],["6e719492b5557f6b"],["e6819eb8ca67a1cb"],["4ce80fbce3d69252"],["e241cbba47358a7d"]]},{"id":"e241cbba47358a7d","type":"api-call-service","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"Front Door: LOCK","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"lock","service":"lock","areaId":[],"deviceId":[],"entityId":["lock.front_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1170,"y":2360,"wires":[["8c87bef3cf981275"]]},{"id":"4ce80fbce3d69252","type":"api-call-service","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"Front Door: UNLOCK","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"lock","service":"unlock","areaId":[],"deviceId":["8c04597c8cdc9c1070410279058f82bb"],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1180,"y":2300,"wires":[["8c87bef3cf981275"]]},{"id":"8c87bef3cf981275","type":"debug","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1410,"y":2140,"wires":[]},{"id":"4ff0b97165dcbf2f","type":"comment","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"----- Front Door iOS Actions -----","info":"","x":970,"y":2060,"wires":[]},{"id":"e6819eb8ca67a1cb","type":"api-call-service","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"SNOOZE Today","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.front_door_unlocked_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1160,"y":2240,"wires":[["8c87bef3cf981275"]]},{"id":"e4754a95609a8baa","type":"server-events","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":170,"y":2100,"wires":[["4c5fa8f19276f614"]]},{"id":"4c5fa8f19276f614","type":"switch","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"GARAGE_DOOR_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"GARAGE_DOOR_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"GARAGE_DOOR_SNOOZE_TODAY","vt":"str"},{"t":"eq","v":"GARAGE_DOOR_OPEN","vt":"str"},{"t":"eq","v":"GARAGE_DOOR_CLOSE","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":180,"y":2200,"wires":[["f55e48e54989ccde"],["f55e48e54989ccde"],["9842fe79057cd998"],["a4c20c7ee5f47897"],["7b53b32ba035cdb3"]]},{"id":"a4c20c7ee5f47897","type":"api-call-service","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"Garage Door: OPEN","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"cover","service":"close_cover","areaId":[],"deviceId":[],"entityId":["cover.garage_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":420,"y":2280,"wires":[["6e24d360031a0fbd"]]},{"id":"7b53b32ba035cdb3","type":"api-call-service","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"Garage Door: CLOSE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"cover","service":"close_cover","areaId":[],"deviceId":[],"entityId":["cover.garage_door"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":420,"y":2340,"wires":[["6e24d360031a0fbd"]]},{"id":"6e24d360031a0fbd","type":"debug","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":650,"y":2100,"wires":[]},{"id":"58d39ac25a967346","type":"comment","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"----- Garage Door iOS Actions -----","info":"","x":220,"y":2060,"wires":[]},{"id":"9842fe79057cd998","type":"api-call-service","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"SNOOZE Today","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.garage_open_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":400,"y":2220,"wires":[["6e24d360031a0fbd"]]},{"id":"da7ce0e1273c7ce9","type":"inject","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"FRONT_DOOR_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":930,"y":2360,"wires":[["4e41751b09df2bb9"]]},{"id":"573fc76fae6efd28","type":"inject","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"DOORBELL_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":170,"y":2700,"wires":[["daef73369d61fe35"]]},{"id":"13086e9fad6d2edd","type":"inject","z":"4e1d02e135536c14","g":"40db6052de5b63de","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"HOUSEHOLD_ACTIVITY_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":160,"y":2900,"wires":[["9c5653e8a90c95e0"]]},{"id":"194478bee1f33b1f","type":"server-events","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"action","propertyType":"msg","value":"msg.payload.event.actionName","valueType":"str"}],"x":890,"y":2540,"wires":[["5bd95af51098d271"]]},{"id":"5bd95af51098d271","type":"switch","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"HOUSEHOLD_ACTIVITY_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"HOUSEHOLD_ACTIVITY_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"HOUSEHOLD_ACTIVITY_SNOOZE_TODAY","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":900,"y":2620,"wires":[["8570bfe314b5b863"],["8570bfe314b5b863"],["ece7245699721110"]]},{"id":"f759d497c3d3f683","type":"api-call-service","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"SET Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.household_activity_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1110,"y":2600,"wires":[["f32f66f033b09c0b"]]},{"id":"731b39a84738bfb8","type":"comment","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"----- Household Activity iOS Actions -----","info":"","x":960,"y":2500,"wires":[]},{"id":"f32f66f033b09c0b","type":"debug","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1330,"y":2540,"wires":[]},{"id":"ece7245699721110","type":"api-call-service","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"SNOOZE Today","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.household_activity_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1120,"y":2660,"wires":[["f32f66f033b09c0b"]]},{"id":"f305cd7d4e967216","type":"inject","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"HOUSEHOLD_ACTIVITY_SNOOZE_30MIN","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":890,"y":2700,"wires":[["5bd95af51098d271"]]},{"id":"8570bfe314b5b863","type":"function","z":"4e1d02e135536c14","g":"1bb40b79d6de32c3","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif( 'HOUSEHOLD_ACTIVITY_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if( 'HOUSEHOLD_ACTIVITY_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? '0' + diffHr:diffHr );\n        result += ':' + ( ( diffMi < 10 ) ? '0' + diffMi:diffMi );\n        result += ':' + ( ( diffS < 10 ) ? '0' + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":2540,"wires":[["f759d497c3d3f683"]]},{"id":"8b270b95bae615f1","type":"function","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif( 'DOORBELL_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if( 'DOORBELL_SNOOZE_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? \"0\" + diffHr:diffHr );\n        result += \":\" + ( ( diffMi < 10 ) ? \"0\" + diffMi:diffMi );\n        result += \":\" + ( ( diffS < 10 ) ? \"0\" + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":2540,"wires":[["8ed4e2c0fee923d2"]]},{"id":"8ed4e2c0fee923d2","type":"api-call-service","z":"4e1d02e135536c14","g":"c27b37bacfd81b8e","name":"SET Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.doorbell_motion_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":390,"y":2600,"wires":[["cfa47ef66a12662e"]]},{"id":"6e719492b5557f6b","type":"function","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif( 'FRONT_DOOR_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if( 'FRONT_DOOR_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? \"0\" + diffHr:diffHr );\n        result += \":\" + ( ( diffMi < 10 ) ? \"0\" + diffMi:diffMi );\n        result += \":\" + ( ( diffS < 10 ) ? \"0\" + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1160,"y":2120,"wires":[["6c4c4b79342bda26"]]},{"id":"6c4c4b79342bda26","type":"api-call-service","z":"4e1d02e135536c14","g":"8c050726f929271a","name":"SET Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.front_door_unlocked_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1150,"y":2180,"wires":[["8c87bef3cf981275"]]},{"id":"4d2787f7908ec7ea","type":"inject","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"GARAGE_DOOR_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":170,"y":2340,"wires":[["4c5fa8f19276f614"]]},{"id":"f55e48e54989ccde","type":"function","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif( 'GARAGE_DOOR_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if( 'GARAGE_DOOR_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? \"0\" + diffHr:diffHr );\n        result += \":\" + ( ( diffMi < 10 ) ? \"0\" + diffMi:diffMi );\n        result += \":\" + ( ( diffS < 10 ) ? \"0\" + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":2100,"wires":[["d74b32891d8e4b8f"]]},{"id":"d74b32891d8e4b8f","type":"api-call-service","z":"4e1d02e135536c14","g":"0d3a64265ec09852","name":"SET Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.garage_open_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":390,"y":2160,"wires":[["6e24d360031a0fbd"]]},{"id":"9ee36580978f187d","type":"server-events","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":1690,"y":2200,"wires":[["b7d10364882a6285"]]},{"id":"b7d10364882a6285","type":"switch","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"WASTE_TAKE_OUT_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"WASTE_TAKE_OUT_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"WASTE_TAKE_OUT_SNOOZE_TODAY","vt":"str"},{"t":"eq","v":"WASTE_TAKE_OUT_SNOOZE_INDEFINITE","vt":"str"},{"t":"eq","v":"WASTE_TAKE_OUT_SHOW","vt":"str"},{"t":"eq","v":"WASTE_TAKE_OUT_HIDE","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":1700,"y":2280,"wires":[["8a119b5df32ec2d0"],["8a119b5df32ec2d0"],["8a119b5df32ec2d0"],["d201aa1c6a17b061"],["e088c31b4f46938a"],["9e53db863b3a965a"]]},{"id":"9e53db863b3a965a","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Waste Day Reminder: HIDE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.sidebar_display_waste_reminder"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1960,"y":2440,"wires":[["2901e2f3173064bb"]]},{"id":"2901e2f3173064bb","type":"debug","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2170,"y":2200,"wires":[]},{"id":"917efd60dcc16fba","type":"comment","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"----- Waste Day Reminders iOS Actions -----","info":"","x":1770,"y":2060,"wires":[]},{"id":"d201aa1c6a17b061","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Snooze: INDEFINITE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.waste_reminder_take_out_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1940,"y":2320,"wires":[["2901e2f3173064bb"]]},{"id":"b0dc70e931aeb02d","type":"inject","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"FRONT_DOOR_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":1690,"y":2140,"wires":[["b7d10364882a6285"]]},{"id":"8a119b5df32ec2d0","type":"function","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif ( 'WASTE_TAKE_OUT_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if ( 'WASTE_TAKE_OUT_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? \"0\" + diffHr:diffHr );\n        result += \":\" + ( ( diffMi < 10 ) ? \"0\" + diffMi:diffMi );\n        result += \":\" + ( ( diffS < 10 ) ? \"0\" + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1920,"y":2260,"wires":[["9d900fdc36792c95"]]},{"id":"9d900fdc36792c95","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Set Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.waste_reminder_take_out_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1900,"y":2200,"wires":[["2901e2f3173064bb"]]},{"id":"e088c31b4f46938a","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Waste Day Reminder: SHOW","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.sidebar_display_waste_reminder"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1960,"y":2380,"wires":[["2901e2f3173064bb"]]},{"id":"6be11bf05a85aade","type":"comment","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"----- Waste Take Out Reminders -----","info":"","x":1750,"y":2100,"wires":[]},{"id":"a6cda53330188176","type":"comment","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"----- Waste Bring In Reminders -----","info":"","x":1740,"y":2520,"wires":[]},{"id":"ae05897d7eda3d39","type":"switch","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Actions","property":"payload.event.actionName","propertyType":"msg","rules":[{"t":"eq","v":"WASTE_BRING_IN_SNOOZE_30MIN","vt":"str"},{"t":"eq","v":"WASTE_BRING_IN_SNOOZE_1HR","vt":"str"},{"t":"eq","v":"WASTE_BRING_IN_SNOOZE_TODAY","vt":"str"},{"t":"eq","v":"WASTE_BRING_IN_SNOOZE_INDEFINITE","vt":"str"},{"t":"eq","v":"WASTE_BRING_IN_SHOW","vt":"str"},{"t":"eq","v":"WASTE_BRING_IN_HIDE","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":1700,"y":2700,"wires":[["960d9233a968f1c7"],["960d9233a968f1c7"],["960d9233a968f1c7"],["172ad7433fb4e831"],["3d3cf0a53eefd516"],["fec717108f38f2a7"]]},{"id":"93e43b93ef9fd350","type":"server-events","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"iOS Actions","server":"1040bb61.673d75","version":1,"event_type":"ios.notification_action_fired","exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"waitForRunning":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"},{"property":"event_type","propertyType":"msg","value":"$outputData(\"eventData\").event_type","valueType":"jsonata"}],"x":1690,"y":2620,"wires":[["ae05897d7eda3d39"]]},{"id":"63eb07cdc05eb87a","type":"inject","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Trigger Event","props":[{"p":"payload.event.actionName","v":"FRONT_DOOR_SNOOZE_30MIN","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":1690,"y":2560,"wires":[["ae05897d7eda3d39"]]},{"id":"960d9233a968f1c7","type":"function","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Prepare Timer","func":"const action = msg.payload.event.actionName;\n\nif ( 'WASTE_BRING_IN_SNOOZE_30MIN' == action )\n{ \n    msg.timer = \"00:30:00\";\n\n} else if ( 'WASTE_BRING_IN_SNOOZE_1HR' == action )\n{ \n    msg.timer = \"01:00:00\";\n\n} else\n{ \n    var toDate = new Date();\n    var tomorrow = new Date();\n        tomorrow.setHours( 24, 0, 0, 0 );\n    \n    var diffMS = tomorrow.getTime() / 1000 - toDate.getTime() / 1000;\n    var diffHr = Math.floor( diffMS / 3600 );\n    \n    diffMS=diffMS-diffHr * 3600;\n    \n    var diffMi = Math.floor( diffMS / 60 );\n    \n    diffMS = diffMS - diffMi * 60;\n    \n    var diffS = Math.floor( diffMS );\n    \n    var result  = ( ( diffHr < 10 ) ? \"0\" + diffHr:diffHr );\n        result += \":\" + ( ( diffMi < 10 ) ? \"0\" + diffMi:diffMi );\n        result += \":\" + ( ( diffS < 10 ) ? \"0\" + diffS:diffS );\n    \n    msg.timer = result;\n\n} // endif\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1920,"y":2680,"wires":[["78b6625978e27750"]]},{"id":"172ad7433fb4e831","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Snooze: INDEFINITE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.waste_reminder_bring_in_snooze"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1940,"y":2740,"wires":[["8b6c2870f4c235d3"]]},{"id":"3d3cf0a53eefd516","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Waste Day Reminder: SHOW","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_on","areaId":[],"deviceId":[],"entityId":["input_boolean.sidebar_display_waste_reminder"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1960,"y":2800,"wires":[["8b6c2870f4c235d3"]]},{"id":"fec717108f38f2a7","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Waste Day Reminder: HIDE","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"input_boolean","service":"turn_off","areaId":[],"deviceId":[],"entityId":["input_boolean.sidebar_display_waste_reminder"],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1960,"y":2860,"wires":[["8b6c2870f4c235d3"]]},{"id":"78b6625978e27750","type":"api-call-service","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"Set Timer","server":"1040bb61.673d75","version":5,"debugenabled":true,"domain":"timer","service":"start","areaId":[],"deviceId":[],"entityId":["timer.waste_reminder_take_out_snooze"],"data":"{\"duration\":\"{{timer}}\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1900,"y":2620,"wires":[["8b6c2870f4c235d3"]]},{"id":"8b6c2870f4c235d3","type":"debug","z":"4e1d02e135536c14","g":"f98f8b4014a46540","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2170,"y":2620,"wires":[]},{"id":"b5bf4f1d2a2db4f8","type":"link in","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Send Tom Notification","links":["05789be1405a5c04","1f3d679062bc9586","23c6f469513289a8","25dd1cf0c9178ade","2bd12a1dd8e20657","448dbe97f92029d7","5d4cdfd4257f70e7","6b25673ada107590","72b503af050e7fca","8519b53052fc2bae","8ccc6e2bce0ab81f","a8e6cda928e350b6","cf5b15aa2245e096","31b5663484594e93"],"x":85,"y":380,"wires":[["d6e63a4502b6ee81"]]},{"id":"5cf6c389a5ca2ed2","type":"api-call-service","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Send Notification","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"mobile_app_toms_iphone","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":1150,"y":460,"wires":[["2906bc08a146bc76"]]},{"id":"2906bc08a146bc76","type":"debug","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":380,"wires":[]},{"id":"79cffc2277e844a8","type":"comment","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"----- Thomas iPhone App Notifcation -----","info":"","x":230,"y":340,"wires":[]},{"id":"acaaaba2e5cf897f","type":"change","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Setup Notification","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"notification","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":380,"wires":[["5cf6c389a5ca2ed2"]]},{"id":"ecf0da358e993948","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Warning)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_warning","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":620,"wires":[["acaaaba2e5cf897f"],[]]},{"id":"28e2c4de343b6cb6","type":"switch","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Notification Type","property":"notification_type","propertyType":"msg","rules":[{"t":"eq","v":"activity_door_interior","vt":"str"},{"t":"eq","v":"activity_door_exterior","vt":"str"},{"t":"eq","v":"activity_location","vt":"str"},{"t":"eq","v":"info","vt":"str"},{"t":"eq","v":"warning","vt":"str"},{"t":"eq","v":"critical","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":220,"y":560,"wires":[["57629077d801ac2d"],["4ca4858c792efbe3"],["7696b565e6d8ec17"],["8652ebf46b0dc0d7"],["ecf0da358e993948"],["479cf12bac6b99d9"]]},{"id":"7696b565e6d8ec17","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (People Locations)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_activity_person_location","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":500,"wires":[["b647e1cc9ad5186e"],[]]},{"id":"479cf12bac6b99d9","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Critical)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_critical","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":680,"wires":[["acaaaba2e5cf897f"],[]]},{"id":"57629077d801ac2d","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Door, Interior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_activity_door_interior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":380,"wires":[["b647e1cc9ad5186e"],[]]},{"id":"22365c5a0e151574","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Person Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":240,"y":460,"wires":[["28e2c4de343b6cb6"],[]]},{"id":"4ca4858c792efbe3","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Door, Exterior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_activity_door_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":440,"wires":[["b647e1cc9ad5186e"],[]]},{"id":"b647e1cc9ad5186e","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Activity)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_activity","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":380,"wires":[["acaaaba2e5cf897f"],[]]},{"id":"8652ebf46b0dc0d7","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"Can Recieve Alerts (Info)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_tom_alert_info","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":530,"y":560,"wires":[["acaaaba2e5cf897f"],[]]},{"id":"77fd5a5925a8fe38","type":"link in","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Send Leo Notification","links":["05789be1405a5c04","1f3d679062bc9586","23c6f469513289a8","25dd1cf0c9178ade","2bd12a1dd8e20657","31b5663484594e93","6b25673ada107590","72b503af050e7fca","8519b53052fc2bae","8ccc6e2bce0ab81f","a8e6cda928e350b6","cf5b15aa2245e096"],"x":1565,"y":380,"wires":[["a52eb4ddaac5b28a"]]},{"id":"4e7668e4541ffd96","type":"api-call-service","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Send Notification (Personal)","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"mobile_app_leonardos_iphone","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2660,"y":460,"wires":[["df37b6773619aeeb"]]},{"id":"df37b6773619aeeb","type":"debug","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2850,"y":380,"wires":[]},{"id":"cac8d0cdb7e26ace","type":"comment","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"----- Leonardo iPhone App Notifcation -----","info":"","x":1710,"y":340,"wires":[]},{"id":"a29de08d17bb4544","type":"change","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Setup Notification","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"notification","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2630,"y":380,"wires":[["4e7668e4541ffd96","48bdac3621efee11"]]},{"id":"defc24f01f2aa66c","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Warning)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_warning","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2020,"y":620,"wires":[["a29de08d17bb4544"],[]]},{"id":"9a85a7549f42bf5d","type":"switch","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Notification Type","property":"notification_type","propertyType":"msg","rules":[{"t":"eq","v":"activity_door_interior","vt":"str"},{"t":"eq","v":"activity_door_exterior","vt":"str"},{"t":"eq","v":"activity_location","vt":"str"},{"t":"eq","v":"info","vt":"str"},{"t":"eq","v":"warning","vt":"str"},{"t":"eq","v":"critical","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":1720,"y":560,"wires":[["13a0c7bc92a753f3"],["b50bbf99ede0e422"],["c51febc42ace8684"],["b4ced1bfdff8c6ac"],["defc24f01f2aa66c"],["e47f81c98ed71e65"]]},{"id":"c51febc42ace8684","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (People Locations)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_activity_person_location","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2050,"y":500,"wires":[["304e47a61e0d594d"],[]]},{"id":"e47f81c98ed71e65","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Critical)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_critical","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2020,"y":680,"wires":[["a29de08d17bb4544"],[]]},{"id":"13a0c7bc92a753f3","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Door, Interior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_activity_door_interior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2040,"y":380,"wires":[["304e47a61e0d594d"],[]]},{"id":"70744c3eca5c9153","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Person Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1740,"y":460,"wires":[["9a85a7549f42bf5d"],[]]},{"id":"b50bbf99ede0e422","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Door, Exterior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_activity_door_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2040,"y":440,"wires":[["304e47a61e0d594d"],[]]},{"id":"304e47a61e0d594d","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Activity)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_activity","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2360,"y":380,"wires":[["a29de08d17bb4544"],[]]},{"id":"b4ced1bfdff8c6ac","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Can Recieve Alerts (Info)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_leo_alert_info","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2010,"y":560,"wires":[["a29de08d17bb4544"],[]]},{"id":"f5ce6c4b657db2c6","type":"link in","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Send Jess Notification","links":["05789be1405a5c04","1f3d679062bc9586","23c6f469513289a8","25dd1cf0c9178ade","2bd12a1dd8e20657","31b5663484594e93","6b25673ada107590","72b503af050e7fca","8519b53052fc2bae","8ccc6e2bce0ab81f","a8e6cda928e350b6","cf5b15aa2245e096"],"x":85,"y":860,"wires":[["041e0e608f525032"]]},{"id":"9e51f06487268cf4","type":"api-call-service","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Send Notification","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"mobile_app_jess_iphone","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":1150,"y":940,"wires":[["39645fbb0beffd8a"]]},{"id":"39645fbb0beffd8a","type":"debug","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":860,"wires":[]},{"id":"1ca8e51d5f5d6744","type":"comment","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"----- Jessica iPhone App Notifcation -----","info":"","x":230,"y":820,"wires":[]},{"id":"31e8c7beffe0e706","type":"change","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Setup Notification","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"notification","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":860,"wires":[["9e51f06487268cf4"]]},{"id":"a131e5da16adaee0","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Warning)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_warning","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":1100,"wires":[["31e8c7beffe0e706"],[]]},{"id":"0bbad6ac2d3ab204","type":"switch","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Notification Type","property":"notification_type","propertyType":"msg","rules":[{"t":"eq","v":"activity_door_interior","vt":"str"},{"t":"eq","v":"activity_door_exterior","vt":"str"},{"t":"eq","v":"activity_location","vt":"str"},{"t":"eq","v":"info","vt":"str"},{"t":"eq","v":"warning","vt":"str"},{"t":"eq","v":"critical","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":220,"y":1040,"wires":[["39ae507e8ab1c037"],["da254d24606c0471"],["457cec0835b07196"],["2b82ed4f3991bd97"],["a131e5da16adaee0"],["44d1cf60f64d4d25"]]},{"id":"457cec0835b07196","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (People Locations)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_activity_person_location","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":570,"y":980,"wires":[["837eb941c19cabed"],[]]},{"id":"44d1cf60f64d4d25","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Critical)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_critical","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":1160,"wires":[["31e8c7beffe0e706"],[]]},{"id":"39ae507e8ab1c037","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Door, Interior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_activity_door_interior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":860,"wires":[["837eb941c19cabed"],[]]},{"id":"3babac707586d369","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Person Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":240,"y":940,"wires":[["0bbad6ac2d3ab204"],[]]},{"id":"da254d24606c0471","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Door, Exterior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_activity_door_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":920,"wires":[["837eb941c19cabed"],[]]},{"id":"837eb941c19cabed","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Activity)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_activity","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":860,"wires":[["31e8c7beffe0e706"],[]]},{"id":"2b82ed4f3991bd97","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"Can Recieve Alerts (Info)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_jess_alert_info","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":530,"y":1040,"wires":[["31e8c7beffe0e706"],[]]},{"id":"72b133dce044ac3e","type":"link in","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Send Dolores Notification","links":["05789be1405a5c04","1f3d679062bc9586","23c6f469513289a8","25dd1cf0c9178ade","2bd12a1dd8e20657","31b5663484594e93","6b25673ada107590","72b503af050e7fca","8519b53052fc2bae","8ccc6e2bce0ab81f","a8e6cda928e350b6","cf5b15aa2245e096"],"x":1565,"y":860,"wires":[["758aef5cc49e9313"]]},{"id":"bf9d38f82fb378c0","type":"api-call-service","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Send Notification","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"mobile_app_tatis_iphone","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2630,"y":940,"wires":[["44b070089176d435"]]},{"id":"44b070089176d435","type":"debug","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2850,"y":860,"wires":[]},{"id":"156d74c3f0388325","type":"comment","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"----- Dolores iPhone App Notifcation -----","info":"","x":1710,"y":820,"wires":[]},{"id":"355f63f2e10f1d96","type":"change","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Setup Notification","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"notification","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2630,"y":860,"wires":[["bf9d38f82fb378c0"]]},{"id":"c4783caa54bb5088","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Warning)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_warning","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2020,"y":1100,"wires":[["355f63f2e10f1d96"],[]]},{"id":"4d9216dd9ff40777","type":"switch","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Notification Type","property":"notification_type","propertyType":"msg","rules":[{"t":"eq","v":"activity_door_interior","vt":"str"},{"t":"eq","v":"activity_door_exterior","vt":"str"},{"t":"eq","v":"activity_location","vt":"str"},{"t":"eq","v":"info","vt":"str"},{"t":"eq","v":"warning","vt":"str"},{"t":"eq","v":"critical","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":1720,"y":1040,"wires":[["3d17dbe7c27762fd"],["8183acb716f3cde2"],["36d841614c763817"],["4e90582666396a4e"],["c4783caa54bb5088"],["af8b37fdc6c7b173"]]},{"id":"36d841614c763817","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (People Locations)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_activity_person_location","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2050,"y":980,"wires":[["da54efefea53b2c3"],[]]},{"id":"af8b37fdc6c7b173","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Critical)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_critical","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2020,"y":1160,"wires":[["355f63f2e10f1d96"],[]]},{"id":"3d17dbe7c27762fd","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Door, Interior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_activity_door_interior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2040,"y":860,"wires":[["da54efefea53b2c3"],[]]},{"id":"c73eb5201af299f3","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Person Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1740,"y":940,"wires":[["4d9216dd9ff40777"],[]]},{"id":"8183acb716f3cde2","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Door, Exterior)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_activity_door_exterior","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2040,"y":920,"wires":[["da54efefea53b2c3"],[]]},{"id":"da54efefea53b2c3","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Activity)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_activity","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2360,"y":860,"wires":[["355f63f2e10f1d96"],[]]},{"id":"4e90582666396a4e","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"Can Recieve Alerts (Info)","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify_dolores_alert_info","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2010,"y":1040,"wires":[["355f63f2e10f1d96"],[]]},{"id":"48bdac3621efee11","type":"api-call-service","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"Send Notification (Work)","server":"1040bb61.673d75","version":5,"debugenabled":false,"domain":"notify","service":"mobile_app_leoair","areaId":[],"deviceId":[],"entityId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2650,"y":520,"wires":[["df37b6773619aeeb"]]},{"id":"86fa6b8d15a3bd95","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_kitchen","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":250,"y":1580,"wires":[["d86681ccbd79c9f3"],[]]},{"id":"5752a3489da78395","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_dining_room","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":890,"y":1580,"wires":[["42fa0ba60aff98c6"],[]]},{"id":"1a2972494879f106","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_bedroom_1","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":250,"y":1740,"wires":[["85de72e04aaa2de6"],[]]},{"id":"eb8e6829bd532d6b","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_bedroom_3","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":250,"y":1900,"wires":[["fd82a36789e9f0fd"],[]]},{"id":"b2d6fd7d25cc6c7f","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_bedroom_2","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":890,"y":1740,"wires":[["c722151add88f640"],[]]},{"id":"6d9005bfb46a1024","type":"api-current-state","z":"4e1d02e135536c14","g":"c4be9eb3db479d51","name":"Can Recieve","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.household_notify_bedroom_4","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":890,"y":1900,"wires":[["30a58835931e351d"],[]]},{"id":"d6e63a4502b6ee81","type":"api-current-state","z":"4e1d02e135536c14","g":"f7b26ea9f0e17e65","name":"System Can Send","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":230,"y":380,"wires":[["22365c5a0e151574"],[]]},{"id":"041e0e608f525032","type":"api-current-state","z":"4e1d02e135536c14","g":"26d6ae42cf54cc15","name":"System Can Send","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":230,"y":860,"wires":[["3babac707586d369"],[]]},{"id":"a52eb4ddaac5b28a","type":"api-current-state","z":"4e1d02e135536c14","g":"055cf721a024eda7","name":"System Can Send","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1730,"y":380,"wires":[["70744c3eca5c9153"],[]]},{"id":"758aef5cc49e9313","type":"api-current-state","z":"4e1d02e135536c14","g":"c2559b5357486764","name":"System Can Send","server":"1040bb61.673d75","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.app_notify","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":"0","forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1730,"y":860,"wires":[["c73eb5201af299f3"],[]]}]