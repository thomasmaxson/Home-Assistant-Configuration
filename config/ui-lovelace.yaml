################################################################################
#
# @author      : Thomas Maxson
# @package     : Lovelace UI
# @description :
#
################################################################################

button_card_templates: !include_dir_merge_named button_card_templates
decluttering_templates: !include_dir_named decluttering_templates

kiosk_mode:
  user_settings:
    - users:
        - "Johan"
        - "Jessica"
        - "Thomas"
        - "Leonardo"
        - "Dolores"
      hide_header: true
      hide_sidebar: true

views:
  - type: custom:grid-layout
    title: Dashboard
    path: dashboard
    layout:
      grid-gap: calc( var( --tihiti-dashboard-layout-padding ) / 1.2 ) calc( var( --tihiti-dashboard-layout-padding ) * 1.25 )
      grid-template-rows: min-content
      grid-template-columns: 0 23% repeat( 2, 1fr ) 0
      grid-template-areas: |
        ".  sidebar  common    foyer     ."
        ".  sidebar  bdr_1     other   ."
        ".  sidebar  exterior  resident  ."
        ".  popups   popups    popups    ."
        ".  .        .         .         ."
      mediaquery:
        # Tablet and down
        "(max-width: 992px)":
          grid-gap: var( --tihiti-dashboard-layout-padding )
          grid-template-rows: auto
          grid-template-columns: 0 1fr 0
          grid-template-areas: |
            ".  sidebar   ."
            ".  quick     ."
            ".  common    ."
            ".  foyer     ."
            ".  bdr_1     ."
            ".  other     ."
            ".  exterior  ."
            ".  resident  ."
            ".  popups    ."
            ".  .         ."
    cards:
      # extra_styles fix
      # https://github.com/custom-cards/button-card#injecting-css-with-extra_styles
      - type: custom:button-card
        styles: { card: [display: none] }

      - type: custom:button-card
        view_layout:
          grid-area: 1 / 2 / 2 / 5
        name: SET THEME TO "TIHITI" IN PROFILE
        tap_action:
          action: navigate
          navigation_path: /profile
        styles:
          card:
            - display: >
                [[[
                  return hass.themes.theme === 'tihiti'
                      ? 'none'
                      : 'initial';
                ]]]
          name:
            - z-index: 1
            - overflow: visible
            - color: red
            - font-weight: bolder
            - font-size: xxx-large
            - background: yellow

      #
      # SIDEBAR
      # --------------------------------------------------

      - type: custom:mod-card
        view_layout:
          grid-area: sidebar
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              entity: sensor.template_sidebar
              template: sidebar_template
              tap_action: !include popup/status-sidebar.yaml
              double_tap_action: !include popup/status-sidebar.yaml

            - type: custom:mod-card
              card_mod:
                style:
                  hui-horizontal-stack-card$: |
                    #root {
                      padding-top: 10%;
                    }

                    @media screen and (min-width: 992px) {
                      #root {
                        display: none !important;
                      }
                    }
              card:
                type: horizontal-stack
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: lock.front_door
                    name: Front Door
                    template:
                      - lock
                    aspect_ratio: 2/1
                    styles:
                      grid:
                        - grid-template-areas: |
                            "i  n"
                            "i  s"
                        - grid-template-columns: 35% 65%
                        - grid-template-rows: repeat(2, auto)

                  - type: custom:button-card
                    entity: cover.garage_door
                    name: Garage Door
                    template:
                      - cover
                    aspect_ratio: 2/1
                    styles:
                      grid:
                        - grid-template-areas: |
                            "i  n"
                            "i  s"
                        - grid-template-columns: 35% 65%
                        - grid-template-rows: repeat(2, auto)

            - type: conditional
              conditions:
                - entity: sensor.custom_laundry_machine_state
                  state: "on"
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    hui-grid-card$: |
                      #root {
                        padding-top: 10%;
                      }
                card:
                  type: grid
                  square: false
                  columns: 1
                  cards:
                    - type: conditional
                      conditions:
                        - entity: sensor.laundry_washer_machine_state
                          state_not: "Off"
                      card:
                        type: custom:button-card
                        entity: sensor.laundry_washer_combined_details
                        icon: mdi:washing-machine
                        name: Washing Machine
                        template:
                          - laundry

                    - type: conditional
                      conditions:
                        - entity: sensor.laundry_dryer_machine_state
                          state_not: "Off"
                      card:
                        type: custom:button-card
                        entity: sensor.laundry_dryer_combined_details
                        icon: mdi:tumble-dryer
                        name: Tumble Dryer
                        template:
                          - laundry

      #
      # COMMON AREAS
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: common
        title: Common Areas
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: grid
                # title: Common Areas
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.kitchen_ceiling_lights
                    name: Kitchen
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.dining_room_chandelier
                    name: Chandelier
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.living_room_corner_lamp
                    name: Corner Lamp
                    template:
                      - light

              - type: grid
                # title: Kitchen Cabinets
                columns: 3
                cards:
                  - type: conditional
                    conditions:
                      - entity: light.kitchen_cabinet_upper_coffee_bar
                        state_not: "unavailable"
                      - entity: light.kitchen_cabinet_upper_range
                        state_not: "unavailable"
                      - entity: input_boolean.sync_cabinet_above_lights
                        state_not: "unavailable"
                      - entity: input_boolean.sync_cabinet_above_lights
                        state: "on"
                    card:
                      type: custom:button-card
                      entity: light.cabinet_upper_lights
                      name: Up Lighting
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.kitchen_cabinet_upper_coffee_bar
                        state_not: "unavailable"
                      - entity: input_boolean.sync_cabinet_above_lights
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.kitchen_cabinet_upper_coffee_bar
                      name: Above Coffee Bar
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.kitchen_cabinet_upper_range
                        state_not: "unavailable"
                      - entity: input_boolean.sync_cabinet_above_lights
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.kitchen_cabinet_upper_range
                      name: Above Range
                      template:
                        - light

      #
      # FOYER
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: foyer
        title: Foyer
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: grid
                # title: Foyer
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.foyer_ceiling_ledge
                    name: Ledge
                    template:
                      - light

                  - type: conditional
                    conditions:
                      - entity: light.foyer_ceiling_lights
                        state_not: "unavailable"
                      - entity: input_boolean.sync_foyer_lights
                        state: "on"
                    card:
                      type: custom:button-card
                      entity: light.foyer_ceiling_lights
                      name: Ceiling
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.foyer_hallway_ceiling
                        state_not: "unavailable"
                      - entity: input_boolean.sync_foyer_lights
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.foyer_hallway_ceiling
                      name: Hallway
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.foyer_entryway_ceiling
                        state_not: "unavailable"
                      - entity: input_boolean.sync_foyer_lights
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.foyer_entryway_ceiling
                      name: Entryway
                      template:
                        - light

              - type: grid
                # title: Foyer
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.foyer_under_table
                    name: Floor
                    template:
                      - light

                  # - type: custom:button-card
                  #   entity: climate.ecobee
                  #   name: Air Conditioner
                  #   double_tap_action: !include popup/status-temperatures.yaml
                  #   hold_action: !include popup/status-temperatures.yaml
                  #   template:
                  #     - base
                  #     - climate
                  #   variables:
                  #     circle_input: >
                  #       [[[
                  #         if (entity) {
                  #           return entity.state == 'cool' ?
                  #             entity.attributes.temperature :
                  #             entity.attributes.current_temperature;
                  #         }
                  #       ]]]

      #
      # BEDROOM 1
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: bdr_1
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: grid
                title: Main Bedroom
                columns: 3
                cards:
                  - type: conditional
                    conditions:
                      - entity: light.bedroom_1_bedside_lamps
                        state_not: "unavailable"
                      - entity: input_boolean.sync_bedroom_1_bedside_lamps
                        state: "on"
                    card:
                      type: custom:button-card
                      entity: light.bedroom_1_bedside_lamps
                      name: Bedside Lamps
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.bedroom_1_lamp_j
                        state_not: "unavailable"
                      - entity: input_boolean.sync_bedroom_1_bedside_lamps
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.bedroom_1_lamp_j
                      name: Her Bedside
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: light.bedroom_1_lamp_t
                        state_not: "unavailable"
                      - entity: input_boolean.sync_bedroom_1_bedside_lamps
                        state: "off"
                    card:
                      type: custom:button-card
                      entity: light.bedroom_1_lamp_t
                      name: His Bedside
                      template:
                        - light

                  - type: conditional
                    conditions:
                      - entity: cover.bedroom_1_large_window_left
                        state_not: "unavailable"
                      - entity: cover.bedroom_1_large_window_right
                        state_not: "unavailable"
                    card:
                      type: custom:button-card
                      entity: cover.bedroom_1_large_curtains
                      name: Curtains
                      template:
                        - cover

              - type: grid
                title: Main Bathroom
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.main_bathroom_lights_switch_a
                    name: Ceiling
                    template:
                      - light
                    variables:
                      circle_value: "ON"
                      circle_value_unit: ""

                  - type: custom:button-card
                    entity: switch.main_bathroom_lights_switch_b
                    name: Vanity
                    template:
                      - light
                    variables:
                      circle_value: "ON"
                      circle_value_unit: ""

              - type: grid
                title: Closet Lights
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.closet_hallway_ceiling_light
                    name: Hallway
                    icon: hue:recessed-ceiling
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.closet_hallway_light_j
                    name: Her Closet
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.closet_hallway_light_t
                    name: His Closet
                    template:
                      - light

      #
      # BEDROOM 3 AND 4
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: other
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: grid
                title: Other
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.bedroom_4_lights
                    name: Tom's Office
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.laundry_ceiling_light
                    name: Laundry Room
                    template:
                      - light

              - type: grid
                title: Garage
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.garage_ceiling
                    name: Ceiling
                    template:
                      - light
                    variables:
                      circle_value: "ON"
                      circle_value_unit: ""

                  - type: custom:button-card
                    entity: light.garage_fan
                    name: Fan
                    template:
                      - light
                    variables:
                      circle_value: "ON"
                      circle_value_unit: ""

      #
      # OTHER
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: exterior
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: grid
                title: Exterior
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.backyard_string_lights
                    name: Backyard
                    template:
                      - light
                    variables:
                      circle_value: "ON"
                      circle_value_unit: ""

                  - type: custom:button-card
                    entity: light.foyer_exterior_entryway
                    name: Entryway
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.garage_exterior
                    name: Ceiling
                    template:
                      - light

              - type: grid
                title: Misc
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: light.laundry_hallway_light
                    name: Laundry Hallway
                    template:
                      - light

                  - type: custom:button-card
                    entity: light.guest_hallway_light
                    name: Guest Hallway
                    template:
                      - light

      #
      # RESIDENT
      # --------------------------------------------------

      - type: grid
        view_layout:
          grid-area: resident
        square: false
        columns: 1
        cards:
          - type: custom:swipe-card
            square: false
            reset_after: 30
            parameters:
              autoHeight: true
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 90
                depth: 300
            cards:
              - type: grid
                title: Resident Status
                columns: 3
                cards:
                  - type: custom:button-card
                    name: Tom
                    entity: person.thomas
                    tap_action: !include popup/person-thomas.yaml
                    double_tap_action: !include popup/person-thomas.yaml
                    hold_action: !include popup/person-thomas.yaml
                    template:
                      - person

                  - type: custom:button-card
                    name: Jess
                    entity: person.jessica
                    tap_action: !include popup/person-jessica.yaml
                    double_tap_action: !include popup/person-jessica.yaml
                    hold_action: !include popup/person-jessica.yaml
                    template:
                      - person

                  - type: custom:button-card
                    name: Doggies
                    # entity: group.pets
                    entity: input_boolean.dog_gouda_status
                    show_entity_picture: true
                    entity_picture: /local/uploads/avatar-gouda.png
                    # tap_action: !include popup/pets.yaml
                    # double_tap_action: !include popup/pets.yaml
                    # hold_action: !include popup/pets.yaml
                    template:
                      - person_boolean

              - type: grid
                title: Resident Status
                columns: 3
                cards:
                  # - type: custom:button-card
                  #   name: Leo
                  #   entity: person.leo
                  #   tap_action: !include popup/person-leonardo.yaml
                  #   double_tap_action: !include popup/person-leonardo.yaml
                  #   hold_action: !include popup/person-leonardo.yaml
                  #   template:
                  #     - person

                  # - type: custom:button-card
                  #   name: Dolores
                  #   entity: person.dolores
                  #   tap_action: !include popup/person-dolores.yaml
                  #   double_tap_action: !include popup/person-dolores.yaml
                  #   hold_action: !include popup/person-dolores.yaml
                  #   template:
                  #     - person

                  - type: custom:button-card
                    name: Guests
                    entity: input_boolean.guests_home
                    show_entity_picture: true
                    entity_picture: /local/uploads/avatar-guest-dino.png
                    template:
                      - person_boolean

      #
      # Popups
      # --------------------------------------------------

      - type: custom:mod-card
        view_layout:
          grid-area: popups
        card_mod:
          style:
            hui-horizontal-stack-card$: |
              #root { 
                justify-content: space-between;
                margin-top: 2vw;
              }

              @media screen and (max-width: 992px) {
                #root { 
                  flex-wrap: wrap;
                  margin: 0 -2vw;
                  padding-bottom: 5vw;
                }

                #root > button-card { 
                  flex: 1 1 40vw !important;
                  margin: 4vw 2vw 0 !important;
                  max-width: none !important;
                }
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:home"></ha-icon> Overview
              template:
                - details
              tap_action: !include popup/status-household-overview.yaml
              double_tap_action: !include popup/status-household-overview.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:floor-plan"></ha-icon> Details
              template:
                - details
              tap_action: !include popup/status-household-details.yaml
              double_tap_action: !include popup/status-household-details.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:television"></ha-icon> Media
              template:
                - details
              tap_action: !include popup/status-media.yaml
              double_tap_action: !include popup/status-media.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:thermometer"></ha-icon> Temperature
              template:
                - details
              tap_action: !include popup/status-temperatures.yaml
              double_tap_action: !include popup/status-temperatures.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:router-wireless"></ha-icon> Router
              template:
                - details
              tap_action: !include popup/status-router.yaml
              double_tap_action: !include popup/status-router.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:information"></ha-icon> Systems
              template:
                - details
              tap_action: !include popup/status-systems.yaml
              double_tap_action: !include popup/status-systems.yaml

            - type: custom:button-card
              name: >
                <ha-icon icon="mdi:cog"></ha-icon> Settings
              template:
                - details
              tap_action: !include popup/status-settings.yaml
              double_tap_action: !include popup/helpers.yaml
