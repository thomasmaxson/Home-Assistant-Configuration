################################################################################
#
# @author      : Thomas Maxson
# @package     : Popup, Helpers
# @description :
#
################################################################################

action: fire-dom-event
browser_mod:
  command: popup
  service: browser_mod.popup
  data:
    title: Helpers
    #timeout: 15000
    style: >
      --popup-max-width: calc( 385px + 385px );
    content:
      type: custom:mod-card
      card_mod:
        style:
          layout-card$:
            grid-layout$:
              .: |
                #root { overflow: hidden;}
              hui-entities-card:
                $: |
                  .card-content {
                    padding: 1.5em 1.5em 0;
                    margin: -2em 0 1em;
                  }

                  /* Desktop */
                  @media screen and (min-width: 992px) { 
                    .card-content { 
                      border-right: 1px solid var( --entities-divider-color, var( --divider-color ) );
                      border-left: 1px solid var( --entities-divider-color, var( --divider-color ) );
                      margin-right: -1px;
                      margin-left: -1px;
                    }
                  }
      card:
        type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          margin: 0
          grid-template-columns: repeat( 2, 385px )
          grid-template-rows: 1fr
          grid-template-areas: |
            'column_a column_b'
          mediaquery:
            # Tablet and down
            "(max-width: 992px)":
              grid-template-columns: 1fr
              grid-template-rows: repeat( 2, 1fr )
              grid-template-areas: |
                'column_a'
                'column_b'
        cards:
          - type: entities
            view_layout:
              grid-area: column_a
            show_header_toggle: false
            card_mod:
              class: content
            entities:
              # - entity: input_boolean.home_away_mode
              #   name: Home Away Mode

              - type: conditional
                conditions:
                  - entity: input_boolean.manual_override_foyer_exterior_entryway
                    state: "on"
                row:
                  entity: input_boolean.manual_override_foyer_exterior_entryway
                  name: Foyer Exterior, Override

              - type: section
                label: Daily Evening Automations
              - entity: sensor.automation_daily_status
                name: Status
              - type: conditional
                conditions:
                  - entity: input_boolean.automation_daily_sunset
                    state: "on"
                row:
                  entity: input_boolean.automation_daily_sunset
                  name: Active
              - entity: input_button.trigger_evening_automation
                name: Run Automations

              - type: section
                label: Laundry Reminders
              - entity: input_boolean.reminder_laundry_complete_washer
                name: Washer Complete Reminder
              - entity: input_boolean.reminder_laundry_complete_dryer
                name: Dryer Complete Reminder

              # - type: section
              #   label: Zigbee2MQTT
              # - entity: sensor.zigbee2mqtt_bridge_state
              #   name: Bridge State
              # - entity: input_boolean.zigbee2mqtt_allow_join
              #   name: Allow Devices to Join

          - type: entities
            view_layout:
              grid-area: column_b
            show_header_toggle: false
            #title: Snoozed Notifications
            card_mod:
              class: content
            entities:
              - type: section
                label: Snoozed Household Activity
              - type: conditional
                conditions:
                  - entity: input_boolean.household_activity_snooze
                    state: "on"
                row:
                  entity: input_boolean.household_activity_snooze
                  name: Snoozed Indefinite

              - type: conditional
                conditions:
                  - entity: input_boolean.household_activity_snooze
                    state: "off"
                row:
                  entity: timer.household_activity_snooze
                  name: Snooze Countdown

              - type: section
                label: Snoozed Garage Door Left Open
              - type: conditional
                conditions:
                  - entity: input_boolean.garage_open_snooze
                    state: "on"
                row:
                  entity: input_boolean.garage_open_snooze
                  name: Snoozed Indefinite
              - type: conditional
                conditions:
                  - entity: input_boolean.garage_open_snooze
                    state: "off"
                row:
                  entity: timer.garage_open_snooze
                  name: Snooze Countdown

              - type: section
                label: Snoozed Front Door Unlocked
              - type: conditional
                conditions:
                  - entity: input_boolean.front_door_unlocked_snooze
                    state: "on"
                row:
                  entity: input_boolean.front_door_unlocked_snooze
                  name: Snoozed Indefinite
              - type: conditional
                conditions:
                  - entity: input_boolean.front_door_unlocked_snooze
                    state: "off"
                row:
                  entity: timer.front_door_unlocked_snooze
                  name: Snooze Countdown

              # - type: section
              #   label: Snoozed Doorbell Motion Detected
              # - type: conditional
              #   conditions:
              #     - entity: input_boolean.doorbell_motion_snooze
              #       state: "on"
              #   row:
              #     entity: input_boolean.doorbell_motion_snooze
              #     name: Snoozed Indefinite
              # - type: conditional
              #   conditions:
              #     - entity: input_boolean.doorbell_motion_snooze
              #       state: "off"
              #   row:
              #     entity: timer.doorbell_motion_snooze
              #     name: Snooze Countdown
